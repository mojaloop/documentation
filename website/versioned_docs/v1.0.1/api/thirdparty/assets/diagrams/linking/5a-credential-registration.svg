<svg xmlns="http://www.w3.org/2000/svg" height="2700" preserveAspectRatio="none" style="width:2272px;height:2700px" width="2272">
  <path fill="#DDD" stroke="#383838" d="M801.5 40.953h1142v2653.406h-1142z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="1339" y="53.02">
    Mojaloop
  </text>
  <text font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="439" x="918.5" y="28.708">
    PISP Linking: Credential registration (verification)
  </text>
  <path stroke="#000" d="M37.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M37.5 106.367v28"/>
  <path stroke="#000" d="M37.5 134.367v80.531"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M37.5 214.898v28"/>
  <path stroke="#000" d="M37.5 242.898v2445.461M944.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M944.5 106.367v28"/>
  <path stroke="#000" d="M944.5 134.367v80.531"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M944.5 214.898v28"/>
  <path stroke="#000" d="M944.5 242.898v2445.461"/>
  <path fill="#F4F4F4" stroke="#000" d="M939.5 687.75h10v2000.609h-10z"/>
  <path stroke="#000" d="M1236 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1236 106.367v28"/>
  <path stroke="#000" d="M1236 134.367v80.531"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1236 214.898v28"/>
  <path stroke="#000" d="M1236 242.898v2445.461M1860.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1860.5 106.367v28"/>
  <path stroke="#000" d="M1860.5 134.367v80.531"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1860.5 214.898v28"/>
  <path stroke="#000" d="M1860.5 242.898v2445.461M1986.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1986.5 106.367v28"/>
  <path stroke="#000" d="M1986.5 134.367v80.531"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1986.5 214.898v28"/>
  <path stroke="#000" d="M1986.5 242.898v2445.461"/>
  <path fill="#F4F4F4" stroke="#000" d="M1981.5 791.414h10v1896.945h-10z"/>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M5 60.086h65v37.281H5z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="12" y="85.65">
    PISP
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M805.5 60.086h278v37.281h-278z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="264" x="812.5" y="85.65">
    Thirdparty-API-Adapter
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M1093.5 60.086h285v37.281h-285z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271" x="1100.5" y="85.65">
    Account Lookup Service
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M1781.5 60.086h158v37.281h-158z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="1788.5" y="85.65">
    Auth Service
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M1949.5 60.086h74v37.281h-74z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="1956.5" y="85.65">
    DFSP
  </text>
  <path d="M7.75 139.367v70h2008v-60l-10-10H7.75" fill="#ECECEC" stroke="#383838"/>
  <path d="M2005.75 139.367v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="1039" x="488" y="156.434">
    The PISP uses the FIDO registration flow to generate a new keypair and sign the challenge, relying on the user performing an &quot;unlock action&quot; on their mobile device.
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="843" x="488" y="186.7">
    The PISP uses the PublicKeyCredential as the fidoPayload for the credential, which can be understood by the Auth Service and DFSP
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="508" x="488" y="201.833">
    See https://webauthn.guide/#authentication for more information on this object
  </text>
  <path stroke="#000" d="M927.5 683.75l10 4-10 4 4-4zM37.5 687.75h896"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="44.5" y="470.825">
    CRED-0
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="400" x="102.5" y="258.965">
    PUT /consents/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="118.5" y="274.098">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="118.5" y="289.231">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="118.5" y="304.364">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="134.5" y="319.497">
    consentRequestId: &quot;11111111-0000-0000-0000-000000000000&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="134.5" y="334.629">
    status: &quot;ISSUED&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="134.5" y="349.762">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="150.5" y="364.895">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="166.5" y="380.028">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="166.5" y="395.161">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="150.5" y="410.293">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="150.5" y="425.426">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="166.5" y="440.559">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="166.5" y="455.692">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="150.5" y="470.825">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="134.5" y="485.957">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="134.5" y="501.09">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="150.5" y="516.223">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="150.5" y="531.356">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="150.5" y="546.489">
    fidoPayload: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="744" x="166.5" y="561.622">
    id: &quot;45c-TkfkjQovQeAWmOy-RLBHEJ_e4jYzQYgD8VdbkePgM5d98BaAadadNYrknxgH0jQEON8zBydLgh1EqoC9DA&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="166.5" y="576.754">
    response: {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="571" x="190.5" y="591.887">
    authenticatorData: &quot;SZYN5YgOjGh0NBcPZHZgW4/krrmihjLHmVzzuoMdl2MBAAAACA==&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="190.5" y="607.02">
    clientDataJSON: &quot;eyJ0eXBlIjoid2ViYXV0aG4...&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="190.5" y="622.153">
    signature: &quot;MEUCIDcJRBu5aOLJVc...&quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="166.5" y="637.286">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="150.5" y="652.418">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="134.5" y="667.551">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="118.5" y="682.684">
    }
  </text>
  <path stroke="#000" d="M48.5 712.883l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M42.5 716.883h896"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="54.5" y="711.817">
    CRED-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="112.5" y="711.817">
    202 Accepted
  </text>
  <path stroke="#000" d="M1969.5 787.414l10 4-10 4 4-4zM949.5 791.414h1026"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="956.5" y="763.649">
    CRED-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="400" x="1014.5" y="740.95">
    PUT /consents/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1030.5" y="756.082">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1030.5" y="771.215">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="1030.5" y="786.348">
    {...}
  </text>
  <path stroke="#000" d="M960.5 816.547l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M954.5 820.547h1026"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="966.5" y="815.481">
    CRED-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1024.5" y="815.481">
    202 Accepted
  </text>
  <path fill="#ECECEC" stroke="#383838" d="M1715.5 833.547h542v159h-542z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="534" x="1719.5" y="849.614">
    1. DFSP checks the signed challenge against the derived challenge from the scopes
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="383" x="1719.5" y="879.879">
    If the DFSP opts to use the hub-hosted Auth-Service it then:
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="1719.5" y="895.012">
    1. Registers the consent with the Auth Service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="2017.5" y="895.012">
    POST /consents
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="1719.5" y="910.145">
    2. If the DFSP recieves a `PUT /consents/{id}` and the callback contains
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1731.5" y="925.278">
    Consent.credential.status
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1935.5" y="925.278">
    of
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="1951.5" y="925.278">
    VERIFIED
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="2015.5" y="925.278">
    , for each scope in the
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1731.5" y="940.411">
    Consent, the DFSP creates a
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1919.5" y="940.411">
    CredentialScope
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="2043.5" y="940.411">
    else, if it recieves
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="423" x="1731.5" y="955.543">
    a `PUT /consents/{id}/error` callback, it knows that the Consent is
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="1731.5" y="970.676">
    invalid, and can propagate the error back to the PISP
  </text>
  <path stroke="#000" d="M960.5 1484.125l-10 4 10 4-4-4zM954.5 1488.125h1026"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="966.5" y="1248.501">
    CRED-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1024.5" y="1013.942">
    POST /consents
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1040.5" y="1029.075">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1040.5" y="1044.207">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1040.5" y="1059.34">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="384" x="1056.5" y="1074.473">
    consentId: &quot;22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1440.5" y="1074.473">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="1056.5" y="1089.606">
    consentRequestId: &quot;11111111-0000-0000-0000-000000000000
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1496.5" y="1089.606">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1056.5" y="1104.739">
    status: &quot;ISSUED&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1056.5" y="1119.872">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1072.5" y="1135.004">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1088.5" y="1150.137">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="1088.5" y="1165.27">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1088.5" y="1180.403">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="1072.5" y="1195.536">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1072.5" y="1210.668">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1088.5" y="1225.801">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="1088.5" y="1240.934">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1088.5" y="1256.067">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="1072.5" y="1271.2">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="1056.5" y="1286.332">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1056.5" y="1301.465">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1072.5" y="1316.598">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1072.5" y="1331.731">
    status: &quot;PENDING&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1072.5" y="1346.864">
    fidoPayload: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="744" x="1088.5" y="1361.997">
    id: &quot;45c-TkfkjQovQeAWmOy-RLBHEJ_e4jYzQYgD8VdbkePgM5d98BaAadadNYrknxgH0jQEON8zBydLgh1EqoC9DA&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="1088.5" y="1377.129">
    response: {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="571" x="1112.5" y="1392.262">
    authenticatorData: &quot;SZYN5YgOjGh0NBcPZHZgW4/krrmihjLHmVzzuoMdl2MBAAAACA==&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1112.5" y="1407.395">
    clientDataJSON: &quot;eyJ0eXBlIjoid2ViYXV0aG4...&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="1112.5" y="1422.528">
    signature: &quot;MEUCIDcJRBu5aOLJVc...&quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1088.5" y="1437.661">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1072.5" y="1452.793">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1056.5" y="1467.926">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1040.5" y="1483.059">
    }
  </text>
  <path stroke="#000" d="M1969.5 1513.258l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M949.5 1517.258h1026"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="956.5" y="1512.192">
    CRED-5
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="1014.5" y="1512.192">
    &quot;202 Accepted&quot;
  </text>
  <path stroke="#000" d="M1848.5 1587.79l10 4-10 4 4-4zM949.5 1591.789h905"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="956.5" y="1564.024">
    CRED-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1014.5" y="1541.325">
    POST /consents
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1030.5" y="1556.457">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1030.5" y="1571.59">
    FSPIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="1030.5" y="1586.723">
    {...}
  </text>
  <path stroke="#000" d="M960.5 1616.922l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M954.5 1620.922h905"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="966.5" y="1615.856">
    CRED-7
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="1024.5" y="1615.856">
    &quot;202 Accepted&quot;
  </text>
  <path fill="#ECECEC" stroke="#383838" d="M1663.5 1633.922h394v23h-394z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="386" x="1667.5" y="1649.989">
    The Auth Service checks the signature against the challenge
  </text>
  <path fill="#ECECEC" stroke="#383838" d="M1455 1667.055h811v68h-811z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="455" x="1459" y="1683.122">
    The auth service is now the authoritative source for the Consent object.
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="1459" y="1713.387">
    It must register the consentId with the ALS
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="795" x="1467" y="1728.52">
    - `Consent` - to allow for `GET /consent/{ID}` calls etc. Will point to the fspId of the Auth Service responsible for the Consent
  </text>
  <path stroke="#000" d="M1247 1818.25l-10 4 10 4-4-4zM1241 1822.25h618.5"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1253" y="1786.918">
    CRED-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="1311" y="1756.653">
    POST /participants/CONSENTS/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1327" y="1771.786">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1327" y="1786.918">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1343" y="1802.051">
    fspId: &quot;central-auth&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1327" y="1817.184">
    }
  </text>
  <path stroke="#000" d="M1848.5 1847.383l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M1236 1851.383h618.5"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1243" y="1846.317">
    CRED-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1301" y="1846.317">
    202 Accepted
  </text>
  <path fill="#D3D3D3" stroke="#383838" d="M1077 1864.383h318v23h-318z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="1081" y="1880.45">
    ALS registers a new entry in the Consents oracle
  </text>
  <path stroke="#000" d="M1848.5 1985.313l10 4-10 4 4-4zM1236 1989.313h618.5"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="1243" y="1946.415">
    CRED-10
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="504" x="1310" y="1908.582">
    PUT /participants/CONSENTS/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1326" y="1923.715">
    FSIOP-Source: account-lookup-service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="1326" y="1938.848">
    FSIOP-Destination: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1326" y="1953.981">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1342" y="1969.114">
    fspId: &quot;central-auth&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1326" y="1984.247">
    }
  </text>
  <path stroke="#000" d="M1247 2014.445l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M1241 2018.445h618.5"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="1253" y="2013.379">
    CRED-11
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="1320" y="2013.379">
    200 OK
  </text>
  <path fill="#D3D3D3" stroke="#383838" d="M1647.5 2031.445h426v23h-426z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="418" x="1651.5" y="2047.512">
    The auth service now informs the DFSP that the credential is valid
  </text>
  <path stroke="#000" d="M960.5 2500.43l-10 4 10 4-4-4zM954.5 2504.43h905"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="966.5" y="2287.504">
    CRED-12
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="400" x="1033.5" y="2075.645">
    PUT /consents/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1049.5" y="2090.778">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1049.5" y="2105.911">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1049.5" y="2121.044">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="1065.5" y="2136.176">
    consentRequestId: &quot;11111111-0000-0000-0000-000000000000
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1505.5" y="2136.176">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1065.5" y="2151.309">
    status: &quot;ISSUED&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1065.5" y="2166.442">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1081.5" y="2181.575">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1097.5" y="2196.707">
    accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="1097.5" y="2211.84">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="1081.5" y="2226.973">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1081.5" y="2242.106">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1097.5" y="2257.239">
    accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="1097.5" y="2272.372">
    actions: [ &quot;accounts.transfer&quot;, &quot;accounts.getBalance&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="1081.5" y="2287.504">
    },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="1065.5" y="2302.637">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1065.5" y="2317.77">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1081.5" y="2332.903">
    credentialType: &quot;FIDO&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1081.5" y="2348.036">
    status: &quot;VERIFIED&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1081.5" y="2363.169">
    fidoPayload: {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="744" x="1097.5" y="2378.301">
    id: &quot;45c-TkfkjQovQeAWmOy-RLBHEJ_e4jYzQYgD8VdbkePgM5d98BaAadadNYrknxgH0jQEON8zBydLgh1EqoC9DA&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="1097.5" y="2393.434">
    response: {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="571" x="1121.5" y="2408.567">
    authenticatorData: &quot;SZYN5YgOjGh0NBcPZHZgW4/krrmihjLHmVzzuoMdl2MBAAAACA==&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="1121.5" y="2423.7">
    clientDataJSON: &quot;eyJ0eXBlIjoid2ViYXV0aG4...&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="1121.5" y="2438.832">
    signature: &quot;MEUCIDcJRBu5aOLJVc...&quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1097.5" y="2453.965">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1081.5" y="2469.098">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1065.5" y="2484.231">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1049.5" y="2499.364">
    }
  </text>
  <path stroke="#000" d="M1848.5 2529.563l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M949.5 2533.563h905"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="956.5" y="2528.497">
    CRED-13
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1023.5" y="2528.497">
    &quot;200 OK&quot;
  </text>
  <path stroke="#000" d="M1969.5 2604.094l10 4-10 4 4-4zM949.5 2608.094h1026"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="956.5" y="2580.329">
    CRED-14
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="400" x="1023.5" y="2557.629">
    PUT /consents/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1039.5" y="2572.762">
    FSIOP-Source: central-auth
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="1039.5" y="2587.895">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="1039.5" y="2603.028">
    {...}
  </text>
  <path stroke="#000" d="M960.5 2633.227l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M954.5 2637.227h1026"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="966.5" y="2632.161">
    CRED-15
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="1033.5" y="2632.161">
    &quot;200 OK&quot;
  </text>
  <path fill="#ECECEC" stroke="#383838" d="M1761.5 2650.227h450v23h-450z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="442" x="1765.5" y="2666.294">
    DFSP is now satisfied that the Consent registered by the PISP is valid.
  </text>
</svg>
