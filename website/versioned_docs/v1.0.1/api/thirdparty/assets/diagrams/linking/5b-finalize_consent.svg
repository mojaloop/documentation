<svg xmlns="http://www.w3.org/2000/svg" height="997" preserveAspectRatio="none" style="width:1523px;height:997px" width="1523">
  <path fill="#DDD" stroke="#383838" d="M501 40.953h392v950.992H501z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="663.5" y="53.02">
    Mojaloop
  </text>
  <text font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="439" x="544" y="28.708">
    PISP Linking: Credential registration (verification)
  </text>
  <path fill="#FFF" stroke="#000" stroke-width="2" d="M537 216.898h752.5V524.89H537z"/>
  <path stroke="#000" d="M37.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M37.5 106.367v28"/>
  <path stroke="#000" d="M37.5 134.367v851.578"/>
  <path fill="#F4F4F4" stroke="#000" d="M32.5 903.68h10v82.266h-10z"/>
  <path stroke="#000" d="M549.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M549.5 106.367v28"/>
  <path stroke="#000" d="M549.5 134.367v851.578M746.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M746.5 106.367v28"/>
  <path stroke="#000" d="M746.5 134.367v851.578M1273.5 98.367v8"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1273.5 106.367v28"/>
  <path stroke="#000" d="M1273.5 134.367v851.578"/>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M5 60.086h65v37.281H5z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="12" y="85.65">
    PISP
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M505 60.086h89v37.281h-89z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="512" y="85.65">
    Switch
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M604 60.086h285v37.281H604z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271" x="611" y="85.65">
    Account Lookup Service
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M1236.5 60.086h74v37.281h-74z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="1243.5" y="85.65">
    DFSP
  </text>
  <path fill="#ECECEC" stroke="#383838" d="M1030 139.367h487v68h-487z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="442" x="1034" y="155.434">
    DFSP is now satisfied that the Consent registered by the PISP is valid,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="1034" y="170.567">
    and now proceeds to register with the ALS:
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="471" x="1042" y="185.7">
    - `THIRD_PARTY_LINK` (optional - for routing of funds to a Third Party Link)
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1034" y="200.833">
    ALS
  </text>
  <path d="M537 216.898h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M537 216.898h752.5V524.89H537z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="552" y="229.965">
    loop
  </text>
  <text font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="629" y="229.109">
    [for each scope in
  </text>
  <text font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="749" y="229.109">
    Consents.scopes
  </text>
  <text font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="854" y="229.109">
    ]
  </text>
  <path stroke="#000" d="M757.5 316.695l-10 4 10 4-4-4zM751.5 320.695h521"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="763.5" y="285.364">
    CRED-16
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="432" x="830.5" y="255.098">
    POST /participants/THIRD_PARTY_LINK/dfsp.username.5678
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="846.5" y="270.231">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="846.5" y="285.364">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="862.5" y="300.497">
    fspId: &quot;dfspa&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="846.5" y="315.629">
    }
  </text>
  <path stroke="#000" d="M1261.5 345.828l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M746.5 349.828h521"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="753.5" y="344.762">
    CRED-17
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="820.5" y="344.762">
    202 Accepted
  </text>
  <path fill="#D3D3D3" stroke="#383838" d="M558 362.828h377v23H558z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="562" y="378.895">
    ALS registers a new entry in the THIRD_PARTY_LINK oracle
  </text>
  <path stroke="#000" d="M1261.5 483.758l10 4-10 4 4-4zM746.5 487.758h521"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="753.5" y="444.86">
    CRED-18
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="820.5" y="407.028">
    PUT /participants/THIRD_PARTY_LINK/dfsp.username.5678
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="836.5" y="422.161">
    FSIOP-Source: account-lookup-service
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="836.5" y="437.293">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="836.5" y="452.426">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="852.5" y="467.559">
    fspId: &quot;dfspa&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="836.5" y="482.692">
    }
  </text>
  <path stroke="#000" d="M757.5 512.89l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M751.5 516.891h521"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="763.5" y="511.825">
    CRED-19
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="830.5" y="511.825">
    200 OK
  </text>
  <path fill="#ECECEC" stroke="#383838" d="M1033 538.891h481v38h-481z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="1037" y="554.957">
    Now that the Credentials are verified and registered with the Auth Service,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="1037" y="570.09">
    the DFSP can update the PISP with the final status
  </text>
  <path stroke="#000" d="M560.5 720.352l-10 4 10 4-4-4zM554.5 724.352h718"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="566.5" y="658.754">
    CRED-20
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="633.5" y="598.223">
    PATCH /consents/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="649.5" y="613.356">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="649.5" y="628.489">
    FSPIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="649.5" y="643.622">
    Content-Type: application/merge-patch+json
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="649.5" y="658.754">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="665.5" y="673.887">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="681.5" y="689.02">
    status: &quot;VERIFIED&quot;, //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="665.5" y="704.153">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="649.5" y="719.286">
    }
  </text>
  <path stroke="#000" d="M560.5 749.484l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M554.5 753.484h718"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="566.5" y="748.418">
    CRED-21
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="633.5" y="748.418">
    200 OK
  </text>
  <path stroke="#000" d="M53.5 899.68l-10 4 10 4-4-4zM47.5 903.68h501"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="59.5" y="838.082">
    CRED-22
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="126.5" y="777.551">
    PATCH /consents/22222222-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="142.5" y="792.684">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="142.5" y="807.817">
    FSPIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="142.5" y="822.95">
    Content-Type: application/merge-patch+json
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142.5" y="838.082">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="158.5" y="853.215">
    credential: {
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="174.5" y="868.348">
    status: &quot;VERIFIED&quot;, //this is new!
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="158.5" y="883.481">
    }
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142.5" y="898.614">
    }
  </text>
  <path stroke="#000" d="M537.5 928.813l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M42.5 932.813h501"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="49.5" y="927.747">
    CRED-23
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="116.5" y="927.747">
    200 OK
  </text>
  <path d="M7.75 945.813v25h1295v-15l-10-10H7.75" fill="#ECECEC" stroke="#383838"/>
  <path d="M1292.75 945.813v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="934" x="184" y="962.879">
    Now we have a new identifier that the PISP can use to initiate transactions, a registered credential, and that credential is stored in the auth-service
  </text>
</svg>
