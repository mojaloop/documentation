<svg xmlns="http://www.w3.org/2000/svg" height="904" preserveAspectRatio="none" style="width:1462px;height:904px" width="1462">
  <text font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="371" x="542.25" y="28.708">
    Transfer: 1.2.3 Signed Authorization FIDO
  </text>
  <path fill="#DDD" stroke="#383838" d="M1 40.953h155v850.609H1z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="62" y="53.02">
    PISP
  </text>
  <path fill="#DDD" stroke="#383838" d="M654 40.953h97v850.609h-97z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="669" y="53.02">
    Mojaloop
  </text>
  <path fill="#DDD" stroke="#383838" d="M977.5 40.953h106v850.609h-106z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1003.5" y="53.02">
    DFSP A
  </text>
  <path stroke="#000" stroke-dasharray="5,5" d="M78 121.648v775.915M702 121.648v775.915M1030.5 121.648v775.915"/>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M5 83.367h147v37.281H5z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="12" y="108.932">
    PISP Server
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M658 83.367h89v37.281h-89z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="665" y="108.932">
    Switch
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M981.5 60.086h98v60.563h-98z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="989.5" y="85.65">
    DFSP A
  </text>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="988.5" y="108.932">
    (Payer)
  </text>
  <path fill="#EEE" stroke="#eee" d="M0 152.215h1455.5v3H0z"/>
  <path stroke="#000" d="M0 152.215h1455.5M0 155.215h1455.5"/>
  <path fill="#EEE" stroke="#000" stroke-width="2" d="M652.25 141.648h151v23.133h-151z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="658.25" y="157.715">
    Agreement Phase
  </text>
  <path d="M83 179.781v100h342v-90l-10-10H83" fill="#ECECEC" stroke="#383838"/>
  <path d="M415 179.781v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="89" y="196.848">
    PISP looks up the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="203" y="196.848">
    transactionRequestId
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="367" y="196.848">
    and
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="89" y="211.981">
    checks the terms with the user.
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="89" y="242.247">
    If the user agrees to the terms, the PISP
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="89" y="257.379">
    uses the FIDO API on the user&apos;s device to sign the
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="89" y="272.512">
    the
  </text>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="114" y="272.512">
    challenge
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="190" y="272.512">
    string
  </text>
  <path fill="#FFF" stroke="#383838" d="M83 290.578h608v310H83z"/>
  <text font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="600" x="87" y="306.645">
    PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="87" y="321.778">
    FSPIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="87" y="336.911">
    FSPIOP-Destination: dfspa
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="87" y="352.043">
    {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="95" y="367.176">
    &quot;responseType&quot;: &quot;ACCEPTED&quot;
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="95" y="382.309">
    &quot;signedPayload&quot;: {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="103" y="397.442">
    &quot;signedPayloadType&quot;: &quot;FIDO&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="103" y="412.575">
    &quot;fidoSignedPayload&quot;: {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="111" y="427.707">
    &quot;id&quot;: &quot;string&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="111" y="442.84">
    &quot;rawId&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="111" y="457.973">
    &quot;response&quot;: {
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="119" y="473.106">
    &quot;authenticatorData&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="119" y="488.239">
    &quot;clientDataJSON&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="119" y="503.372">
    &quot;signature&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="119" y="518.504">
    &quot;userHandle&quot;: &quot;string - base64 encoded utf-8&quot;,
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="111" y="533.637">
    },
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="111" y="548.77">
    &quot;type&quot;: &quot;public-key&quot;
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="103" y="563.903">
    }
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="95" y="579.036">
    }
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="87" y="594.168">
    }
  </text>
  <path stroke="#000" d="M690.5 623.367l10 4-10 4 4-4zM78.5 627.367h618"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="600" x="90.5" y="622.301">
    PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000
  </text>
  <path stroke="#000" d="M89.5 652.5l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M83.5 656.5h618"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="366.5" y="651.434">
    200 OK
  </text>
  <path stroke="#000" d="M1018.5 696.766l10 4-10 4 4-4zM702.5 700.766h322"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="714.5" y="680.567">
    PUT /thirdpartyRequests/authorizations
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="718.5" y="695.7">
    /33333333-0000-0000-0000-000000000000
  </text>
  <path stroke="#000" d="M713.5 725.898l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M707.5 729.898h322"/>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="842.5" y="724.832">
    200 OK
  </text>
  <path stroke="#000" d="M1030.5 759.031h42M1072.5 759.031v13M1031.5 772.031h41M1041.5 768.031l-10 4 10 4-4-4z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1037.5" y="753.965">
    Look up the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1116.5" y="753.965">
    transactionRequestId
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1280.5" y="753.965">
    for this
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1328.5" y="753.965">
    authorizationId
  </text>
  <path stroke="#000" d="M1030.5 801.164h42M1072.5 801.164v13M1031.5 814.164h41M1041.5 810.164l-10 4 10 4-4-4z"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1037.5" y="796.098">
    Look up the
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1116.5" y="796.098">
    consentId
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1192.5" y="796.098">
    for this
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1240.5" y="796.098">
    transactionRequestId
  </text>
  <path d="M875 827.164v55h310v-45l-10-10H875" fill="#ECECEC" stroke="#383838"/>
  <path d="M1175 827.164v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="881" y="844.231">
    DFSP has the signed challenge.
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="881" y="859.364">
    It now needs to ask the Auth-Service to verify
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="881" y="874.497">
    the signed challenge.
  </text>
</svg>
