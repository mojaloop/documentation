<svg xmlns="http://www.w3.org/2000/svg" height="1348" preserveAspectRatio="none" style="width:1434px;height:1348px" width="1434">
  <text font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="323" x="558.25" y="28.708">
    PISP Linking: Request consent (OTP)
  </text>
  <path fill="#DDD" stroke="#383838" d="M546 40.953h97v1294.914h-97z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="561" y="53.02">
    Mojaloop
  </text>
  <path fill="#F4F4F4" stroke="#f4f4f4" d="M32.5 108.367h10V171.5h-10z"/>
  <path stroke="#000" d="M32.5 108.367V171.5M42.5 108.367V171.5M32.5 108.367h10"/>
  <path fill="#F4F4F4" stroke="#f4f4f4" d="M32.5 199.5h10v262.125h-10z"/>
  <path stroke="#000" d="M32.5 199.5v262.125M42.5 199.5v262.125M32.5 461.625h10"/>
  <path fill="#F4F4F4" stroke="#000" d="M589.5 432.492h10V731.75h-10zM589.5 984.609h10v304.125h-10zM1146.5 702.617h10v311.125h-10z"/>
  <path stroke="#000" d="M37 98.367v10"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M37 108.367v28"/>
  <path stroke="#000" d="M37 136.367V171.5"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M37 171.5v28"/>
  <path stroke="#000" d="M37 199.5v1142.367M594 98.367v10"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M594 108.367v28"/>
  <path stroke="#000" d="M594 136.367V171.5"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M594 171.5v28"/>
  <path stroke="#000" d="M594 199.5v1142.367M1151.5 98.367v10"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1151.5 108.367v28"/>
  <path stroke="#000" d="M1151.5 136.367V171.5"/>
  <path stroke="#000" stroke-dasharray="1,4" d="M1151.5 171.5v28"/>
  <path stroke="#000" d="M1151.5 199.5v1142.367"/>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M5 60.086h65v37.281H5z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="12" y="85.65">
    PISP
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M550 60.086h89v37.281h-89z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="557" y="85.65">
    Switch
  </text>
  <path fill="#F4F4F4" stroke="#383838" stroke-width="1.5" d="M1114.5 60.086h74v37.281h-74z"/>
  <text font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="1121.5" y="85.65">
    DFSP
  </text>
  <path fill="#F4F4F4" stroke="#f4f4f4" d="M32.5 108.367h10V171.5h-10z"/>
  <path stroke="#000" d="M32.5 108.367V171.5M42.5 108.367V171.5M32.5 108.367h10"/>
  <path fill="#F4F4F4" stroke="#f4f4f4" d="M32.5 199.5h10v262.125h-10z"/>
  <path stroke="#000" d="M32.5 199.5v262.125M42.5 199.5v262.125M32.5 461.625h10"/>
  <path fill="#F4F4F4" stroke="#000" d="M589.5 432.492h10V731.75h-10zM589.5 984.609h10v304.125h-10zM1146.5 702.617h10v311.125h-10z"/>
  <path d="M5 141.367v25h1178v-15l-10-10H5" fill="#ECECEC" stroke="#383838"/>
  <path d="M1173 141.367v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="783" x="198.25" y="158.434">
    The user initiated some sort of account linking by choosing the appropriate DFSP from a screen inside the PISP application.
  </text>
  <path stroke="#000" d="M577.5 428.492l10 4-10 4 4-4zM42.5 432.492h541"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="49.5" y="321.497">
    REQ-1
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="97.5" y="215.567">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="121.5" y="230.7">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="121.5" y="245.833">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="97.5" y="260.965">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="121.5" y="276.098">
    consentRequestId: &quot;11111111-0000-0000-0000-000000000000&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="121.5" y="291.231">
    userId: &quot;username1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="121.5" y="306.364">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="137.5" y="321.497">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="153.5" y="336.629">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="137.5" y="351.762">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="153.5" y="366.895">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="121.5" y="382.028">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="121.5" y="397.161">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="121.5" y="412.293">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="409.5" y="412.293">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="105.5" y="427.426">
    }
  </text>
  <path stroke="#000" d="M48.5 457.625l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M42.5 461.625h546"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="54.5" y="456.559">
    REQ-2
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="102.5" y="456.559">
    202 Accepted
  </text>
  <path stroke="#000" d="M1134.5 698.617l10 4-10 4 4-4zM599.5 702.617h541"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="606.5" y="591.622">
    REQ-3
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="654.5" y="485.692">
    POST /consentRequests
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="678.5" y="500.825">
    FSIOP-Source: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="678.5" y="515.957">
    FSIOP-Destination: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="654.5" y="531.09">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="678.5" y="546.223">
    consentRequestId: &quot;11111111-0000-0000-0000-000000000000&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="678.5" y="561.356">
    userId: &quot;username1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="678.5" y="576.489">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="694.5" y="591.622">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="710.5" y="606.754">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="694.5" y="621.887">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="710.5" y="637.02">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="678.5" y="652.153">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="678.5" y="667.286">
    authChannels: [ &quot;Web&quot;, &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="678.5" y="682.418">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="966.5" y="682.418">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="662.5" y="697.551">
    }
  </text>
  <path stroke="#000" d="M605.5 727.75l-10 4 10 4-4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M599.5 731.75h546"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="611.5" y="726.684">
    REQ-4
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="659.5" y="726.684">
    202 Accepted
  </text>
  <path stroke="#000" d="M1156.5 760.883h42M1198.5 760.883v13M1157.5 773.883h41M1167.5 769.883l-10 4 10 4-4-4z"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1163.5" y="755.817">
    REQ-5
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="1211.5" y="755.817">
    Verify the consentRequest validity
  </text>
  <path stroke="#000" d="M610.5 980.61l-10 4 10 4-4-4zM604.5 984.609h541"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="616.5" y="888.747">
    REQ-6
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="664.5" y="797.95">
    PUT /consentRequests/11111111-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="688.5" y="813.082">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="688.5" y="828.215">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="672.5" y="843.348">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="688.5" y="858.481">
    authChannels: [ &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="688.5" y="873.614">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="704.5" y="888.747">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="720.5" y="903.879">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="704.5" y="919.012">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="720.5" y="934.145">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="688.5" y="949.278">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="688.5" y="964.411">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="976.5" y="964.411">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="672.5" y="979.543">
    }
  </text>
  <path stroke="#000" d="M1139.5 1009.742l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M599.5 1013.742h546"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="606.5" y="1008.676">
    REQ-7
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="654.5" y="1008.676">
    200 OK
  </text>
  <path d="M5 1026.742v25h1178v-15l-10-10H5" fill="#ECECEC" stroke="#383838"/>
  <path d="M1173 1026.742v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="414" x="382.75" y="1043.809">
    Here, the DFSP sends an OTP directly to the user (e.g., via SMS).
  </text>
  <path stroke="#000" d="M48.5 1255.602l-10 4 10 4-4-4zM42.5 1259.602h546"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="54.5" y="1163.739">
    REQ-8
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="102.5" y="1072.942">
    PUT /consentRequests/11111111-0000-0000-0000-000000000000
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="126.5" y="1088.075">
    FSIOP-Source: dfspa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="126.5" y="1103.207">
    FSIOP-Destination: pispa
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="102.5" y="1118.34">
    {
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="126.5" y="1133.473">
    authChannels: [ &quot;OTP&quot; ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="126.5" y="1148.606">
    scopes: [
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="142.5" y="1163.739">
    { accountId: &quot;dfsp.username.1234&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="158.5" y="1178.872">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="142.5" y="1194.004">
    { accountId: &quot;dfsp.username.5678&quot;,
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="158.5" y="1209.137">
    actions: [ &quot;ACCOUNTS_TRANSFER&quot; ] },
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="126.5" y="1224.27">
    ],
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="126.5" y="1239.403">
    callbackUri: &quot;pisp-app://callback...
  </text>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="414.5" y="1239.403">
    &quot;
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="110.5" y="1254.536">
    }
  </text>
  <path stroke="#000" d="M582.5 1284.734l10 4-10 4 4-4z"/>
  <path stroke="#000" stroke-dasharray="2,2" d="M37.5 1288.734h551"/>
  <text font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="44.5" y="1283.668">
    REQ-9
  </text>
  <text font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="92.5" y="1283.668">
    200 OK
  </text>
  <path d="M5 1301.734v25h1178v-15l-10-10H5" fill="#ECECEC" stroke="#383838"/>
  <path d="M1173 1301.734v10h10l-10-10" fill="#ECECEC" stroke="#383838"/>
  <text font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="800" x="189.75" y="1318.801">
    At this point, the PISP knows that the OTP authChannel is in use and the PISP App should prompt the user to provide the OTP.
  </text>
</svg>
