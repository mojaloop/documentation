<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="695px" preserveAspectRatio="none" style="width:1019px;height:695px;" version="1.1" viewBox="0 0 1019 695" width="1019px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wdt2dianh8vk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1wdt2dianh8vk)" height="550.25" style="stroke: #000000; stroke-width: 2.0;" width="995" x="10" y="71.1875"/><rect fill="#FFFFFF" filter="url(#f1wdt2dianh8vk)" height="217.9375" style="stroke: #000000; stroke-width: 2.0;" width="640" x="355" y="110.375"/><rect fill="#FFFFFF" filter="url(#f1wdt2dianh8vk)" height="217.9375" style="stroke: #000000; stroke-width: 2.0;" width="928" x="20" y="342.3125"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="405" x2="405" y1="54.1875" y2="638.4375"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="716.5" x2="716.5" y1="54.1875" y2="638.4375"/><rect fill="#F8F8F8" filter="url(#f1wdt2dianh8vk)" height="44.1875" style="stroke: #383838; stroke-width: 1.5;" width="76" x="365" y="5"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="62" x="372" y="36.9141">Client</text><rect fill="#F8F8F8" filter="url(#f1wdt2dianh8vk)" height="44.1875" style="stroke: #383838; stroke-width: 1.5;" width="76" x="365" y="637.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="62" x="372" y="669.3516">Client</text><rect fill="#F8F8F8" filter="url(#f1wdt2dianh8vk)" height="44.1875" style="stroke: #383838; stroke-width: 1.5;" width="83" x="673.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="69" x="680.5" y="36.9141">Server</text><rect fill="#F8F8F8" filter="url(#f1wdt2dianh8vk)" height="44.1875" style="stroke: #383838; stroke-width: 1.5;" width="83" x="673.5" y="637.4375"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="69" x="680.5" y="669.3516">Server</text><path d="M10,71.1875 L241,71.1875 L241,93.1875 L231,103.1875 L10,103.1875 L10,71.1875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="550.25" style="stroke: #000000; stroke-width: 2.0;" width="995" x="10" y="71.1875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="25" y="97.1016">TLS session init</text><path d="M355,110.375 L709,110.375 L709,132.375 L699,142.375 L355,142.375 L355,110.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="217.9375" style="stroke: #000000; stroke-width: 2.0;" width="640" x="355" y="110.375"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="309" x="370" y="136.2891">Server certificate exchange</text><polygon fill="#383838" points="705,174.75,715,178.75,705,182.75,709,178.75" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="405" x2="711" y1="178.75" y2="178.75"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13" x="412" y="171.4766">1</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="271" x="429" y="171.4766">Request server certificate</text><polygon fill="#383838" points="416,239.0313,406,243.0313,416,247.0313,412,243.0313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="410" x2="716" y1="243.0313" y2="243.0313"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13" x="422" y="235.7578">2</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="178" x="439" y="235.7578">Server certificate</text><path d="M722,191.75 L722,261.75 L976,261.75 L976,201.75 L966,191.75 L722,191.75 " fill="#ECECEC" filter="url(#f1wdt2dianh8vk)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M966,191.75 L966,201.75 L976,201.75 L966,191.75 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="178" x="728" y="221.6641">Server certificate</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="233" x="728" y="251.8516">signed by server's CA</text><line style="stroke: #383838; stroke-width: 1.0;" x1="405" x2="447" y1="307.3125" y2="307.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="447" x2="447" y1="307.3125" y2="320.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="406" x2="447" y1="320.3125" y2="320.3125"/><polygon fill="#383838" points="416,316.3125,406,320.3125,416,324.3125,412,320.3125" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13" x="412" y="300.0391">3</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="195" x="429" y="300.0391">Validate certificate</text><path d="M20,342.3125 L368,342.3125 L368,364.3125 L358,374.3125 L20,374.3125 L20,342.3125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="217.9375" style="stroke: #000000; stroke-width: 2.0;" width="928" x="20" y="342.3125"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="303" x="35" y="368.2266">Client certificate exchange</text><polygon fill="#383838" points="416,406.6875,406,410.6875,416,414.6875,412,410.6875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="410" x2="716" y1="410.6875" y2="410.6875"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13" x="422" y="403.4141">4</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="263" x="439" y="403.4141">Request client certificate</text><polygon fill="#383838" points="705,470.9688,715,474.9688,705,478.9688,709,474.9688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="405" x2="711" y1="474.9688" y2="474.9688"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13" x="412" y="467.6953">5</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="171" x="429" y="467.6953">Client certificate</text><path d="M30,423.6875 L30,493.6875 L396,493.6875 L396,433.6875 L386,423.6875 L30,423.6875 " fill="#ECECEC" filter="url(#f1wdt2dianh8vk)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M386,423.6875 L386,433.6875 L396,433.6875 L386,423.6875 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="345" x="36" y="453.6016">Client certificate issued by client</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="281" x="36" y="483.7891">and signed by server's CA</text><line style="stroke: #383838; stroke-width: 1.0;" x1="717" x2="759" y1="539.25" y2="539.25"/><line style="stroke: #383838; stroke-width: 1.0;" x1="759" x2="759" y1="539.25" y2="552.25"/><line style="stroke: #383838; stroke-width: 1.0;" x1="718" x2="759" y1="552.25" y2="552.25"/><polygon fill="#383838" points="728,548.25,718,552.25,728,556.25,724,552.25" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13" x="724" y="531.9766">6</text><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="195" x="741" y="531.9766">Validate certificate</text><path d="M365,572.25 L365,612.25 L755,612.25 L755,582.25 L745,572.25 L365,572.25 " fill="#ECECEC" filter="url(#f1wdt2dianh8vk)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M745,572.25 L745,582.25 L755,582.25 L745,572.25 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="221" x="443.25" y="602.1641">TLS session initiated</text><!--MD5=[3a48dc253360cf96a1a430f2ff3f5746]
@startuml
skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 24
skinparam defaultFontSize 24
skinparam noteFontSize 24
skinparam monochrome true

participant "Client" as DFSPgw
participant "Server" as Hubgw

autonumber

group TLS session init

    group Server certificate exchange
    
        DFSPgw -> Hubgw: Request server certificate
        Hubgw -> DFSPgw: Server certificate
        note right: Server certificate\nsigned by server's CA
        DFSPgw -> DFSPgw: Validate certificate
    
    end
    
    group Client certificate exchange
    
        Hubgw -> DFSPgw: Request client certificate
        DFSPgw -> Hubgw: Client certificate
        note left: Client certificate issued by client\nand signed by server's CA
        Hubgw -> Hubgw: Validate certificate
        
    end
    
    note over DFSPgw, Hubgw: TLS session initiated
end

@enduml

PlantUML version 1.2020.18(Wed Sep 30 21:40:44 CEST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1250
Language: en
Country: US
--></g></svg>