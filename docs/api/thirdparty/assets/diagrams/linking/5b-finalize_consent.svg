<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="997px" preserveAspectRatio="none" style="width:1523px;height:997px" version="1.1" viewBox="0 0 1523 997" width="1523px" zoomAndPan="magnify">
  <defs/>
  <g>
    <rect fill="#DDDDDD" height="950.9922" style="stroke:#383838;stroke-width:1.0" width="392" x="501" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="663.5" y="53.02">Mojaloop</text>
    <text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="439" x="544" y="28.708">PISP Linking: Credential registration (verification)</text>
    <rect fill="#FFFFFF" height="307.9922" style="stroke:#000000;stroke-width:2.0" width="752.5" x="537" y="216.8984"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="37.5" x2="37.5" y1="98.3672" y2="106.3672"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0" x1="37.5" x2="37.5" y1="106.3672" y2="134.3672"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="37.5" x2="37.5" y1="134.3672" y2="985.9453"/>
    <rect fill="#F4F4F4" height="82.2656" style="stroke:#000000;stroke-width:1.0" width="10" x="32.5" y="903.6797"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="549.5" x2="549.5" y1="98.3672" y2="106.3672"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0" x1="549.5" x2="549.5" y1="106.3672" y2="134.3672"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="549.5" x2="549.5" y1="134.3672" y2="985.9453"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="746.5" x2="746.5" y1="98.3672" y2="106.3672"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0" x1="746.5" x2="746.5" y1="106.3672" y2="134.3672"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="746.5" x2="746.5" y1="134.3672" y2="985.9453"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1273.5" x2="1273.5" y1="98.3672" y2="106.3672"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0" x1="1273.5" x2="1273.5" y1="106.3672" y2="134.3672"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1273.5" x2="1273.5" y1="134.3672" y2="985.9453"/>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="65" x="5" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="12" y="85.6504">PISP</text>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="89" x="505" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="512" y="85.6504">Switch</text>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="285" x="604" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271" x="611" y="85.6504">Account Lookup Service</text>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="74" x="1236.5" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="1243.5" y="85.6504">DFSP</text>
    <rect fill="#ECECEC" height="68" style="stroke:#383838;stroke-width:1.0" width="487" x="1030" y="139.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="442" x="1034" y="155.4341">DFSP is now satisfied that the Consent registered by the PISP is valid,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="1034" y="170.5669">and now proceeds to register with the ALS:</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="471" x="1042" y="185.6997">- `THIRD_PARTY_LINK` (optional - for routing of funds to a Third Party Link)</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1034" y="200.8325">ALS</text>
    <path d="M537,216.8984 L614,216.8984 L614,223.8984 L604,233.8984 L537,233.8984 L537,216.8984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="307.9922" style="stroke:#000000;stroke-width:2.0" width="752.5" x="537" y="216.8984"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="552" y="229.9653">loop</text>
    <text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="629" y="229.1089">[for each scope in</text>
    <text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="749" y="229.1089">Consents.scopes</text>
    <text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="854" y="229.1089">]</text>
    <polygon fill="#000000" points="757.5,316.6953,747.5,320.6953,757.5,324.6953,753.5,320.6953" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="751.5" x2="1272.5" y1="320.6953" y2="320.6953"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="763.5" y="285.3638">CRED-16</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="432" x="830.5" y="255.0981">POST /participants/THIRD_PARTY_LINK/dfsp.username.5678</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1266.5" y="255.0981"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="846.5" y="270.231">FSIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="846.5" y="285.3638">{</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="862.5" y="300.4966">fspId: &quot;dfspa&quot;,</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="846.5" y="315.6294">}</text>
    <polygon fill="#000000" points="1261.5,345.8281,1271.5,349.8281,1261.5,353.8281,1265.5,349.8281" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="746.5" x2="1267.5" y1="349.8281" y2="349.8281"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="753.5" y="344.7622">CRED-17</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="820.5" y="344.7622">202 Accepted</text>
    <rect fill="#D3D3D3" height="23" style="stroke:#383838;stroke-width:1.0" width="377" x="558" y="362.8281"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="562" y="378.895">ALS registers a new entry in the THIRD_PARTY_LINK oracle</text>
    <polygon fill="#000000" points="1261.5,483.7578,1271.5,487.7578,1261.5,491.7578,1265.5,487.7578" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="746.5" x2="1267.5" y1="487.7578" y2="487.7578"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="753.5" y="444.8599">CRED-18</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="820.5" y="407.0278">PUT /participants/THIRD_PARTY_LINK/dfsp.username.5678</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1248.5" y="407.0278"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="836.5" y="422.1606">FSIOP-Source: account-lookup-service</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="836.5" y="437.2935">FSIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="836.5" y="452.4263">{</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="852.5" y="467.5591">fspId: &quot;dfspa&quot;,</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="836.5" y="482.6919">}</text>
    <polygon fill="#000000" points="757.5,512.8906,747.5,516.8906,757.5,520.8906,753.5,516.8906" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="751.5" x2="1272.5" y1="516.8906" y2="516.8906"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="763.5" y="511.8247">CRED-19</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="830.5" y="511.8247">200 OK</text>
    <rect fill="#ECECEC" height="38" style="stroke:#383838;stroke-width:1.0" width="481" x="1033" y="538.8906"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="1037" y="554.9575">Now that the Credentials are verified and registered with the Auth Service,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="1037" y="570.0903">the DFSP can update the PISP with the final status</text>
    <polygon fill="#000000" points="560.5,720.3516,550.5,724.3516,560.5,728.3516,556.5,724.3516" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="554.5" x2="1272.5" y1="724.3516" y2="724.3516"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="566.5" y="658.7544">CRED-20</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="633.5" y="598.2231">PATCH /consents/22222222-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="649.5" y="613.356">FSIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="649.5" y="628.4888">FSPIOP-Destination: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="649.5" y="643.6216">Content-Type: application/merge-patch+json</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="649.5" y="658.7544">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="649.5" y="673.8872"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="665.5" y="673.8872">credential: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="649.5" y="689.02"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="681.5" y="689.02"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="681.5" y="689.02">status: &quot;VERIFIED&quot;, //this is new!</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="649.5" y="704.1528"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="665.5" y="704.1528">}</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="649.5" y="719.2856">}</text>
    <polygon fill="#000000" points="560.5,749.4844,550.5,753.4844,560.5,757.4844,556.5,753.4844" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="554.5" x2="1272.5" y1="753.4844" y2="753.4844"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="566.5" y="748.4185">CRED-21</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="633.5" y="748.4185">200 OK</text>
    <polygon fill="#000000" points="53.5,899.6797,43.5,903.6797,53.5,907.6797,49.5,903.6797" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="47.5" x2="548.5" y1="903.6797" y2="903.6797"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="59.5" y="838.0825">CRED-22</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="126.5" y="777.5513">PATCH /consents/22222222-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="142.5" y="792.6841">FSIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="142.5" y="807.8169">FSPIOP-Destination: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="142.5" y="822.9497">Content-Type: application/merge-patch+json</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142.5" y="838.0825">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="142.5" y="853.2153"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="158.5" y="853.2153">credential: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="142.5" y="868.3481"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="174.5" y="868.3481"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="272" x="174.5" y="868.3481">status: &quot;VERIFIED&quot;, //this is new!</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="142.5" y="883.481"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="158.5" y="883.481">}</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="142.5" y="898.6138">}</text>
    <polygon fill="#000000" points="537.5,928.8125,547.5,932.8125,537.5,936.8125,541.5,932.8125" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="42.5" x2="543.5" y1="932.8125" y2="932.8125"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="49.5" y="927.7466">CRED-23</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="116.5" y="927.7466">200 OK</text>
    <path d="M7.75,945.8125 L7.75,970.8125 L1302.75,970.8125 L1302.75,955.8125 L1292.75,945.8125 L7.75,945.8125 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <path d="M1292.75,945.8125 L1292.75,955.8125 L1302.75,955.8125 L1292.75,945.8125 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="934" x="184" y="962.8794">Now we have a new identifier that the PISP can use to initiate transactions, a registered credential, and that credential is stored in the auth-service</text>
  </g>
</svg>
