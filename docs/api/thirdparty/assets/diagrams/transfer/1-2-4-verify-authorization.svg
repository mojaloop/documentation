<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1090px" preserveAspectRatio="none" style="width:1159px;height:1090px" version="1.1" viewBox="0 0 1159 1090" width="1159px" zoomAndPan="magnify">
  <defs/>
  <g>
    <text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="314" x="422.75" y="28.708">Transfer: 1.2.4 Verify Authorization</text>
    <rect fill="#DDDDDD" height="1036.5391" style="stroke:#383838;stroke-width:1.0" width="484" x="1" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="209.5" y="53.02">Mojaloop</text>
    <rect fill="#DDDDDD" height="1036.5391" style="stroke:#383838;stroke-width:1.0" width="106" x="718.5" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="744.5" y="53.02">DFSP A</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="49" x2="49" y1="121.6484" y2="1083.4922"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="401" x2="401" y1="121.6484" y2="1083.4922"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="771.5" x2="771.5" y1="121.6484" y2="1083.4922"/>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="89" x="5" y="83.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="12" y="108.9316">Switch</text>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="159" x="322" y="83.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="329" y="108.9316">Auth-Service</text>
    <rect fill="#F4F4F4" height="60.5625" style="stroke:#383838;stroke-width:1.5" width="98" x="722.5" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="730.5" y="85.6504">DFSP A</text>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="729.5" y="108.9316">(Payer)</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="771.5" x2="813.5" y1="167.9141" y2="167.9141"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="813.5" x2="813.5" y1="167.9141" y2="180.9141"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="772.5" x2="813.5" y1="180.9141" y2="180.9141"/>
    <polygon fill="#000000" points="782.5,176.9141,772.5,180.9141,782.5,184.9141,778.5,180.9141" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="778.5" y="147.7153">Generate a new</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="883.5" y="147.7153">verificationRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1051.5" y="147.7153">, and associate</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="782.5" y="162.8481">it with the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="848.5" y="162.8481">thirdpartyTransactionRequestId</text>
    <rect fill="#FFFFFF" height="310" style="stroke:#383838;stroke-width:1.0" width="475" x="291" y="193.9141"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="304" x="295" y="209.981">POST /thirdpartyRequests/verifications</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="295" y="225.1138">FSPIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="295" y="240.2466">FSPIOP-Destination: central-auth</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="295" y="255.3794">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="303" y="270.5122">&quot;verificationRequestId&quot;: &quot;44444444-0000-0000-0000-000000000000&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="303" y="285.645">&quot;challenge&quot;:</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="382" y="285.645">&lt;base64 encoded binary - the encoded challenge&gt;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="758" y="285.645">,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="303" y="300.7778">&quot;consentId&quot;: &quot;123&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="303" y="315.9106">&quot;signedPayloadType&quot;: &quot;FIDO&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="303" y="331.0435">&quot;fidoValue&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="311" y="346.1763">&quot;id&quot;: &quot;string&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="311" y="361.3091">&quot;rawId&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="311" y="376.4419">&quot;response&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="319" y="391.5747">&quot;authenticatorData&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="319" y="406.7075">&quot;clientDataJSON&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="319" y="421.8403">&quot;signature&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="319" y="436.9731">&quot;userHandle&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="311" y="452.106">},</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="311" y="467.2388">&quot;type&quot;: &quot;public-key&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="303" y="482.3716">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="295" y="497.5044">}</text>
    <polygon fill="#000000" points="60.5,526.7031,50.5,530.7031,60.5,534.7031,56.5,530.7031" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="54.5" x2="770.5" y1="530.7031" y2="530.7031"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="258.5" y="525.6372">POST /thirdpartyRequests/verifications</text>
    <polygon fill="#000000" points="759.5,555.8359,769.5,559.8359,759.5,563.8359,763.5,559.8359" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="49.5" x2="765.5" y1="559.8359" y2="559.8359"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="362.5" y="554.77">202 Accepted</text>
    <polygon fill="#000000" points="389.5,584.9688,399.5,588.9688,389.5,592.9688,393.5,588.9688" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="49.5" x2="395.5" y1="588.9688" y2="588.9688"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="73.5" y="583.9028">POST /thirdpartyRequests/verifications</text>
    <polygon fill="#000000" points="60.5,614.1016,50.5,618.1016,60.5,622.1016,56.5,618.1016" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="54.5" x2="400.5" y1="618.1016" y2="618.1016"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="177.5" y="613.0356">202 Accepted</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="401.5" x2="443.5" y1="647.2344" y2="647.2344"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="443.5" x2="443.5" y1="647.2344" y2="660.2344"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="402.5" x2="443.5" y1="660.2344" y2="660.2344"/>
    <polygon fill="#000000" points="412.5,656.2344,402.5,660.2344,412.5,664.2344,408.5,660.2344" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="408.5" y="642.1685">Lookup this consent based on consentId</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="401.5" x2="443.5" y1="689.3672" y2="689.3672"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="443.5" x2="443.5" y1="689.3672" y2="702.3672"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="402.5" x2="443.5" y1="702.3672" y2="702.3672"/>
    <polygon fill="#000000" points="412.5,698.3672,402.5,702.3672,412.5,706.3672,408.5,702.3672" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="408.5" y="684.3013">Ensure the accountAddress matches what is in Consent</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="401.5" x2="443.5" y1="746.6328" y2="746.6328"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="443.5" x2="443.5" y1="746.6328" y2="759.6328"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="402.5" x2="443.5" y1="759.6328" y2="759.6328"/>
    <polygon fill="#000000" points="412.5,755.6328,402.5,759.6328,412.5,763.6328,408.5,759.6328" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="408.5" y="726.4341">Check that the signed bytes match the</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="408.5" y="741.5669">publickey we have stored for the consent</text>
    <rect fill="#FFFFFF" height="98" style="stroke:#383838;stroke-width:1.0" width="600" x="406" y="772.6328"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="592" x="410" y="788.6997">PUT /thirdpartyRequests/verifications/44444444-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="410" y="803.8325">FSPIOP-Source: central-auth</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="410" y="818.9653">FSPIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="410" y="834.0981">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="418" y="849.231">&quot;authenticationResponse&quot;: &quot;VERIFIED&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="410" y="864.3638">}</text>
    <polygon fill="#000000" points="60.5,908.6953,50.5,912.6953,60.5,916.6953,56.5,912.6953" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="54.5" x2="400.5" y1="912.6953" y2="912.6953"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="77.5" y="892.4966">PUT /thirdpartyRequests/verifications</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="93.5" y="907.6294">/44444444-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="389.5,937.8281,399.5,941.8281,389.5,945.8281,393.5,941.8281" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="49.5" x2="395.5" y1="941.8281" y2="941.8281"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="201.5" y="936.7622">200 OK</text>
    <polygon fill="#000000" points="759.5,982.0938,769.5,986.0938,759.5,990.0938,763.5,986.0938" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="49.5" x2="765.5" y1="986.0938" y2="986.0938"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="262.5" y="965.895">PUT /thirdpartyRequests/verifications</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="278.5" y="981.0278">/44444444-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="60.5,1011.2266,50.5,1015.2266,60.5,1019.2266,56.5,1015.2266" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="54.5" x2="770.5" y1="1015.2266" y2="1015.2266"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="386.5" y="1010.1606">200 OK</text>
    <path d="M585,1028.2266 L585,1068.2266 L957,1068.2266 L957,1038.2266 L947,1028.2266 L585,1028.2266 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <path d="M947,1028.2266 L947,1038.2266 L957,1038.2266 L947,1028.2266 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="351" x="591" y="1045.2935">DFSPA now knows that the user signed this transaction</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="591" y="1060.4263">and can go ahead and initiate the transfer</text>
  </g>
</svg>
