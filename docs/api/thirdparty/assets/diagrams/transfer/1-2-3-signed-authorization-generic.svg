<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="738px" preserveAspectRatio="none" style="width:1462px;height:738px" version="1.1" viewBox="0 0 1462 738" width="1462px" zoomAndPan="magnify">
  <defs/>
  <g>
    <text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="321" x="567.25" y="28.708">Transfer: 1.2.3 Signed Authorization</text>
    <rect fill="#DDDDDD" height="684.1484" style="stroke:#383838;stroke-width:1.0" width="155" x="1" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="62" y="53.02">PISP</text>
    <rect fill="#DDDDDD" height="684.1484" style="stroke:#383838;stroke-width:1.0" width="97" x="654" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="669" y="53.02">Mojaloop</text>
    <rect fill="#DDDDDD" height="684.1484" style="stroke:#383838;stroke-width:1.0" width="106" x="977.5" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1003.5" y="53.02">DFSP A</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="78" x2="78" y1="121.6484" y2="731.1016"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="702" x2="702" y1="121.6484" y2="731.1016"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="1030.5" x2="1030.5" y1="121.6484" y2="731.1016"/>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="147" x="5" y="83.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="12" y="108.9316">PISP Server</text>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="89" x="658" y="83.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="665" y="108.9316">Switch</text>
    <rect fill="#F4F4F4" height="60.5625" style="stroke:#383838;stroke-width:1.5" width="98" x="981.5" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="989.5" y="85.6504">DFSP A</text>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="988.5" y="108.9316">(Payer)</text>
    <rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0" width="1455.5" x="0" y="152.2148"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="0" x2="1455.5" y1="152.2148" y2="152.2148"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="0" x2="1455.5" y1="155.2148" y2="155.2148"/>
    <rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0" width="151" x="652.25" y="141.6484"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="658.25" y="157.7153">Agreement Phase</text>
    <path d="M83,179.7813 L83,264.7813 L412,264.7813 L412,189.7813 L402,179.7813 L83,179.7813 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <path d="M402,179.7813 L402,189.7813 L412,189.7813 L402,179.7813 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="89" y="196.8481">PISP looks up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="203" y="196.8481">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="367" y="196.8481">and</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="89" y="211.981">checks the quote with the user.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="93" y="227.1138"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="89" y="242.2466">If the user agrees to the terms, the PISP uses</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="89" y="257.3794">the Credential&apos;s privateKey to sign the challenge</text>
    <rect fill="#FFFFFF" height="159" style="stroke:#383838;stroke-width:1.0" width="608" x="83" y="275.4453"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="600" x="87" y="291.5122">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="87" y="306.645">FSPIOP-Source: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="87" y="321.7778">FSPIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="87" y="336.9106">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="95" y="352.0435">&quot;responseType&quot;: &quot;ACCEPTED&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="95" y="367.1763">&quot;signedPayload&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="103" y="382.3091">&quot;signedPayloadType&quot;: &quot;GENERIC&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="373" x="103" y="397.4419">&quot;genericSignedPayload&quot;: &quot;utf-8 base64 encoded signature&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="95" y="412.5747">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="87" y="427.7075">}</text>
    <polygon fill="#000000" points="690.5,456.9063,700.5,460.9063,690.5,464.9063,694.5,460.9063" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="78.5" x2="696.5" y1="460.9063" y2="460.9063"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="600" x="90.5" y="455.8403">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="89.5,486.0391,79.5,490.0391,89.5,494.0391,85.5,490.0391" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="83.5" x2="701.5" y1="490.0391" y2="490.0391"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="366.5" y="484.9731">200 OK</text>
    <polygon fill="#000000" points="1018.5,530.3047,1028.5,534.3047,1018.5,538.3047,1022.5,534.3047" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="702.5" x2="1024.5" y1="534.3047" y2="534.3047"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="714.5" y="514.106">PUT /thirdpartyRequests/authorizations</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="718.5" y="529.2388">/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="713.5,559.4375,703.5,563.4375,713.5,567.4375,709.5,563.4375" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="707.5" x2="1029.5" y1="563.4375" y2="563.4375"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="842.5" y="558.3716">200 OK</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="1030.5" x2="1072.5" y1="592.5703" y2="592.5703"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1072.5" x2="1072.5" y1="592.5703" y2="605.5703"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1031.5" x2="1072.5" y1="605.5703" y2="605.5703"/>
    <polygon fill="#000000" points="1041.5,601.5703,1031.5,605.5703,1041.5,609.5703,1037.5,605.5703" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1037.5" y="587.5044">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1116.5" y="587.5044">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1280.5" y="587.5044">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1328.5" y="587.5044">authorizationId</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="1030.5" x2="1072.5" y1="634.7031" y2="634.7031"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1072.5" x2="1072.5" y1="634.7031" y2="647.7031"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1031.5" x2="1072.5" y1="647.7031" y2="647.7031"/>
    <polygon fill="#000000" points="1041.5,643.7031,1031.5,647.7031,1041.5,651.7031,1037.5,647.7031" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1037.5" y="629.6372">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1116.5" y="629.6372">consentId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1192.5" y="629.6372">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1240.5" y="629.6372">transactionRequestId</text>
    <path d="M875,660.7031 L875,715.7031 L1185,715.7031 L1185,670.7031 L1175,660.7031 L875,660.7031 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <path d="M1175,660.7031 L1175,670.7031 L1185,670.7031 L1175,660.7031 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="881" y="677.77">DFSP has the signed challenge.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="881" y="692.9028">It now needs to ask the Auth-Service to verify</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="881" y="708.0356">the signed challenge.</text>
  </g>
</svg>
