<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="904px" preserveAspectRatio="none" style="width:1462px;height:904px" version="1.1" viewBox="0 0 1462 904" width="1462px" zoomAndPan="magnify">
  <defs/>
  <g>
    <text fill="#000000" font-family="Verdana" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="371" x="542.25" y="28.708">Transfer: 1.2.3 Signed Authorization FIDO</text>
    <rect fill="#DDDDDD" height="850.6094" style="stroke:#383838;stroke-width:1.0" width="155" x="1" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="62" y="53.02">PISP</text>
    <rect fill="#DDDDDD" height="850.6094" style="stroke:#383838;stroke-width:1.0" width="97" x="654" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="669" y="53.02">Mojaloop</text>
    <rect fill="#DDDDDD" height="850.6094" style="stroke:#383838;stroke-width:1.0" width="106" x="977.5" y="40.9531"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="1003.5" y="53.02">DFSP A</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="78" x2="78" y1="121.6484" y2="897.5625"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="702" x2="702" y1="121.6484" y2="897.5625"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="1030.5" x2="1030.5" y1="121.6484" y2="897.5625"/>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="147" x="5" y="83.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="12" y="108.9316">PISP Server</text>
    <rect fill="#F4F4F4" height="37.2813" style="stroke:#383838;stroke-width:1.5" width="89" x="658" y="83.3672"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="665" y="108.9316">Switch</text>
    <rect fill="#F4F4F4" height="60.5625" style="stroke:#383838;stroke-width:1.5" width="98" x="981.5" y="60.0859"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="989.5" y="85.6504">DFSP A</text>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="988.5" y="108.9316">(Payer)</text>
    <rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0" width="1455.5" x="0" y="152.2148"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="0" x2="1455.5" y1="152.2148" y2="152.2148"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="0" x2="1455.5" y1="155.2148" y2="155.2148"/>
    <rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0" width="151" x="652.25" y="141.6484"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="658.25" y="157.7153">Agreement Phase</text>
    <path d="M83,179.7813 L83,279.7813 L425,279.7813 L425,189.7813 L415,179.7813 L83,179.7813 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <path d="M415,179.7813 L415,189.7813 L425,189.7813 L415,179.7813 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="89" y="196.8481">PISP looks up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="203" y="196.8481">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="367" y="196.8481">and</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="89" y="211.981">checks the terms with the user.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="93" y="227.1138"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="89" y="242.2466">If the user agrees to the terms, the PISP</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="89" y="257.3794">uses the FIDO API on the user&apos;s device to sign the</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="89" y="272.5122">the</text>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="114" y="272.5122">challenge</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="190" y="272.5122">string</text>
    <rect fill="#FFFFFF" height="310" style="stroke:#383838;stroke-width:1.0" width="608" x="83" y="290.5781"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="600" x="87" y="306.645">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="87" y="321.7778">FSPIOP-Source: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="87" y="336.9106">FSPIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="87" y="352.0435">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="95" y="367.1763">&quot;responseType&quot;: &quot;ACCEPTED&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="95" y="382.3091">&quot;signedPayload&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="103" y="397.4419">&quot;signedPayloadType&quot;: &quot;FIDO&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="103" y="412.5747">&quot;fidoSignedPayload&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="111" y="427.7075">&quot;id&quot;: &quot;string&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="111" y="442.8403">&quot;rawId&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="111" y="457.9731">&quot;response&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="119" y="473.106">&quot;authenticatorData&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="119" y="488.2388">&quot;clientDataJSON&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="119" y="503.3716">&quot;signature&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="119" y="518.5044">&quot;userHandle&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="111" y="533.6372">},</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="111" y="548.77">&quot;type&quot;: &quot;public-key&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="103" y="563.9028">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="95" y="579.0356">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="87" y="594.1685">}</text>
    <polygon fill="#000000" points="690.5,623.3672,700.5,627.3672,690.5,631.3672,694.5,627.3672" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="78.5" x2="696.5" y1="627.3672" y2="627.3672"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="600" x="90.5" y="622.3013">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="89.5,652.5,79.5,656.5,89.5,660.5,85.5,656.5" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="83.5" x2="701.5" y1="656.5" y2="656.5"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="366.5" y="651.4341">200 OK</text>
    <polygon fill="#000000" points="1018.5,696.7656,1028.5,700.7656,1018.5,704.7656,1022.5,700.7656" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="702.5" x2="1024.5" y1="700.7656" y2="700.7656"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="714.5" y="680.5669">PUT /thirdpartyRequests/authorizations</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="718.5" y="695.6997">/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="713.5,725.8984,703.5,729.8984,713.5,733.8984,709.5,729.8984" style="stroke:#000000;stroke-width:1.0"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="707.5" x2="1029.5" y1="729.8984" y2="729.8984"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="842.5" y="724.8325">200 OK</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="1030.5" x2="1072.5" y1="759.0313" y2="759.0313"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1072.5" x2="1072.5" y1="759.0313" y2="772.0313"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1031.5" x2="1072.5" y1="772.0313" y2="772.0313"/>
    <polygon fill="#000000" points="1041.5,768.0313,1031.5,772.0313,1041.5,776.0313,1037.5,772.0313" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1037.5" y="753.9653">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1116.5" y="753.9653">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1280.5" y="753.9653">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="1328.5" y="753.9653">authorizationId</text>
    <line style="stroke:#000000;stroke-width:1.0" x1="1030.5" x2="1072.5" y1="801.1641" y2="801.1641"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1072.5" x2="1072.5" y1="801.1641" y2="814.1641"/>
    <line style="stroke:#000000;stroke-width:1.0" x1="1031.5" x2="1072.5" y1="814.1641" y2="814.1641"/>
    <polygon fill="#000000" points="1041.5,810.1641,1031.5,814.1641,1041.5,818.1641,1037.5,814.1641" style="stroke:#000000;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="1037.5" y="796.0981">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1116.5" y="796.0981">consentId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="1192.5" y="796.0981">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1240.5" y="796.0981">transactionRequestId</text>
    <path d="M875,827.1641 L875,882.1641 L1185,882.1641 L1185,837.1641 L1175,827.1641 L875,827.1641 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <path d="M1175,827.1641 L1175,837.1641 L1185,837.1641 L1175,827.1641 " fill="#ECECEC" style="stroke:#383838;stroke-width:1.0"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="881" y="844.231">DFSP has the signed challenge.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="881" y="859.3638">It now needs to ask the Auth-Service to verify</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="881" y="874.4966">the signed challenge.</text>
  </g>
</svg>
