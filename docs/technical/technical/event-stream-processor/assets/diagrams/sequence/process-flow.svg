<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4247px" preserveAspectRatio="none" style="width:3651px;height:4247px" version="1.1" viewBox="0 0 3651 4247" width="3651px" zoomAndPan="magnify">
  <defs>
    <filter height="300%" id="ft8cikx8585u0" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
      <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
    </filter>
  </defs>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="283" x="1682.25" y="28.708">Event Streaming Processor flow</text>
    <rect fill="#D3D3D3" height="4200.4375" style="stroke:#A80036;stroke-width:1.0" width="144" x="19" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="31.5" y="53.02">Central Services</text>
    <rect fill="#ADD8E6" height="4200.4375" style="stroke:#A80036;stroke-width:1.0" width="2884" x="223" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="1576.5" y="53.02">Event Stream Processor</text>
    <rect fill="#B0C4DE" height="4200.4375" style="stroke:#A80036;stroke-width:1.0" width="116" x="3324.5" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="3360" y="53.02">Cache</text>
    <rect fill="#FFFFE0" height="4200.4375" style="stroke:#A80036;stroke-width:1.0" width="189" x="3442.5" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="3488.5" y="53.02">Elasticsearch</text>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="86" y="177.6484"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="820.2422" style="stroke:#A80036;stroke-width:1.0" width="10" x="285" y="177.6484"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="83.5313" style="stroke:#A80036;stroke-width:1.0" width="10" x="564" y="997.8906"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="1613.9609" style="stroke:#A80036;stroke-width:1.0" width="10" x="791" y="1081.4219"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="767.1875" style="stroke:#A80036;stroke-width:1.0" width="10" x="1535" y="2695.3828"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="475.7266" style="stroke:#A80036;stroke-width:1.0" width="10" x="2075" y="3462.5703"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="228.7969" style="stroke:#A80036;stroke-width:1.0" width="10" x="2654" y="3938.2969"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="4019.7109" style="stroke:#000000;stroke-width:2.0" width="3628.5" x="9" y="139.3828"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="1690.4922" style="stroke:#000000;stroke-width:2.0" width="3026" x="489.5" y="1012.8906"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="1245.3047" style="stroke:#000000;stroke-width:2.0" width="2801.5" x="704" y="1406.8125"/>
    <rect fill="#FFFFFF" height="1127.7734" style="stroke:none;stroke-width:1.0" width="2801.5" x="704" y="1524.3438"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="158.9297" style="stroke:#000000;stroke-width:2.0" width="285" x="714" y="1575.4766"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="231.0625" style="stroke:#000000;stroke-width:2.0" width="668" x="714" y="1748.4063"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="130.5313" style="stroke:#000000;stroke-width:2.0" width="460.5" x="2986" y="2514.5859"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="774.1875" style="stroke:#000000;stroke-width:2.0" width="2101" x="1385.5" y="2717.3828"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="671.7891" style="stroke:#000000;stroke-width:2.0" width="2081" x="1395.5" y="2812.7813"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="640.6563" style="stroke:#000000;stroke-width:2.0" width="2061" x="1405.5" y="2836.9141"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="494.9922" style="stroke:#000000;stroke-width:2.0" width="2041" x="1415.5" y="2975.5781"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="130.5313" style="stroke:#000000;stroke-width:2.0" width="460.5" x="2986" y="3028.8438"/>
    <rect fill="#FFFFFF" height="304.1953" style="stroke:none;stroke-width:1.0" width="2041" x="1415.5" y="3166.375"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="130.5313" style="stroke:#000000;stroke-width:2.0" width="460.5" x="2986" y="3303.9063"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="454.7266" style="stroke:#000000;stroke-width:2.0" width="1495" x="1951.5" y="3505.5703"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="394.4609" style="stroke:#000000;stroke-width:2.0" width="788.5" x="1961.5" y="3558.8359"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="176.6641" style="stroke:#000000;stroke-width:2.0" width="420.5" x="1971.5" y="3667.2344"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="103.3984" style="stroke:#000000;stroke-width:2.0" width="400.5" x="1981.5" y="3733.5"/>
    <rect fill="#FFFFFF" height="44.1328" style="stroke:none;stroke-width:1.0" width="400.5" x="1981.5" y="3792.7656"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="88.3984" style="stroke:#000000;stroke-width:2.0" width="758.5" x="1981.5" y="3857.8984"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="177.7969" style="stroke:#000000;stroke-width:2.0" width="947.5" x="2568" y="3974.2969"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="75.3984" style="stroke:#000000;stroke-width:2.0" width="927.5" x="2578" y="3998.4297"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="91" x2="91" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="290" x2="290" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="568.5" x2="568.5" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="796" x2="796" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="1539.5" x2="1539.5" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="2079.5" x2="2079.5" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="2659" x2="2659" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="2917" x2="2917" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="3049" x2="3049" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="3382.5" x2="3382.5" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="3470.5" x2="3470.5" y1="122.3828" y2="4176.0938"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="3566.5" x2="3566.5" y1="122.3828" y2="4176.0938"/>
    <rect fill="#FEFECE" filter="url(#ft8cikx8585u0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="27" y="83.0859"/>
    <rect fill="#FEFECE" filter="url(#ft8cikx8585u0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="23" y="87.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="30" y="107.0811">Notification topic</text>
    <rect fill="#FEFECE" filter="url(#ft8cikx8585u0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="27" y="4175.0938"/>
    <rect fill="#FEFECE" filter="url(#ft8cikx8585u0)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="23" y="4179.0938"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="30" y="4199.0889">Notification topic</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="227" y="119.0811">Topic Observable</text>
    <ellipse cx="290" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="286,78.0859,292,73.0859,290,78.0859,292,83.0859,286,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="227" y="4188.0889">Topic Observable</text>
    <ellipse cx="290" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="286,4195.3906,292,4190.3906,290,4195.3906,292,4200.3906,286,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="499.5" y="119.0811">Tracing Observable</text>
    <ellipse cx="569" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="565,78.0859,571,73.0859,569,78.0859,571,83.0859,565,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="499.5" y="4188.0889">Tracing Observable</text>
    <ellipse cx="569" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="565,4195.3906,571,4190.3906,569,4195.3906,571,4200.3906,565,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="724" y="119.0811">Caching Observable</text>
    <ellipse cx="796" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="792,78.0859,798,73.0859,796,78.0859,798,83.0859,792,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="724" y="4188.0889">Caching Observable</text>
    <ellipse cx="796" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="792,4195.3906,798,4190.3906,796,4195.3906,798,4200.3906,792,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="223" x="1425.5" y="119.0811">Check For Last Span Observable</text>
    <ellipse cx="1540" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="1536,78.0859,1542,73.0859,1540,78.0859,1542,83.0859,1536,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="223" x="1425.5" y="4188.0889">Check For Last Span Observable</text>
    <ellipse cx="1540" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="1536,4195.3906,1542,4190.3906,1540,4195.3906,1542,4200.3906,1536,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="1991.5" y="119.0811">Create Trace Observable</text>
    <ellipse cx="2080" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="2076,78.0859,2082,73.0859,2080,78.0859,2082,83.0859,2076,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="171" x="1991.5" y="4188.0889">Create Trace Observable</text>
    <ellipse cx="2080" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="2076,4195.3906,2082,4190.3906,2080,4195.3906,2082,4200.3906,2076,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2588" y="119.0811">Send Trace Handler</text>
    <ellipse cx="2659" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="2655,78.0859,2661,73.0859,2659,78.0859,2661,83.0859,2655,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2588" y="4188.0889">Send Trace Handler</text>
    <ellipse cx="2659" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="2655,4195.3906,2661,4190.3906,2659,4195.3906,2661,4200.3906,2655,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="2848" y="119.0811">Send Span Handler</text>
    <ellipse cx="2917" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="2913,78.0859,2919,73.0859,2917,78.0859,2919,83.0859,2913,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="2848" y="4188.0889">Send Span Handler</text>
    <ellipse cx="2917" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="2913,4195.3906,2919,4190.3906,2917,4195.3906,2919,4200.3906,2913,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="2996" y="119.0811">Cache Handler</text>
    <ellipse cx="3049.5" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="3045.5,78.0859,3051.5,73.0859,3049.5,78.0859,3051.5,83.0859,3045.5,78.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="2996" y="4188.0889">Cache Handler</text>
    <ellipse cx="3049.5" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="3045.5,4195.3906,3051.5,4190.3906,3049.5,4195.3906,3051.5,4200.3906,3045.5,4195.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="3328.5" y="119.0811">Cache Storage</text>
    <path d="M3364.5,70.0859 C3364.5,60.0859 3382.5,60.0859 3382.5,60.0859 C3382.5,60.0859 3400.5,60.0859 3400.5,70.0859 L3400.5,96.0859 C3400.5,106.0859 3382.5,106.0859 3382.5,106.0859 C3382.5,106.0859 3364.5,106.0859 3364.5,96.0859 L3364.5,70.0859 " fill="#FEFECE" filter="url(#ft8cikx8585u0)" style="stroke:#000000;stroke-width:1.5"/>
    <path d="M3364.5,70.0859 C3364.5,80.0859 3382.5,80.0859 3382.5,80.0859 C3382.5,80.0859 3400.5,80.0859 3400.5,70.0859 " fill="none" style="stroke:#000000;stroke-width:1.5"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="3328.5" y="4188.0889">Cache Storage</text>
    <path d="M3364.5,4201.3906 C3364.5,4191.3906 3382.5,4191.3906 3382.5,4191.3906 C3382.5,4191.3906 3400.5,4191.3906 3400.5,4201.3906 L3400.5,4227.3906 C3400.5,4237.3906 3382.5,4237.3906 3382.5,4237.3906 C3382.5,4237.3906 3364.5,4237.3906 3364.5,4227.3906 L3364.5,4201.3906 " fill="#FEFECE" filter="url(#ft8cikx8585u0)" style="stroke:#000000;stroke-width:1.5"/>
    <path d="M3364.5,4201.3906 C3364.5,4211.3906 3382.5,4211.3906 3382.5,4211.3906 C3382.5,4211.3906 3400.5,4211.3906 3400.5,4201.3906 " fill="none" style="stroke:#000000;stroke-width:1.5"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="3453" y="119.0811">APM</text>
    <path d="M3450.5,78.0859 L3450.5,102.0859 M3450.5,90.0859 L3467.5,90.0859 " fill="none" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:2.0"/>
    <ellipse cx="3479.5" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="3453" y="4188.0889">APM</text>
    <path d="M3450.5,4195.3906 L3450.5,4219.3906 M3450.5,4207.3906 L3467.5,4207.3906 " fill="none" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:2.0"/>
    <ellipse cx="3479.5" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="3505.5" y="119.0811">Elasticsearch API</text>
    <path d="M3546,78.0859 L3546,102.0859 M3546,90.0859 L3563,90.0859 " fill="none" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:2.0"/>
    <ellipse cx="3575" cy="90.0859" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="3505.5" y="4188.0889">Elasticsearch API</text>
    <path d="M3546,4195.3906 L3546,4219.3906 M3546,4207.3906 L3563,4207.3906 " fill="none" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:2.0"/>
    <ellipse cx="3575" cy="4207.3906" fill="#FEFECE" filter="url(#ft8cikx8585u0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="86" y="177.6484"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="820.2422" style="stroke:#A80036;stroke-width:1.0" width="10" x="285" y="177.6484"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="83.5313" style="stroke:#A80036;stroke-width:1.0" width="10" x="564" y="997.8906"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="1613.9609" style="stroke:#A80036;stroke-width:1.0" width="10" x="791" y="1081.4219"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="767.1875" style="stroke:#A80036;stroke-width:1.0" width="10" x="1535" y="2695.3828"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="475.7266" style="stroke:#A80036;stroke-width:1.0" width="10" x="2075" y="3462.5703"/>
    <rect fill="#FFFFFF" filter="url(#ft8cikx8585u0)" height="228.7969" style="stroke:#A80036;stroke-width:1.0" width="10" x="2654" y="3938.2969"/>
    <path d="M9,139.3828 L275,139.3828 L275,146.3828 L265,156.3828 L9,156.3828 L9,139.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="4019.7109" style="stroke:#000000;stroke-width:2.0" width="3628.5" x="9" y="139.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="24" y="152.4497">New Event Message Received</text>
    <polygon fill="#A80036" points="273,173.6484,283,177.6484,273,181.6484,277,177.6484" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="96" x2="279" y1="177.6484" y2="177.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="103" y="172.5825">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="116" y="172.5825">Consume Event Message</text>
    <path d="M19,220.6484 L19,895.6484 L556,895.6484 L556,230.6484 L546,220.6484 L19,220.6484 " fill="#FFFF00" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M546,220.6484 L546,230.6484 L556,230.6484 L546,220.6484 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="25" y="237.7153">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="33" y="252.8481">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="41" y="267.981">&quot;from&quot;: &quot;payeefsp&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="41" y="283.1138">&quot;to&quot;: &quot;payerfsp&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="41" y="298.2466">&quot;id&quot;: &quot;659ee338-c8f8-4c06-8aff-944e6c5cd694&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="41" y="313.3794">&quot;content&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="49" y="328.5122">&quot;headers&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="484" x="57" y="343.645">&quot;content-type&quot;: &quot;applicationvnd.interoperability.transfers+json;version=1.0&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="57" y="358.7778">&quot;date&quot;: &quot;2019-05-28T16:34:41.000Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="57" y="373.9106">&quot;fspiop-source&quot;: &quot;payeefsp&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="57" y="389.0435">&quot;fspiop-destination&quot;: &quot;payerfsp&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="49" y="404.1763">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="49" y="419.3091">&quot;payload&quot;: &lt;payload&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="41" y="434.4419">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="41" y="449.5747">&quot;type&quot;: &quot;application/json&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="41" y="464.7075">&quot;metadata&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="49" y="479.8403">&quot;event&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="57" y="494.9731">&quot;id&quot;: &quot;3920382d-f78c-4023-adf9-0d7a4a2a3a2f&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="57" y="510.106">&quot;type&quot;: &quot;trace&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="57" y="525.2388">&quot;action&quot;: &quot;span&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="57" y="540.3716">&quot;createdAt&quot;: &quot;2019-05-29T23:18:32.935Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="57" y="555.5044">&quot;state&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="65" y="570.6372">&quot;status&quot;: &quot;success&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="65" y="585.77">&quot;code&quot;: 0,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="65" y="600.9028">&quot;description&quot;: &quot;action successful&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="57" y="616.0356">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="373" x="57" y="631.1685">&quot;responseTo&quot;: &quot;1a396c07-47ab-4d68-a7a0-7a1ea36f0012&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="49" y="646.3013">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="49" y="661.4341">&quot;trace&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="57" y="676.5669">&quot;service&quot;: &quot;central-ledger-prepare-handler&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="57" y="691.6997">&quot;traceId&quot;: &quot;bbd7b2c7bbd7b2c7&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="57" y="706.8325">&quot;parentSpanId&quot;: &quot;44ba9bbc5840&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="57" y="721.9653">&quot;spanId&quot;: &quot;2aa9cd0a7e87&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="57" y="737.0981">&quot;startTimestamp&quot;: &quot;2015-08-29T11:22:09.815479Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="57" y="752.231">&quot;finishTimestamp&quot;: &quot;2015-08-29T11:22:09.815479Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="57" y="767.3638">&quot;tags&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="367" x="65" y="782.4966">&quot;transctionId&quot;: &quot;659ee338-c8f8-4c06-8aff-944e6c5cd694&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="65" y="797.6294">&quot;transctionType&quot;: &quot;transfer&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="65" y="812.7622">&quot;parentEventType&quot;: &quot;bulk-prepare&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="65" y="827.895">&quot;parentEventAction&quot;: &quot;prepare&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="57" y="843.0278">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="49" y="858.1606">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="41" y="873.2935">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="33" y="888.4263">}</text>
    <polygon fill="#A80036" points="3554.5,922.625,3564.5,926.625,3554.5,930.625,3558.5,926.625" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="295" x2="3560.5" y1="926.625" y2="926.625"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="302" y="921.5591">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="315" y="921.5591">Send message for log purposes to custom index</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="295" x2="337" y1="955.7578" y2="955.7578"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="337" x2="337" y1="955.7578" y2="968.7578"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="296" x2="337" y1="968.7578" y2="968.7578"/>
    <polygon fill="#A80036" points="306,964.7578,296,968.7578,306,972.7578,302,968.7578" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="302" y="950.6919">3</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="315" y="950.6919">Verify its tracing event Message</text>
    <polygon fill="#A80036" points="552,993.8906,562,997.8906,552,1001.8906,556,997.8906" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="290" x2="558" y1="997.8906" y2="997.8906"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="297" y="992.8247">4</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="310" y="992.8247">Send Message to Tracing Observable</text>
    <path d="M489.5,1012.8906 L621.5,1012.8906 L621.5,1019.8906 L611.5,1029.8906 L489.5,1029.8906 L489.5,1012.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1690.4922" style="stroke:#000000;stroke-width:2.0" width="3026" x="489.5" y="1012.8906"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="504.5" y="1025.9575">Cache Span</text>
    <polygon fill="#A80036" points="779,1077.4219,789,1081.4219,779,1085.4219,783,1081.4219" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="569" x2="785" y1="1081.4219" y2="1081.4219"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="576" y="1061.2231">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="589" y="1046.0903">Send Span Context,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="589" y="1061.2231">metadata.State and Content</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="589" y="1076.356">from Message</text>
    <path d="M574,1094.4219 L574,1361.4219 L976,1361.4219 L976,1104.4219 L966,1094.4219 L574,1094.4219 " fill="#FFFF00" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M966,1094.4219 L966,1104.4219 L976,1104.4219 L966,1094.4219 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="580" y="1111.4888">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="588" y="1126.6216">spanContext: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="596" y="1141.7544">service: &quot;central-ledger-prepare-handler&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="596" y="1156.8872">traceId: &quot;bbd7b2c7bbd7b2c7&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="596" y="1172.02">parentSpanId: &quot;44ba9bbc5840&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="596" y="1187.1528">spanId: &quot;2aa9cd0a7e87&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="323" x="596" y="1202.2856">startTimestamp: &quot;2015-08-29T11:22:09.815479Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="596" y="1217.4185">finishTimestamp: &quot;2015-08-29T11:22:09.815479Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="596" y="1232.5513">tags: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="357" x="604" y="1247.6841">transctionId: &quot;659ee338-c8f8-4c06-8aff-944e6c5cd694&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="604" y="1262.8169">transctionType: &quot;transfer&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="604" y="1277.9497">parentEventType: &quot;bulk-prepare&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="604" y="1293.0825">parentEventAction: &quot;prepare&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="596" y="1308.2153">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="588" y="1323.3481">state: metadata.state,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="588" y="1338.481">content</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="580" y="1353.6138">}</text>
    <polygon fill="#A80036" points="812,1387.8125,802,1391.8125,812,1395.8125,808,1391.8125" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="806" x2="3381.5" y1="1391.8125" y2="1391.8125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="818" y="1386.7466">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="831" y="1386.7466">Get cachedTrace by traceId</text>
    <path d="M704,1406.8125 L768,1406.8125 L768,1413.8125 L758,1423.8125 L704,1423.8125 L704,1406.8125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1245.3047" style="stroke:#000000;stroke-width:2.0" width="2801.5" x="704" y="1406.8125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="719" y="1419.8794">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="783" y="1419.0229">[the span should not be cached]</text>
    <polygon fill="#A80036" points="2905,1441.0781,2915,1445.0781,2905,1449.0781,2909,1445.0781" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="2911" y1="1445.0781" y2="1445.0781"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="808" y="1440.0122">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="821" y="1440.0122">currentSpan</text>
    <polygon fill="#A80036" points="3459,1470.2109,3469,1474.2109,3459,1478.2109,3463,1474.2109" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2917" x2="3465" y1="1474.2109" y2="1474.2109"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="2924" y="1469.145">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="2937" y="1469.145">store to APM</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1503.3438" y2="1503.3438"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1503.3438" y2="1516.3438"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1516.3438" y2="1516.3438"/>
    <polygon fill="#A80036" points="812,1512.3438,802,1516.3438,812,1520.3438,808,1516.3438" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="808" y="1498.2778">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="821" y="1498.2778">Complete</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="704" x2="3505.5" y1="1525.3438" y2="1525.3438"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1547.4766" y2="1547.4766"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1547.4766" y2="1560.4766"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1560.4766" y2="1560.4766"/>
    <polygon fill="#A80036" points="812,1556.4766,802,1560.4766,812,1564.4766,808,1560.4766" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="1542.4106">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="698" x="830" y="1542.4106">Validate transactionType, TransactionAction and service to match Config.START_CRITERIA &amp;&amp; !parentSpandId</text>
    <path d="M714,1575.4766 L778,1575.4766 L778,1582.4766 L768,1592.4766 L714,1592.4766 L714,1575.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="158.9297" style="stroke:#000000;stroke-width:2.0" width="285" x="714" y="1575.4766"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="729" y="1588.5435">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="793" y="1587.687">[!cachedTrace]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1613.7422" y2="1613.7422"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1613.7422" y2="1626.7422"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1626.7422" y2="1626.7422"/>
    <polygon fill="#A80036" points="812,1622.7422,802,1626.7422,812,1630.7422,808,1626.7422" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="1608.6763">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="830" y="1608.6763">Create new cachedTrace</text>
    <path d="M806,1639.7422 L806,1724.7422 L948,1724.7422 L948,1649.7422 L938,1639.7422 L806,1639.7422 " fill="#FFFF00" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M938,1639.7422 L938,1649.7422 L948,1649.7422 L938,1639.7422 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="812" y="1656.8091">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="820" y="1671.9419">spans: {},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="820" y="1687.0747">masterSpan: null,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="820" y="1702.2075">lastSpan: null</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="812" y="1717.3403">}</text>
    <path d="M714,1748.4063 L778,1748.4063 L778,1755.4063 L768,1765.4063 L714,1765.4063 L714,1748.4063 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="231.0625" style="stroke:#000000;stroke-width:2.0" width="668" x="714" y="1748.4063"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="729" y="1761.4731">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="793" y="1760.6167">[!parentSpan]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1786.6719" y2="1786.6719"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1786.6719" y2="1799.6719"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1799.6719" y2="1799.6719"/>
    <polygon fill="#A80036" points="812,1795.6719,802,1799.6719,812,1803.6719,808,1799.6719" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="1781.606">12</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="830" y="1781.606">Generate MasterSpanId</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1843.9375" y2="1843.9375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1843.9375" y2="1856.9375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1856.9375" y2="1856.9375"/>
    <polygon fill="#A80036" points="812,1852.9375,802,1856.9375,812,1860.9375,808,1856.9375" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="1831.3052">13</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="830" y="1823.7388">Make received span child of masterSpan</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="383" x="830" y="1838.8716">merge({ parentSpanId: MasterSpanId }, { ...spanContext })</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1916.3359" y2="1916.3359"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1916.3359" y2="1929.3359"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1929.3359" y2="1929.3359"/>
    <polygon fill="#A80036" points="812,1925.3359,802,1929.3359,812,1933.3359,808,1929.3359" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="1896.1372">14</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="536" x="830" y="1881.0044">Create MasterSpanContext merge({ tags: { ...tags, masterSpan: MasterSpanId } },</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="830" y="1896.1372">{ ...spanContext },</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="451" x="830" y="1911.27">{ spanId: MasterSpanId, service: `master-${tags.transactionType}` })</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="843" y1="1958.4688" y2="1958.4688"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="843" x2="843" y1="1958.4688" y2="1971.4688"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="802" x2="843" y1="1971.4688" y2="1971.4688"/>
    <polygon fill="#A80036" points="812,1967.4688,802,1971.4688,812,1975.4688,808,1971.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="1953.4028">15</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="830" y="1953.4028">Add masterSpan to cachedTrace</text>
    <polygon fill="#A80036" points="812,2003.6016,802,2007.6016,812,2011.6016,808,2007.6016" style="stroke:#A80036;stroke-width:1.0"/>
    <polygon fill="#A80036" points="3037.5,2003.6016,3047.5,2007.6016,3037.5,2011.6016,3041.5,2007.6016" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="806" x2="3043.5" y1="2007.6016" y2="2007.6016"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="818" y="2002.5356">16</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="840" y="2002.5356">Add span to cachedTrace</text>
    <path d="M806,2020.6016 L806,2468.6016 L1226,2468.6016 L1226,2030.6016 L1216,2020.6016 L806,2020.6016 " fill="#FFFF00" filter="url(#ft8cikx8585u0)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M1216,2020.6016 L1216,2030.6016 L1226,2030.6016 L1216,2020.6016 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="812" y="2037.6685">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="820" y="2052.8013">spans: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="828" y="2067.9341">2aa9cd0a7e87: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="828" y="2083.0669">state,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="828" y="2098.1997">content</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="828" y="2113.3325">spanContext: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="836" y="2128.4653">&quot;service&quot;: &quot;central-ledger-prepare-handler&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="836" y="2143.5981">&quot;traceId&quot;: &quot;bbd7b2c7bbd7b2c7&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="836" y="2158.731">&quot;parentSpanId&quot;:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="940" y="2158.731">MasterSpanId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1042" y="2158.731">,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="836" y="2173.8638">&quot;spanId&quot;: &quot;2aa9cd0a7e87&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="836" y="2188.9966">&quot;startTimestamp&quot;: &quot;2015-08-29T11:22:09.815479Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="836" y="2204.1294">&quot;finishTimestamp&quot;: &quot;2015-08-29T11:22:09.815479Z&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="836" y="2219.2622">&quot;tags&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="367" x="844" y="2234.395">&quot;transctionId&quot;: &quot;659ee338-c8f8-4c06-8aff-944e6c5cd694&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="844" y="2249.5278">&quot;transctionType&quot;: &quot;transfer&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="844" y="2264.6606">&quot;parentEventType&quot;: &quot;bulk-prepare&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="844" y="2279.7935">&quot;parentEventAction&quot;: &quot;prepare&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="836" y="2294.9263">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="828" y="2310.0591">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="820" y="2325.1919">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="820" y="2340.3247"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="820" y="2340.3247">MasterSpanId:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="931" y="2340.3247">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="828" y="2355.4575">state,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="828" y="2370.5903">content,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="828" y="2385.7231">MasterSpanContext</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="820" y="2400.856">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="812" y="2415.9888">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="812" y="2431.1216">masterSpan:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="899" y="2431.1216">MasterSpanContext</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1044" y="2431.1216">,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="812" y="2446.2544">lastSpan: null</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="812" y="2461.3872">}</text>
    <polygon fill="#A80036" points="3037.5,2495.5859,3047.5,2499.5859,3037.5,2503.5859,3041.5,2499.5859" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="801" x2="3043.5" y1="2499.5859" y2="2499.5859"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="808" y="2494.52">17</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="830" y="2494.52">Update cachedTrace to Cache</text>
    <path d="M2986,2514.5859 L3050,2514.5859 L3050,2521.5859 L3040,2531.5859 L2986,2531.5859 L2986,2514.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="130.5313" style="stroke:#000000;stroke-width:2.0" width="460.5" x="2986" y="2514.5859"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="3001" y="2527.6528">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="230" x="3065" y="2526.7964">[cachedTrace not staled or expired]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3091.5" y1="2552.8516" y2="2552.8516"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3091.5" x2="3091.5" y1="2552.8516" y2="2565.8516"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3050.5" x2="3091.5" y1="2565.8516" y2="2565.8516"/>
    <polygon fill="#A80036" points="3060.5,2561.8516,3050.5,2565.8516,3060.5,2569.8516,3056.5,2565.8516" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="2547.7856">18</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="3078.5" y="2547.7856">unsubscribe from Scheduler</text>
    <polygon fill="#A80036" points="3370.5,2590.9844,3380.5,2594.9844,3370.5,2598.9844,3374.5,2594.9844" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3376.5" y1="2594.9844" y2="2594.9844"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="2589.9185">19</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="3078.5" y="2589.9185">record cachedTrace</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3091.5" y1="2624.1172" y2="2624.1172"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3091.5" x2="3091.5" y1="2624.1172" y2="2637.1172"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3050.5" x2="3091.5" y1="2637.1172" y2="2637.1172"/>
    <polygon fill="#A80036" points="3060.5,2633.1172,3050.5,2637.1172,3060.5,2641.1172,3056.5,2637.1172" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="2619.0513">20</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="297" x="3078.5" y="2619.0513">Reschedule scheduler for handling stale traces</text>
    <polygon fill="#A80036" points="1523,2691.3828,1533,2695.3828,1523,2699.3828,1527,2695.3828" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="796" x2="1529" y1="2695.3828" y2="2695.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="803" y="2682.7505">21</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="825" y="2675.1841">Send traceId to check if last span has been received</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="825" y="2690.3169">and cached</text>
    <path d="M1385.5,2717.3828 L1574.5,2717.3828 L1574.5,2724.3828 L1564.5,2734.3828 L1385.5,2734.3828 L1385.5,2717.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="774.1875" style="stroke:#000000;stroke-width:2.0" width="2101" x="1385.5" y="2717.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="1400.5" y="2730.4497">Check for last span</text>
    <polygon fill="#A80036" points="1556,2751.6484,1546,2755.6484,1556,2759.6484,1552,2755.6484" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1550" x2="3381.5" y1="2755.6484" y2="2755.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1562" y="2750.5825">22</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1584" y="2750.5825">Get cachedTrace by traceId</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="1587" y1="2784.7813" y2="2784.7813"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1587" x2="1587" y1="2784.7813" y2="2797.7813"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1546" x2="1587" y1="2797.7813" y2="2797.7813"/>
    <polygon fill="#A80036" points="1556,2793.7813,1546,2797.7813,1556,2801.7813,1552,2797.7813" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="2779.7153">23</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="1574" y="2779.7153">Sort spans by startTimestamp</text>
    <path d="M1395.5,2812.7813 L1472.5,2812.7813 L1472.5,2819.7813 L1462.5,2829.7813 L1395.5,2829.7813 L1395.5,2812.7813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="671.7891" style="stroke:#000000;stroke-width:2.0" width="2081" x="1395.5" y="2812.7813"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="1410.5" y="2825.8481">loop</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="1487.5" y="2824.9917">[for currentSpan of SortedSpans]</text>
    <path d="M1405.5,2836.9141 L1469.5,2836.9141 L1469.5,2843.9141 L1459.5,2853.9141 L1405.5,2853.9141 L1405.5,2836.9141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="640.6563" style="stroke:#000000;stroke-width:2.0" width="2061" x="1405.5" y="2836.9141"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1420.5" y="2849.981">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="1484.5" y="2849.1245">[parentSpan]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="1587" y1="2905.4453" y2="2905.4453"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1587" x2="1587" y1="2905.4453" y2="2918.4453"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1546" x2="1587" y1="2918.4453" y2="2918.4453"/>
    <polygon fill="#A80036" points="1556,2914.4453,1546,2918.4453,1556,2922.4453,1552,2918.4453" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="2885.2466">24</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1574" y="2870.1138">isError = (errorCode in parentSpan</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="1574" y="2885.2466">OR parentSpan status === failed</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1574" y="2900.3794">OR status === failed)</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="1587" y1="2947.5781" y2="2947.5781"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1587" x2="1587" y1="2947.5781" y2="2960.5781"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1546" x2="1587" y1="2960.5781" y2="2960.5781"/>
    <polygon fill="#A80036" points="1556,2956.5781,1546,2960.5781,1556,2964.5781,1552,2960.5781" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="2942.5122">25</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="494" x="1574" y="2942.5122">apply masterSpan and error tags from parent to current span in cachedTrace</text>
    <path d="M1415.5,2975.5781 L1479.5,2975.5781 L1479.5,2982.5781 L1469.5,2992.5781 L1415.5,2992.5781 L1415.5,2975.5781 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="494.9922" style="stroke:#000000;stroke-width:2.0" width="2041" x="1415.5" y="2975.5781"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1430.5" y="2988.645">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="1494.5" y="2987.7886">[!isLastSpan]</text>
    <polygon fill="#A80036" points="3037.5,3009.8438,3047.5,3013.8438,3037.5,3017.8438,3041.5,3013.8438" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="3043.5" y1="3013.8438" y2="3013.8438"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="3008.7778">26</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="1574" y="3008.7778">Update cachedTrace to Cache</text>
    <path d="M2986,3028.8438 L3050,3028.8438 L3050,3035.8438 L3040,3045.8438 L2986,3045.8438 L2986,3028.8438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="130.5313" style="stroke:#000000;stroke-width:2.0" width="460.5" x="2986" y="3028.8438"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="3001" y="3041.9106">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="230" x="3065" y="3041.0542">[cachedTrace not staled or expired]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3091.5" y1="3067.1094" y2="3067.1094"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3091.5" x2="3091.5" y1="3067.1094" y2="3080.1094"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3050.5" x2="3091.5" y1="3080.1094" y2="3080.1094"/>
    <polygon fill="#A80036" points="3060.5,3076.1094,3050.5,3080.1094,3060.5,3084.1094,3056.5,3080.1094" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="3062.0435">27</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="3078.5" y="3062.0435">unsubscribe from Scheduler</text>
    <polygon fill="#A80036" points="3370.5,3105.2422,3380.5,3109.2422,3370.5,3113.2422,3374.5,3109.2422" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3376.5" y1="3109.2422" y2="3109.2422"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="3104.1763">28</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="3078.5" y="3104.1763">record cachedTrace</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3091.5" y1="3138.375" y2="3138.375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3091.5" x2="3091.5" y1="3138.375" y2="3151.375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3050.5" x2="3091.5" y1="3151.375" y2="3151.375"/>
    <polygon fill="#A80036" points="3060.5,3147.375,3050.5,3151.375,3060.5,3155.375,3056.5,3151.375" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="3133.3091">29</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="297" x="3078.5" y="3133.3091">Reschedule scheduler for handling stale traces</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="1415.5" x2="3456.5" y1="3167.375" y2="3167.375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="1587" y1="3204.6406" y2="3204.6406"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1587" x2="1587" y1="3204.6406" y2="3217.6406"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1546" x2="1587" y1="3217.6406" y2="3217.6406"/>
    <polygon fill="#A80036" points="1556,3213.6406,1546,3217.6406,1556,3221.6406,1552,3217.6406" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="3192.0083">30</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="406" x="1574" y="3184.4419">Validate transactionType, TransactionAction, service and isError</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="1574" y="3199.5747">to match Config.START_CRITERIA &amp;&amp; !parentSpandId</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="1587" y1="3246.7734" y2="3246.7734"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1587" x2="1587" y1="3246.7734" y2="3259.7734"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1546" x2="1587" y1="3259.7734" y2="3259.7734"/>
    <polygon fill="#A80036" points="1556,3255.7734,1546,3259.7734,1556,3263.7734,1552,3259.7734" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="3241.7075">31</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="324" x="1574" y="3241.7075">cachedTrace.lastSpan = currentSpan.spanContext</text>
    <polygon fill="#A80036" points="3037.5,3284.9063,3047.5,3288.9063,3037.5,3292.9063,3041.5,3288.9063" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1545" x2="3043.5" y1="3288.9063" y2="3288.9063"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1552" y="3283.8403">32</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="1574" y="3283.8403">Update cachedTrace to Cache</text>
    <path d="M2986,3303.9063 L3050,3303.9063 L3050,3310.9063 L3040,3320.9063 L2986,3320.9063 L2986,3303.9063 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="130.5313" style="stroke:#000000;stroke-width:2.0" width="460.5" x="2986" y="3303.9063"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="3001" y="3316.9731">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="230" x="3065" y="3316.1167">[cachedTrace not staled or expired]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3091.5" y1="3342.1719" y2="3342.1719"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3091.5" x2="3091.5" y1="3342.1719" y2="3355.1719"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3050.5" x2="3091.5" y1="3355.1719" y2="3355.1719"/>
    <polygon fill="#A80036" points="3060.5,3351.1719,3050.5,3355.1719,3060.5,3359.1719,3056.5,3355.1719" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="3337.106">33</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="3078.5" y="3337.106">unsubscribe from Scheduler</text>
    <polygon fill="#A80036" points="3370.5,3380.3047,3380.5,3384.3047,3370.5,3388.3047,3374.5,3384.3047" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3376.5" y1="3384.3047" y2="3384.3047"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="3379.2388">34</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="3078.5" y="3379.2388">record cachedTrace</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3049.5" x2="3091.5" y1="3413.4375" y2="3413.4375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3091.5" x2="3091.5" y1="3413.4375" y2="3426.4375"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="3050.5" x2="3091.5" y1="3426.4375" y2="3426.4375"/>
    <polygon fill="#A80036" points="3060.5,3422.4375,3050.5,3426.4375,3060.5,3430.4375,3056.5,3426.4375" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="3056.5" y="3408.3716">35</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="297" x="3078.5" y="3408.3716">Reschedule scheduler for handling stale traces</text>
    <polygon fill="#A80036" points="2063,3458.5703,2073,3462.5703,2063,3466.5703,2067,3462.5703" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1540" x2="2069" y1="3462.5703" y2="3462.5703"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1547" y="3457.5044">36</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="1569" y="3457.5044">Send traceId</text>
    <path d="M1951.5,3505.5703 L2252.5,3505.5703 L2252.5,3512.5703 L2242.5,3522.5703 L1951.5,3522.5703 L1951.5,3505.5703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="454.7266" style="stroke:#000000;stroke-width:2.0" width="1495" x="1951.5" y="3505.5703"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="256" x="1966.5" y="3518.6372">Recreate Trace from Cached Trace</text>
    <polygon fill="#A80036" points="2096,3539.8359,2086,3543.8359,2096,3547.8359,2092,3543.8359" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2090" x2="3381.5" y1="3543.8359" y2="3543.8359"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2102" y="3538.77">37</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="2124" y="3538.77">get cachedTrace by TraceId</text>
    <path d="M1961.5,3558.8359 L2025.5,3558.8359 L2025.5,3565.8359 L2015.5,3575.8359 L1961.5,3575.8359 L1961.5,3558.8359 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="394.4609" style="stroke:#000000;stroke-width:2.0" width="788.5" x="1961.5" y="3558.8359"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1976.5" y="3571.9028">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="348" x="2040.5" y="3571.0464">[cachedTrace.lastSpan AND cachedTrace.masterSpan]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2085" x2="2127" y1="3597.1016" y2="3597.1016"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2127" x2="2127" y1="3597.1016" y2="3610.1016"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2086" x2="2127" y1="3610.1016" y2="3610.1016"/>
    <polygon fill="#A80036" points="2096,3606.1016,2086,3610.1016,2096,3614.1016,2092,3610.1016" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2092" y="3592.0356">38</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="2114" y="3592.0356">currentSpan = lastSpan</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2085" x2="2127" y1="3639.2344" y2="3639.2344"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2127" x2="2127" y1="3639.2344" y2="3652.2344"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2086" x2="2127" y1="3652.2344" y2="3652.2344"/>
    <polygon fill="#A80036" points="2096,3648.2344,2086,3652.2344,2096,3656.2344,2092,3652.2344" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2092" y="3634.1685">39</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="2114" y="3634.1685">resultTrace = [lastSpan]</text>
    <path d="M1971.5,3667.2344 L2048.5,3667.2344 L2048.5,3674.2344 L2038.5,3684.2344 L1971.5,3684.2344 L1971.5,3667.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="176.6641" style="stroke:#000000;stroke-width:2.0" width="420.5" x="1971.5" y="3667.2344"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="1986.5" y="3680.3013">loop</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="289" x="2063.5" y="3679.4448">[for i = 0; i &lt; cachedTrace.spans.length; i++]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2085" x2="2127" y1="3705.5" y2="3705.5"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2127" x2="2127" y1="3705.5" y2="3718.5"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2086" x2="2127" y1="3718.5" y2="3718.5"/>
    <polygon fill="#A80036" points="2096,3714.5,2086,3718.5,2096,3722.5,2092,3718.5" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2092" y="3700.4341">40</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="2114" y="3700.4341">get parentSpan of currentSpan</text>
    <path d="M1981.5,3733.5 L2045.5,3733.5 L2045.5,3740.5 L2035.5,3750.5 L1981.5,3750.5 L1981.5,3733.5 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="103.3984" style="stroke:#000000;stroke-width:2.0" width="400.5" x="1981.5" y="3733.5"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1996.5" y="3746.5669">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="2060.5" y="3745.7104">[parentSpan]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2085" x2="2127" y1="3771.7656" y2="3771.7656"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2127" x2="2127" y1="3771.7656" y2="3784.7656"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2086" x2="2127" y1="3784.7656" y2="3784.7656"/>
    <polygon fill="#A80036" points="2096,3780.7656,2086,3784.7656,2096,3788.7656,2092,3784.7656" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2092" y="3766.6997">41</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="2114" y="3766.6997">insert parent span in resultTrace in front</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="1981.5" x2="2382" y1="3793.7656" y2="3793.7656"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2085" x2="2127" y1="3815.8984" y2="3815.8984"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2127" x2="2127" y1="3815.8984" y2="3828.8984"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2086" x2="2127" y1="3828.8984" y2="3828.8984"/>
    <polygon fill="#A80036" points="2096,3824.8984,2086,3828.8984,2096,3832.8984,2092,3828.8984" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2092" y="3810.8325">42</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="2114" y="3810.8325">break loop</text>
    <path d="M1981.5,3857.8984 L2045.5,3857.8984 L2045.5,3864.8984 L2035.5,3874.8984 L1981.5,3874.8984 L1981.5,3857.8984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="88.3984" style="stroke:#000000;stroke-width:2.0" width="758.5" x="1981.5" y="3857.8984"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1996.5" y="3870.9653">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="332" x="2060.5" y="3870.1089">[cachedTrace.masterSpan === currentSpan.spanId]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2085" x2="2127" y1="3896.1641" y2="3896.1641"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2127" x2="2127" y1="3896.1641" y2="3909.1641"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2086" x2="2127" y1="3909.1641" y2="3909.1641"/>
    <polygon fill="#A80036" points="2096,3905.1641,2086,3909.1641,2096,3913.1641,2092,3909.1641" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2092" y="3891.0981">43</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="533" x="2114" y="3891.0981">masterSpan.finishTimestamp = resultTrace[resultTrace.length - 1].finishTimestamp</text>
    <polygon fill="#A80036" points="2642,3934.2969,2652,3938.2969,2642,3942.2969,2646,3938.2969" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2080" x2="2648" y1="3938.2969" y2="3938.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2087" y="3933.231">44</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="2109" y="3933.231">send resultTrace</text>
    <path d="M2568,3974.2969 L2694,3974.2969 L2694,3981.2969 L2684,3991.2969 L2568,3991.2969 L2568,3974.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="177.7969" style="stroke:#000000;stroke-width:2.0" width="947.5" x="2568" y="3974.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="2583" y="3987.3638">send Trace</text>
    <path d="M2578,3998.4297 L2655,3998.4297 L2655,4005.4297 L2645,4015.4297 L2578,4015.4297 L2578,3998.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0" width="927.5" x="2578" y="3998.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="2593" y="4011.4966">loop</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="2670" y="4010.6401">[trace elements]</text>
    <polygon fill="#A80036" points="2905,4032.6953,2915,4036.6953,2905,4040.6953,2909,4036.6953" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2664" x2="2911" y1="4036.6953" y2="4036.6953"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2671" y="4031.6294">45</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="2693" y="4031.6294">send each span</text>
    <polygon fill="#A80036" points="3459,4061.8281,3469,4065.8281,3459,4069.8281,3463,4065.8281" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2917" x2="3465" y1="4065.8281" y2="4065.8281"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2924" y="4060.7622">46</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="2946" y="4060.7622">send span to APM</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2664" x2="2706" y1="4101.9609" y2="4101.9609"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2706" x2="2706" y1="4101.9609" y2="4114.9609"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2665" x2="2706" y1="4114.9609" y2="4114.9609"/>
    <polygon fill="#A80036" points="2675,4110.9609,2665,4114.9609,2675,4118.9609,2671,4114.9609" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2671" y="4096.895">47</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="2693" y="4096.895">unsubscribe scheduler for traceId</text>
    <polygon fill="#A80036" points="3370.5,4140.0938,3380.5,4144.0938,3370.5,4148.0938,3374.5,4144.0938" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="2664" x2="3376.5" y1="4144.0938" y2="4144.0938"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="2671" y="4139.0278">48</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="2693" y="4139.0278">drop cachedTrace</text>
  </g>
</svg>
