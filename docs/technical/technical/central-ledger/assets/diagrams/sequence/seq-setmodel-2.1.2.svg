<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1301px" preserveAspectRatio="none" style="width:1518px;height:1301px;background:#FFFFFF;" version="1.1" viewBox="0 0 1518 1301" width="1518px" zoomAndPan="magnify">
  <title>2.1.2. Settlement Model Handler Consume</title>
  <defs/>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="335.1318" x="593.3059" y="27.9951">2.1.2. Settlement Model Handler Consume</text>
    <rect fill="#FFFFE0" height="1247.1797" style="stroke:#181818;stroke-width:0.5;" width="1351.4312" x="26" y="43.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112.0361" x="645.6975" y="55.3638">Central Service</text>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="96.3232" y="221.5547"/>
    <rect fill="#FFFFFF" height="1075.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="318.6294" y="137.0234"/>
    <rect fill="#FFFFFF" height="557.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="910.4912" y="583.6875"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="636.9531"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="787.6172"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="903.1484"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="1012.5469"/>
    <rect fill="none" height="1061.8594" style="stroke:#000000;stroke-width:1.5;" width="1502.7437" x="10" y="144.0234"/>
    <rect fill="none" height="1030.7266" style="stroke:#000000;stroke-width:1.5;" width="1482.7437" x="20" y="168.1563"/>
    <rect fill="none" height="105.5313" style="stroke:#000000;stroke-width:1.5;" width="568.4634" x="238.5898" y="266.5547"/>
    <rect fill="none" height="74.3984" style="stroke:#000000;stroke-width:1.5;" width="548.4634" x="248.5898" y="290.6875"/>
    <rect fill="none" height="154.3359" style="stroke:#000000;stroke-width:1.5;" width="607.1904" x="248.5898" y="386.0859"/>
    <rect fill="none" height="514.125" style="stroke:#000000;stroke-width:1.5;" width="666.9634" x="825.7803" y="598.6875"/>
    <rect fill="none" height="391.5938" style="stroke:#000000;stroke-width:1.5;" width="646.9634" x="835.7803" y="714.2188"/>
    <rect fill="none" height="233.9297" style="stroke:#000000;stroke-width:1.5;" width="626.9634" x="845.7803" y="864.8828"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="101" x2="101" y1="127.0234" y2="1222.8828"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="323.5898" x2="323.5898" y1="127.0234" y2="1222.8828"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="796.3262" x2="796.3262" y1="127.0234" y2="1222.8828"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="914.7803" x2="914.7803" y1="127.0234" y2="1222.8828"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1323.6948" x2="1323.6948" y1="127.0234" y2="1222.8828"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="34" y="75.4297"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="30" y="79.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="79.5332" y="99.4248">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.6465" x="37" y="115.7217">settlement-model</text>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="34" y="1221.8828"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="30" y="1225.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="79.5332" y="1245.8779">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.6465" x="37" y="1262.1748">settlement-model</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.0791" x="258.5898" y="107.4248">Settlement Model</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.125" x="293.0669" y="123.7217">Handler</text>
    <ellipse cx="323.6294" cy="78.4297" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <polygon fill="#181818" points="319.6294,66.4297,325.6294,61.4297,323.6294,66.4297,325.6294,71.4297,319.6294,66.4297" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.0791" x="258.5898" y="1234.8779">Settlement Model</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.125" x="293.0669" y="1251.1748">Handler</text>
    <ellipse cx="323.6294" cy="1270.4766" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <polygon fill="#181818" points="319.6294,1258.4766,325.6294,1253.4766,323.6294,1258.4766,325.6294,1263.4766,319.6294,1258.4766" style="stroke:#181818;stroke-width:1.0;"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="752.3262" y="91.7266"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="748.3262" y="95.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.4541" x="755.3262" y="115.7217">topic-event</text>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="752.3262" y="1221.8828"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="748.3262" y="1225.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.4541" x="755.3262" y="1245.8779">topic-event</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.4219" x="855.7803" y="123.7217">Settlement DAO</text>
    <ellipse cx="915.4912" cy="94.7266" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="903.4912" x2="927.4912" y1="108.7266" y2="108.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.4219" x="855.7803" y="1234.8779">Settlement DAO</text>
    <ellipse cx="915.4912" cy="1254.1797" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="903.4912" x2="927.4912" y1="1268.1797" y2="1268.1797"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7363" x="1274.6948" y="123.7217">Central Store</text>
    <path d="M1306.063,74.7266 C1306.063,64.7266 1324.063,64.7266 1324.063,64.7266 C1324.063,64.7266 1342.063,64.7266 1342.063,74.7266 L1342.063,100.7266 C1342.063,110.7266 1324.063,110.7266 1324.063,110.7266 C1324.063,110.7266 1306.063,110.7266 1306.063,100.7266 L1306.063,74.7266 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/>
    <path d="M1306.063,74.7266 C1306.063,84.7266 1324.063,84.7266 1324.063,84.7266 C1324.063,84.7266 1342.063,84.7266 1342.063,74.7266 " fill="none" style="stroke:#181818;stroke-width:1.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7363" x="1274.6948" y="1234.8779">Central Store</text>
    <path d="M1306.063,1248.1797 C1306.063,1238.1797 1324.063,1238.1797 1324.063,1238.1797 C1324.063,1238.1797 1342.063,1238.1797 1342.063,1248.1797 L1342.063,1274.1797 C1342.063,1284.1797 1324.063,1284.1797 1324.063,1284.1797 C1324.063,1284.1797 1306.063,1284.1797 1306.063,1274.1797 L1306.063,1248.1797 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/>
    <path d="M1306.063,1248.1797 C1306.063,1258.1797 1324.063,1258.1797 1324.063,1258.1797 C1324.063,1258.1797 1342.063,1258.1797 1342.063,1248.1797 " fill="none" style="stroke:#181818;stroke-width:1.5;"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="96.3232" y="221.5547"/>
    <rect fill="#FFFFFF" height="1075.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="318.6294" y="137.0234"/>
    <rect fill="#FFFFFF" height="557.2578" style="stroke:#181818;stroke-width:1.0;" width="10" x="910.4912" y="583.6875"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="636.9531"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="787.6172"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="903.1484"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1319.063" y="1012.5469"/>
    <path d="M10,144.0234 L319.7163,144.0234 L319.7163,151.1563 L309.7163,161.1563 L10,161.1563 L10,144.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="1061.8594" style="stroke:#000000;stroke-width:1.5;" width="1502.7437" x="10" y="144.0234"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="264.7163" x="25" y="157.0903">Settlement Model Handler Consume</text>
    <path d="M20,168.1563 L84.4429,168.1563 L84.4429,175.2891 L74.4429,185.2891 L20,185.2891 L20,168.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="1030.7266" style="stroke:#000000;stroke-width:1.5;" width="1482.7437" x="20" y="168.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="181.2231">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167.3633" x="99.4429" y="180.3667">[Consume Single Message]</text>
    <polygon fill="#181818" points="117.3232,217.5547,107.3232,221.5547,117.3232,225.5547,113.3232,221.5547" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="111.3232" x2="317.6294" y1="221.5547" y2="221.5547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="123.3232" y="208.9224">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.2607" x="136.3687" y="201.356">Consume settlement model</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.582" x="136.3687" y="216.4888">event message</text>
    <path d="M238.5898,266.5547 L325.5415,266.5547 L325.5415,273.6875 L315.5415,283.6875 L238.5898,283.6875 L238.5898,266.5547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="105.5313" style="stroke:#000000;stroke-width:1.5;" width="568.4634" x="238.5898" y="266.5547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41.9517" x="253.5898" y="279.6216">break</text>
    <path d="M248.5898,290.6875 L400.6113,290.6875 L400.6113,297.8203 L390.6113,307.8203 L248.5898,307.8203 L248.5898,290.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="74.3984" style="stroke:#000000;stroke-width:1.5;" width="548.4634" x="248.5898" y="290.6875"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.0215" x="263.5898" y="303.7544">Validate Event</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="328.6294" x2="370.6294" y1="344.0859" y2="344.0859"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="370.6294" x2="370.6294" y1="344.0859" y2="357.0859"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="329.6294" x2="370.6294" y1="357.0859" y2="357.0859"/>
    <polygon fill="#181818" points="338.6294,340.0859,328.6294,344.0859,338.6294,348.0859,334.6294,344.0859" style="stroke:#181818;stroke-width:1.0;"/>
    <polygon fill="#181818" points="339.6294,353.0859,329.6294,357.0859,339.6294,361.0859,335.6294,357.0859" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="335.6294" y="331.4536">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="426.3784" x="348.6748" y="323.8872">Validate event - Rule: type == &apos;setmodel&apos; &amp;&amp; action == &apos;commit&apos;</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="89.2671" x="348.6748" y="339.02">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="442.0742" y="339.02">2001</text>
    <path d="M248.5898,386.0859 L481.4487,386.0859 L481.4487,393.2188 L471.4487,403.2188 L248.5898,403.2188 L248.5898,386.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="154.3359" style="stroke:#000000;stroke-width:1.5;" width="607.1904" x="248.5898" y="386.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="187.8589" x="263.5898" y="399.1528">Persist Event Information</text>
    <polygon fill="#181818" points="785.0532,445.3516,795.0532,449.3516,785.0532,453.3516,789.0532,449.3516" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="328.6294" x2="791.0532" y1="449.3516" y2="449.3516"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="335.6294" y="444.2856">3</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.1147" x="348.6748" y="444.2856">Publish event information</text>
    <rect fill="none" height="53.0703" style="stroke:#000000;stroke-width:1.5;" width="593.1904" x="255.5898" y="457.3516"/>
    <path d="M255.5898,457.3516 L320.5898,457.3516 L320.5898,464.3516 L310.5898,474.3516 L255.5898,474.3516 L255.5898,457.3516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.8838" x="268.5898" y="471.4185">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145.5117" x="479.4292" y="489.4902">Event Handler Consume</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="550.2778" y="503.459"> </text>
    <polygon fill="#181818" points="898.4912,579.6875,908.4912,583.6875,898.4912,587.6875,902.4912,583.6875" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="328.6294" x2="904.4912" y1="583.6875" y2="583.6875"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="335.6294" y="571.0552">4</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.0708" x="348.6748" y="563.4888">Assign transferParicipant state(s)</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="348.6748" y="578.6216">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="434.3364" y="578.6216">2003</text>
    <path d="M825.7803,598.6875 L1000.4248,598.6875 L1000.4248,605.8203 L990.4248,615.8203 L825.7803,615.8203 L825.7803,598.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="514.125" style="stroke:#000000;stroke-width:1.5;" width="666.9634" x="825.7803" y="598.6875"/>
    <text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.6445" x="840.7803" y="611.7544">DB TRANSACTION</text>
    <polygon fill="#181818" points="1307.063,632.9531,1317.063,636.9531,1307.063,640.9531,1311.063,636.9531" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="920.4912" x2="1313.063" y1="636.9531" y2="636.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="927.4912" y="631.8872">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.3442" x="940.5366" y="631.8872">Fetch transfer participant entries</text>
    <polygon fill="#FFFFE0" points="1261,649.9531,1386,649.9531,1396,660.9531,1386,672.9531,1261,672.9531,1251,660.9531,1261,649.9531" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.5132" x="1263" y="666.02">transferParticipant</text>
    <polygon fill="#181818" points="931.4912,695.2188,921.4912,699.2188,931.4912,703.2188,927.4912,699.2188" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="925.4912" x2="1323.063" y1="699.2188" y2="699.2188"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="937.4912" y="694.1528">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.9512" x="950.5366" y="694.1528">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="199.2847" x="998.6201" y="694.1528">transferParticipantRecords</text>
    <path d="M835.7803,714.2188 L912.4043,714.2188 L912.4043,721.3516 L902.4043,731.3516 L835.7803,731.3516 L835.7803,714.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="391.5938" style="stroke:#000000;stroke-width:1.5;" width="646.9634" x="835.7803" y="714.2188"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="850.7803" y="727.2856">loop</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="183.4873" x="927.4043" y="726.4292">[for each transferParticipant]</text>
    <path d="M925,736.3516 L925,761.3516 L1237,761.3516 L1237,746.3516 L1227,736.3516 L925,736.3516 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M1227,736.3516 L1227,746.3516 L1237,746.3516 L1227,736.3516 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291.4399" x="931" y="753.4185">Settlement models caching to be considered</text>
    <polygon fill="#181818" points="1307.063,783.6172,1317.063,787.6172,1307.063,791.6172,1311.063,787.6172" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="920.4912" x2="1313.063" y1="787.6172" y2="787.6172"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="927.4912" y="782.5513">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="336.5337" x="940.5366" y="782.5513">Get settlement model by currency and ledger entry</text>
    <polygon fill="#FFFFE0" points="1267,800.6172,1380,800.6172,1390,811.6172,1380,823.6172,1267,823.6172,1257,811.6172,1267,800.6172" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.605" x="1269" y="816.6841">settlementModel</text>
    <polygon fill="#181818" points="931.4912,845.8828,921.4912,849.8828,931.4912,853.8828,927.4912,849.8828" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="925.4912" x2="1323.063" y1="849.8828" y2="849.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="937.4912" y="844.8169">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43.9512" x="950.5366" y="844.8169">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124.5347" x="998.6201" y="844.8169">settlementModel</text>
    <path d="M845.7803,864.8828 L915.2314,864.8828 L915.2314,872.0156 L905.2314,882.0156 L845.7803,882.0156 L845.7803,864.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="233.9297" style="stroke:#000000;stroke-width:1.5;" width="626.9634" x="845.7803" y="864.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4512" x="860.7803" y="877.9497">opt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="537.5122" x="930.2314" y="877.0933">[settlementModel.delay == &apos;IMMEDIATE&apos; &amp;&amp; settlementModel.granularity == &apos;GROSS&apos;]</text>
    <polygon fill="#181818" points="1307.063,899.1484,1317.063,903.1484,1307.063,907.1484,1311.063,903.1484" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="920.4912" x2="1313.063" y1="903.1484" y2="903.1484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="927.4912" y="898.0825">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="366.5264" x="940.5366" y="898.0825">Set states: CLOSED-&gt;PENDING_SETTLEMENT-&gt;SETTLED</text>
    <polygon fill="#FFFFE0" points="1219,946.1484,1428,946.1484,1438,965.1484,1428,984.1484,1219,984.1484,1209,965.1484,1219,946.1484" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.6958" x="1221" y="962.2153">transferParticipantStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.5132" x="1221" y="977.3481">transferParticipant</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="845.7803" x2="1472.7437" y1="990.4141" y2="990.4141"/>
    <polygon fill="#181818" points="1307.063,1008.5469,1317.063,1012.5469,1307.063,1016.5469,1311.063,1012.5469" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="920.4912" x2="1313.063" y1="1012.5469" y2="1012.5469"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="927.4912" y="1007.481">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.9336" x="949.582" y="1007.481">Set state: OPEN</text>
    <polygon fill="#FFFFE0" points="1219,1055.5469,1428,1055.5469,1438,1074.5469,1428,1093.5469,1219,1093.5469,1209,1074.5469,1219,1055.5469" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.6958" x="1221" y="1071.6138">transferParticipantStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.5132" x="1221" y="1086.7466">transferParticipant</text>
    <polygon fill="#181818" points="339.6294,1136.9453,329.6294,1140.9453,339.6294,1144.9453,335.6294,1140.9453" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="333.6294" x2="914.4912" y1="1140.9453" y2="1140.9453"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="345.6294" y="1135.8794">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="367.7202" y="1135.8794">Return success</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1502.7437" y1="1149.9453" y2="1149.9453"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170.6987" x="25" y="1160.1558">[Consume Batch Messages]</text>
    <path d="M90,1168.75 L90,1193.75 L312,1193.75 L312,1178.75 L302,1168.75 L90,1168.75 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M302,1168.75 L302,1178.75 L312,1178.75 L302,1168.75 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.8682" x="96" y="1185.8169">To be delivered by future story</text>
  </g>
</svg>
