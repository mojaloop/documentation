<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1523px" preserveAspectRatio="none" style="width:1546px;height:1523px;background:#FFFFFF;" version="1.1" viewBox="0 0 1546 1523" width="1546px" zoomAndPan="magnify">
  <title>1.3.2. Fulfil Position Handler Consume</title>
  <defs/>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="303.3721" x="622.8945" y="27.9951">1.3.2. Fulfil Position Handler Consume</text>
    <rect fill="#FFFFE0" height="1467.2969" style="stroke:#181818;stroke-width:0.5;" width="1296.8682" x="26" y="43.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112.0361" x="618.416" y="55.3638">Central Service</text>
    <rect fill="#FFFFFF" height="1300.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="85.292" y="134.7266"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="513.1333" y="1390.2969"/>
    <rect fill="#FFFFFF" height="135.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="645.6841" y="195.125"/>
    <rect fill="#FFFFFF" height="499.3906" style="stroke:#181818;stroke-width:1.0;" width="10" x="762.0356" y="456.4531"/>
    <rect fill="#FFFFFF" height="77.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="224.2578"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="509.7188"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="643.25"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="750.6484"/>
    <rect fill="none" height="1286.5703" style="stroke:#000000;stroke-width:1.5;" width="1530.1611" x="10" y="141.7266"/>
    <rect fill="none" height="560.7891" style="stroke:#000000;stroke-width:1.5;" width="1510.1611" x="20" y="403.0547"/>
    <rect fill="none" height="456.2578" style="stroke:#000000;stroke-width:1.5;" width="821.0591" x="699.1021" y="471.4531"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="90" x2="90" y1="124.7266" y2="1445.2969"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="518.0005" x2="518.0005" y1="124.7266" y2="1445.2969"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="650.2661" x2="650.2661" y1="124.7266" y2="1445.2969"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="766.1021" x2="766.1021" y1="124.7266" y2="1445.2969"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1269.1318" x2="1269.1318" y1="124.7266" y2="1445.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.584" x="30" y="121.4248">Position Handler</text>
    <ellipse cx="90.292" cy="92.4297" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <polygon fill="#181818" points="86.292,80.4297,92.292,75.4297,90.292,80.4297,92.292,85.4297,86.292,80.4297" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.584" x="30" y="1457.292">Position Handler</text>
    <ellipse cx="90.292" cy="1476.5938" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <polygon fill="#181818" points="86.292,1464.5938,92.292,1459.5938,90.292,1464.5938,92.292,1469.5938,86.292,1464.5938" style="stroke:#181818;stroke-width:1.0;"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="144.2656" x="448.0005" y="89.4297"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="144.2656" x="444.0005" y="93.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.2656" x="451.0005" y="113.4248">Notifications-Topic</text>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="144.2656" x="448.0005" y="1444.2969"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="144.2656" x="444.0005" y="1448.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130.2656" x="451.0005" y="1468.292">Notifications-Topic</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.8359" x="602.2661" y="121.4248">Position DAO</text>
    <ellipse cx="650.6841" cy="92.4297" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="638.6841" x2="662.6841" y1="106.4297" y2="106.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.8359" x="602.2661" y="1457.292">Position DAO</text>
    <ellipse cx="650.6841" cy="1476.5938" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="638.6841" x2="662.6841" y1="1490.5938" y2="1490.5938"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.8672" x="709.1021" y="121.4248">Position Facade</text>
    <ellipse cx="767.0356" cy="92.4297" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="755.0356" x2="779.0356" y1="106.4297" y2="106.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.8672" x="709.1021" y="1457.292">Position Facade</text>
    <ellipse cx="767.0356" cy="1476.5938" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="755.0356" x2="779.0356" y1="1490.5938" y2="1490.5938"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7363" x="1220.1318" y="121.4248">Central Store</text>
    <path d="M1251.5,72.4297 C1251.5,62.4297 1269.5,62.4297 1269.5,62.4297 C1269.5,62.4297 1287.5,62.4297 1287.5,72.4297 L1287.5,98.4297 C1287.5,108.4297 1269.5,108.4297 1269.5,108.4297 C1269.5,108.4297 1251.5,108.4297 1251.5,98.4297 L1251.5,72.4297 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/>
    <path d="M1251.5,72.4297 C1251.5,82.4297 1269.5,82.4297 1269.5,82.4297 C1269.5,82.4297 1287.5,82.4297 1287.5,72.4297 " fill="none" style="stroke:#181818;stroke-width:1.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7363" x="1220.1318" y="1457.292">Central Store</text>
    <path d="M1251.5,1470.5938 C1251.5,1460.5938 1269.5,1460.5938 1269.5,1460.5938 C1269.5,1460.5938 1287.5,1460.5938 1287.5,1470.5938 L1287.5,1496.5938 C1287.5,1506.5938 1269.5,1506.5938 1269.5,1506.5938 C1269.5,1506.5938 1251.5,1506.5938 1251.5,1496.5938 L1251.5,1470.5938 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/>
    <path d="M1251.5,1470.5938 C1251.5,1480.5938 1269.5,1480.5938 1269.5,1480.5938 C1269.5,1480.5938 1287.5,1480.5938 1287.5,1470.5938 " fill="none" style="stroke:#181818;stroke-width:1.5;"/>
    <rect fill="#FFFFFF" height="1300.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="85.292" y="134.7266"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="513.1333" y="1390.2969"/>
    <rect fill="#FFFFFF" height="135.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="645.6841" y="195.125"/>
    <rect fill="#FFFFFF" height="499.3906" style="stroke:#181818;stroke-width:1.0;" width="10" x="762.0356" y="456.4531"/>
    <rect fill="#FFFFFF" height="77.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="224.2578"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="509.7188"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="643.25"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1264.5" y="750.6484"/>
    <path d="M10,141.7266 L290.2251,141.7266 L290.2251,148.8594 L280.2251,158.8594 L10,158.8594 L10,141.7266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="1286.5703" style="stroke:#000000;stroke-width:1.5;" width="1530.1611" x="10" y="141.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="235.2251" x="25" y="154.7935">Fulfil Position Handler Consume</text>
    <polygon fill="#181818" points="633.6841,191.125,643.6841,195.125,633.6841,199.125,637.6841,195.125" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="95.292" x2="639.6841" y1="195.125" y2="195.125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="102.292" y="182.4927">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271.8638" x="115.3374" y="174.9263">Request current state of transfer from DB</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="115.3374" y="190.0591">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="200.999" y="190.0591">2003</text>
    <polygon fill="#181818" points="1252.5,220.2578,1262.5,224.2578,1252.5,228.2578,1256.5,224.2578" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="655.6841" x2="1258.5" y1="224.2578" y2="224.2578"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="662.6841" y="219.1919">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.2476" x="675.7295" y="219.1919">Retrieve current state of transfer from DB</text>
    <polygon fill="#FFFFE0" points="1199,237.2578,1338,237.2578,1348,256.2578,1338,275.2578,1199,275.2578,1189,256.2578,1199,237.2578" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.5225" x="1201" y="253.3247">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.5132" x="1201" y="268.4575">transferParticipant</text>
    <polygon fill="#181818" points="666.6841,297.6563,656.6841,301.6563,666.6841,305.6563,662.6841,301.6563" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="660.6841" x2="1268.5" y1="301.6563" y2="301.6563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="672.6841" y="296.5903">3</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262.4248" x="685.7295" y="296.5903">Return current state of transfer from DB</text>
    <polygon fill="#181818" points="106.292,326.7891,96.292,330.7891,106.292,334.7891,102.292,330.7891" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="100.292" x2="649.6841" y1="330.7891" y2="330.7891"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="112.292" y="325.7231">4</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262.4248" x="125.3374" y="325.7231">Return current state of transfer from DB</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="95.292" x2="137.292" y1="375.0547" y2="375.0547"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="137.292" x2="137.292" y1="375.0547" y2="388.0547"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="96.292" x2="137.292" y1="388.0547" y2="388.0547"/>
    <polygon fill="#181818" points="105.292,371.0547,95.292,375.0547,105.292,379.0547,101.292,375.0547" style="stroke:#181818;stroke-width:1.0;"/>
    <polygon fill="#181818" points="106.292,384.0547,96.292,388.0547,106.292,392.0547,102.292,388.0547" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="102.292" y="362.4224">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380.7959" x="115.3374" y="354.856">Validate current state (transferState is &apos;RECEIVED-FULFIL&apos;)</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="115.3374" y="369.9888">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="200.999" y="369.9888">2001</text>
    <path d="M20,403.0547 L810.1387,403.0547 L810.1387,410.1875 L800.1387,420.1875 L20,420.1875 L20,403.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="560.7891" style="stroke:#000000;stroke-width:1.5;" width="1510.1611" x="20" y="403.0547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="745.1387" x="35" y="416.1216">Persist Position change and Transfer State (with transferState=&apos;COMMITTED&apos; on position check pass)</text>
    <polygon fill="#181818" points="750.0356,452.4531,760.0356,456.4531,750.0356,460.4531,754.0356,456.4531" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="95.292" x2="756.0356" y1="456.4531" y2="456.4531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="102.292" y="443.8208">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320.7534" x="115.3374" y="436.2544">Request to persist latest position and state to DB</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="115.3374" y="451.3872">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="200.999" y="451.3872">2003</text>
    <path d="M699.1021,471.4531 L873.7466,471.4531 L873.7466,478.5859 L863.7466,488.5859 L699.1021,488.5859 L699.1021,471.4531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="456.2578" style="stroke:#000000;stroke-width:1.5;" width="821.0591" x="699.1021" y="471.4531"/>
    <text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.6445" x="714.1021" y="484.52">DB TRANSACTION</text>
    <polygon fill="#181818" points="1252.5,505.7188,1262.5,509.7188,1252.5,513.7188,1256.5,509.7188" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="772.0356" x2="1258.5" y1="509.7188" y2="509.7188"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="779.0356" y="504.6528">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="416.3301" x="792.0811" y="504.6528">Select participantPosition.value FOR UPDATE from DB for Payee</text>
    <polygon fill="#FFFFE0" points="1206,522.7188,1331,522.7188,1341,533.7188,1331,545.7188,1206,545.7188,1196,533.7188,1206,522.7188" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.6655" x="1208" y="538.7856">participantPosition</text>
    <polygon fill="#181818" points="783.0356,567.9844,773.0356,571.9844,783.0356,575.9844,779.0356,571.9844" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="777.0356" x2="1268.5" y1="571.9844" y2="571.9844"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="789.0356" y="566.9185">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332.7568" x="802.0811" y="566.9185">Return participantPosition.value from DB for Payee</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="772.0356" x2="814.0356" y1="601.1172" y2="601.1172"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="814.0356" x2="814.0356" y1="601.1172" y2="614.1172"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="773.0356" x2="814.0356" y1="614.1172" y2="614.1172"/>
    <polygon fill="#181818" points="782.0356,597.1172,772.0356,601.1172,782.0356,605.1172,778.0356,601.1172" style="stroke:#181818;stroke-width:1.0;"/>
    <polygon fill="#181818" points="783.0356,610.1172,773.0356,614.1172,783.0356,618.1172,779.0356,614.1172" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="779.0356" y="596.0513">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="101.7212" x="792.0811" y="596.0513">latestPosition</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349.5654" x="897.9346" y="596.0513">= participantPosition.value - payload.amount.amount</text>
    <polygon fill="#181818" points="1252.5,639.25,1262.5,643.25,1252.5,647.25,1256.5,643.25" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="772.0356" x2="1258.5" y1="643.25" y2="643.25"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="779.0356" y="638.1841">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.0713" x="801.1265" y="638.1841">Persist latestPosition to DB for Payee</text>
    <polygon fill="#FFFFE0" points="1169,686.25,1369,686.25,1379,705.25,1369,724.25,1169,724.25,1159,705.25,1169,686.25" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="1171" y="702.3169">UPDATE</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="140.3784" x="1227.5449" y="702.3169">participantPosition</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.8281" x="1171" y="717.4497">SET value = latestPosition</text>
    <polygon fill="#181818" points="1252.5,746.6484,1262.5,750.6484,1252.5,754.6484,1256.5,750.6484" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="772.0356" x2="1258.5" y1="750.6484" y2="750.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="779.0356" y="745.5825">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346.8804" x="801.1265" y="745.5825">Persist transfer state and participant position change</text>
    <polygon fill="#FFFFE0" points="1038,793.6484,1500,793.6484,1510,857.6484,1500,922.6484,1038,922.6484,1028,857.6484,1038,793.6484" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.998" x="1040" y="809.7153">INSERT</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153.6006" x="1091.1304" y="809.7153">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.8232" x="1248.8633" y="809.7153">transferStateId = &apos;COMMITTED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1040" y="824.8481"> </text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.998" x="1040" y="839.981">INSERT</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="195.3237" x="1091.1304" y="839.981">participantPositionChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445.1294" x="1040" y="855.1138">SET participantPositionId = participantPosition.participantPositionId,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="458.1611" x="1040" y="870.2466">transferStateChangeId = transferStateChange.transferStateChangeId,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.4214" x="1040" y="885.3794">value = latestPosition,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="333.1758" x="1040" y="900.5122">reservedValue = participantPosition.reservedValue</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.25" x="1040" y="915.645">createdDate = new Date()</text>
    <polygon fill="#181818" points="106.292,951.8438,96.292,955.8438,106.292,959.8438,102.292,955.8438" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="100.292" x2="766.0356" y1="955.8438" y2="955.8438"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="112.292" y="950.7778">12</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="134.3828" y="950.7778">Return success</text>
    <path d="M100,975.8438 L100,1348.8438 L374,1348.8438 L374,985.8438 L364,975.8438 L100,975.8438 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M364,975.8438 L364,985.8438 L374,985.8438 L364,975.8438 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.3564" x="106" y="992.9106">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="106" y="1008.0435">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218.0356" x="122.5293" y="1023.1763">id: &lt;transferMessage.transferId&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.1738" x="122.5293" y="1038.3091">from: &lt;transferMessage.payerFsp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.3394" x="122.5293" y="1053.4419">to: &lt;transferMessage.payeeFsp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.2197" x="122.5293" y="1068.5747">type: application/json</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5552" x="122.5293" y="1083.7075">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.4482" x="139.0586" y="1098.8403">headers: &lt;transferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.3091" x="139.0586" y="1113.9731">payload: &lt;transferMessage&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="122.5293" y="1129.106">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.79" x="122.5293" y="1144.2388">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.8091" x="139.0586" y="1159.3716">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.6357" x="155.5879" y="1174.5044">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9961" x="155.5879" y="1189.6372">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.0249" x="155.5879" y="1204.77">type: transfer,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7974" x="155.5879" y="1219.9028">action: commit,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3462" x="155.5879" y="1235.0356">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49.7148" x="155.5879" y="1250.1685">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.4004" x="172.1172" y="1265.3013">status: &quot;success&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.1343" x="172.1172" y="1280.4341">code: 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="155.5879" y="1295.5669">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="139.0586" y="1310.6997">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="122.5293" y="1325.8325">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="106" y="1340.9653">}</text>
    <polygon fill="#181818" points="501.1333,1386.2969,511.1333,1390.2969,501.1333,1394.2969,505.1333,1390.2969" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="95.292" x2="507.1333" y1="1390.2969" y2="1390.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="102.292" y="1377.6646">13</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.0405" x="124.3828" y="1370.0981">Publish Transfer event</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="124.3828" y="1385.231">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="210.0444" y="1385.231">2003</text>
  </g>
</svg>
