<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3767px" preserveAspectRatio="none" style="width:1783px;height:3767px;background:#FFFFFF;" version="1.1" viewBox="0 0 1783 3767" width="1783px" zoomAndPan="magnify">
  <title>2.1.1. Fulfil Handler Consume (Success)</title>
  <defs/>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="314.8906" x="735.8159" y="27.9951">2.1.1. Fulfil Handler Consume (Success)</text>
    <rect fill="#FFFFE0" height="3713.9453" style="stroke:#181818;stroke-width:0.5;" width="1665.6284" x="26" y="43.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112.0361" x="802.7961" y="55.3638">Central Service</text>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="68.9897" y="206.4219"/>
    <rect fill="#FFFFFF" height="3542.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.936" y="137.0234"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="915.7305" y="2902.7891"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="915.7305" y="3556.7109"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1171.4048" y="2460.4688"/>
    <rect fill="#FFFFFF" height="120.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1107.7656"/>
    <rect fill="#FFFFFF" height="150.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1435.3594"/>
    <rect fill="#FFFFFF" height="136.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1668.5547"/>
    <rect fill="#FFFFFF" height="121.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1904.6172"/>
    <rect fill="#FFFFFF" height="121.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="3015.9922"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1136.8984"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1464.4922"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1697.6875"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1933.75"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="3045.125"/>
    <rect fill="none" height="3528.625" style="stroke:#000000;stroke-width:1.5;" width="1767.5225" x="10" y="144.0234"/>
    <rect fill="none" height="3497.4922" style="stroke:#000000;stroke-width:1.5;" width="1747.5225" x="20" y="168.1563"/>
    <rect fill="none" height="105.5313" style="stroke:#000000;stroke-width:1.5;" width="513.3447" x="316.896" y="251.4219"/>
    <rect fill="none" height="74.3984" style="stroke:#000000;stroke-width:1.5;" width="493.3447" x="326.896" y="275.5547"/>
    <rect fill="none" height="154.3359" style="stroke:#000000;stroke-width:1.5;" width="778.1855" x="326.896" y="370.9531"/>
    <rect fill="none" height="158.4688" style="stroke:#000000;stroke-width:1.5;" width="1370.7324" x="326.896" y="539.2891"/>
    <rect fill="none" height="2896.9531" style="stroke:#000000;stroke-width:1.5;" width="1460.6265" x="296.896" y="711.7578"/>
    <rect fill="none" height="239.7344" style="stroke:#000000;stroke-width:1.5;" width="1057.5615" x="316.896" y="735.8906"/>
    <rect fill="none" height="166.4688" style="stroke:#000000;stroke-width:1.5;" width="1037.5615" x="326.896" y="802.1563"/>
    <rect fill="none" height="2547.3438" style="stroke:#000000;stroke-width:1.5;" width="1440.6265" x="306.896" y="1054.3672"/>
    <rect fill="none" height="243.3281" style="stroke:#000000;stroke-width:1.5;" width="1414.2202" x="316.896" y="1357.8281"/>
    <rect fill="none" height="212.1953" style="stroke:#000000;stroke-width:1.5;" width="1394.2202" x="326.896" y="1381.9609"/>
    <rect fill="none" height="197.9297" style="stroke:#000000;stroke-width:1.5;" width="1391.5708" x="326.896" y="1615.1563"/>
    <rect fill="none" height="1767.625" style="stroke:#000000;stroke-width:1.5;" width="1420.6265" x="316.896" y="1827.0859"/>
    <rect fill="none" height="182.7969" style="stroke:#000000;stroke-width:1.5;" width="1400.6265" x="326.896" y="1851.2188"/>
    <rect fill="none" height="182.7969" style="stroke:#000000;stroke-width:1.5;" width="1400.6265" x="326.896" y="2962.5938"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="378.896" x2="378.896" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="919.8335" x2="919.8335" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1045.6274" x2="1045.6274" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1176.0815" x2="1176.0815" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1305.728" x2="1305.728" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1412.4575" x2="1412.4575" y1="127.0234" y2="3689.6484"/>
    <line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1637.8921" x2="1637.8921" y1="127.0234" y2="3689.6484"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="83.9795" x="34" y="91.7266"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="83.9795" x="30" y="95.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.9795" x="37" y="115.7217">topic-fulfil</text>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="83.9795" x="34" y="3688.6484"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="83.9795" x="30" y="3692.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.9795" x="37" y="3712.6436">topic-fulfil</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.0801" x="336.896" y="107.4248">Fulfil Event</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.125" x="348.3735" y="123.7217">Handler</text>
    <ellipse cx="378.936" cy="78.4297" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <polygon fill="#181818" points="374.936,66.4297,380.936,61.4297,378.936,66.4297,380.936,71.4297,374.936,66.4297" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.0801" x="336.896" y="3701.6436">Fulfil Event</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.125" x="348.3735" y="3717.9404">Handler</text>
    <ellipse cx="378.936" cy="3737.2422" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <polygon fill="#181818" points="374.936,3725.2422,380.936,3720.2422,378.936,3725.2422,380.936,3730.2422,374.936,3725.2422" style="stroke:#181818;stroke-width:1.0;"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="129.7939" x="857.8335" y="75.4297"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="129.7939" x="853.8335" y="79.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="898.9404" y="99.4248">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.7939" x="860.8335" y="115.7217">transfer-position</text>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="129.7939" x="857.8335" y="3688.6484"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="129.7939" x="853.8335" y="3692.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="898.9404" y="3712.6436">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.7939" x="860.8335" y="3728.9404">transfer-position</text>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="1001.6274" y="91.7266"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="997.6274" y="95.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.4541" x="1004.6274" y="115.7217">topic-event</text>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="1001.6274" y="3688.6484"/>
    <rect fill="#E2E2F0" height="30.2969" style="stroke:#181818;stroke-width:0.5;" width="93.4541" x="997.6274" y="3692.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.4541" x="1004.6274" y="3712.6436">topic-event</text>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="1109.0815" y="75.4297"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="1105.0815" y="79.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="1154.6147" y="99.4248">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.6465" x="1112.0815" y="115.7217">settlement-model</text>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="1109.0815" y="3688.6484"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="138.6465" x="1105.0815" y="3692.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="1154.6147" y="3712.6436">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.6465" x="1112.0815" y="3728.9404">settlement-model</text>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="92.7295" x="1261.728" y="75.4297"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="92.7295" x="1257.728" y="79.4297"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="1284.3027" y="99.4248">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.7295" x="1264.728" y="115.7217">notification</text>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="92.7295" x="1261.728" y="3688.6484"/>
    <rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="92.7295" x="1257.728" y="3692.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5801" x="1284.3027" y="3712.6436">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.7295" x="1264.728" y="3728.9404">notification</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.8359" x="1364.4575" y="123.7217">Position DAO</text>
    <ellipse cx="1412.8755" cy="94.7266" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="1400.8755" x2="1424.8755" y1="108.7266" y2="108.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.8359" x="1364.4575" y="3701.6436">Position DAO</text>
    <ellipse cx="1412.8755" cy="3720.9453" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/>
    <line style="stroke:#181818;stroke-width:0.5;" x1="1400.8755" x2="1424.8755" y1="3734.9453" y2="3734.9453"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7363" x="1588.8921" y="123.7217">Central Store</text>
    <path d="M1620.2603,74.7266 C1620.2603,64.7266 1638.2603,64.7266 1638.2603,64.7266 C1638.2603,64.7266 1656.2603,64.7266 1656.2603,74.7266 L1656.2603,100.7266 C1656.2603,110.7266 1638.2603,110.7266 1638.2603,110.7266 C1638.2603,110.7266 1620.2603,110.7266 1620.2603,100.7266 L1620.2603,74.7266 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/>
    <path d="M1620.2603,74.7266 C1620.2603,84.7266 1638.2603,84.7266 1638.2603,84.7266 C1638.2603,84.7266 1656.2603,84.7266 1656.2603,74.7266 " fill="none" style="stroke:#181818;stroke-width:1.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.7363" x="1588.8921" y="3701.6436">Central Store</text>
    <path d="M1620.2603,3714.9453 C1620.2603,3704.9453 1638.2603,3704.9453 1638.2603,3704.9453 C1638.2603,3704.9453 1656.2603,3704.9453 1656.2603,3714.9453 L1656.2603,3740.9453 C1656.2603,3750.9453 1638.2603,3750.9453 1638.2603,3750.9453 C1638.2603,3750.9453 1620.2603,3750.9453 1620.2603,3740.9453 L1620.2603,3714.9453 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/>
    <path d="M1620.2603,3714.9453 C1620.2603,3724.9453 1638.2603,3724.9453 1638.2603,3724.9453 C1638.2603,3724.9453 1656.2603,3724.9453 1656.2603,3714.9453 " fill="none" style="stroke:#181818;stroke-width:1.5;"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="68.9897" y="206.4219"/>
    <rect fill="#FFFFFF" height="3542.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.936" y="137.0234"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="915.7305" y="2902.7891"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="915.7305" y="3556.7109"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1171.4048" y="2460.4688"/>
    <rect fill="#FFFFFF" height="120.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1107.7656"/>
    <rect fill="#FFFFFF" height="150.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1435.3594"/>
    <rect fill="#FFFFFF" height="136.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1668.5547"/>
    <rect fill="#FFFFFF" height="121.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="1904.6172"/>
    <rect fill="#FFFFFF" height="121.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1407.8755" y="3015.9922"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1136.8984"/>
    <rect fill="#FFFFFF" height="62.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1464.4922"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1697.6875"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="1933.75"/>
    <rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1633.2603" y="3045.125"/>
    <path d="M10,144.0234 L300.9209,144.0234 L300.9209,151.1563 L290.9209,161.1563 L10,161.1563 L10,144.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="3528.625" style="stroke:#000000;stroke-width:1.5;" width="1767.5225" x="10" y="144.0234"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="245.9209" x="25" y="157.0903">Fulfil Handler Consume (Success)</text>
    <path d="M20,168.1563 L84.4429,168.1563 L84.4429,175.2891 L74.4429,185.2891 L20,185.2891 L20,168.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="3497.4922" style="stroke:#000000;stroke-width:1.5;" width="1747.5225" x="20" y="168.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="181.2231">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167.3633" x="99.4429" y="180.3667">[Consume Single Message]</text>
    <polygon fill="#181818" points="89.9897,202.4219,79.9897,206.4219,89.9897,210.4219,85.9897,206.4219" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="83.9897" x2="372.936" y1="206.4219" y2="206.4219"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="95.9897" y="201.356">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262.9009" x="109.0352" y="201.356">Consume Fulfil event message for Payer</text>
    <path d="M316.896,251.4219 L403.8477,251.4219 L403.8477,258.5547 L393.8477,268.5547 L316.896,268.5547 L316.896,251.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="105.5313" style="stroke:#000000;stroke-width:1.5;" width="513.3447" x="316.896" y="251.4219"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41.9517" x="331.896" y="264.4888">break</text>
    <path d="M326.896,275.5547 L478.9175,275.5547 L478.9175,282.6875 L468.9175,292.6875 L326.896,292.6875 L326.896,275.5547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="74.3984" style="stroke:#000000;stroke-width:1.5;" width="493.3447" x="326.896" y="275.5547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.0215" x="341.896" y="288.6216">Validate Event</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="425.936" y1="328.9531" y2="328.9531"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="425.936" x2="425.936" y1="328.9531" y2="341.9531"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="384.936" x2="425.936" y1="341.9531" y2="341.9531"/>
    <polygon fill="#181818" points="393.936,324.9531,383.936,328.9531,393.936,332.9531,389.936,328.9531" style="stroke:#181818;stroke-width:1.0;"/>
    <polygon fill="#181818" points="394.936,337.9531,384.936,341.9531,394.936,345.9531,390.936,341.9531" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="390.936" y="316.3208">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="394.2593" x="403.9814" y="308.7544">Validate event - Rule: type == &apos;fulfil&apos; &amp;&amp; action == &apos;commit&apos;</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="89.2671" x="403.9814" y="323.8872">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="497.3809" y="323.8872">2001</text>
    <path d="M326.896,370.9531 L559.7549,370.9531 L559.7549,378.0859 L549.7549,388.0859 L326.896,388.0859 L326.896,370.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="154.3359" style="stroke:#000000;stroke-width:1.5;" width="778.1855" x="326.896" y="370.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="187.8589" x="341.896" y="384.02">Persist Event Information</text>
    <polygon fill="#181818" points="1034.3545,430.2188,1044.3545,434.2188,1034.3545,438.2188,1038.3545,434.2188" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1040.3545" y1="434.2188" y2="434.2188"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="390.936" y="429.1528">3</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.1147" x="403.9814" y="429.1528">Publish event information</text>
    <rect fill="none" height="53.0703" style="stroke:#000000;stroke-width:1.5;" width="764.1855" x="333.896" y="442.2188"/>
    <path d="M333.896,442.2188 L398.896,442.2188 L398.896,449.2188 L388.896,459.2188 L333.896,459.2188 L333.896,442.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.8838" x="346.896" y="456.2856">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="145.5117" x="643.2329" y="474.3574">Event Handler Consume</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="714.0815" y="488.3262"> </text>
    <path d="M326.896,539.2891 L555.54,539.2891 L555.54,546.4219 L545.54,556.4219 L326.896,556.4219 L326.896,539.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="158.4688" style="stroke:#000000;stroke-width:1.5;" width="1370.7324" x="326.896" y="539.2891"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="183.644" x="341.896" y="552.356">Validate Duplicate Check</text>
    <polygon fill="#181818" points="1626.2603,598.5547,1636.2603,602.5547,1626.2603,606.5547,1630.2603,602.5547" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1632.2603" y1="602.5547" y2="602.5547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="390.936" y="597.4888">4</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.5791" x="403.9814" y="597.4888">Request Duplicate Check</text>
    <rect fill="none" height="53.0703" style="stroke:#000000;stroke-width:1.5;" width="1356.7324" x="333.896" y="610.5547"/>
    <path d="M333.896,610.5547 L398.896,610.5547 L398.896,617.5547 L388.896,627.5547 L333.896,627.5547 L333.896,610.5547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.8838" x="346.896" y="624.6216">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="150.9961" x="936.7642" y="642.6934">Request Duplicate Check</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="1010.355" y="656.6621"> </text>
    <polygon fill="#181818" points="394.936,685.7578,384.936,689.7578,394.936,693.7578,390.936,689.7578" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.936" x2="1637.2603" y1="689.7578" y2="689.7578"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="400.936" y="684.6919">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="418.1265" x="413.9814" y="684.6919">Return { hasDuplicateId: Boolean, hasDuplicateHash: Boolean }</text>
    <path d="M296.896,711.7578 L361.3389,711.7578 L361.3389,718.8906 L351.3389,728.8906 L296.896,728.8906 L296.896,711.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="2896.9531" style="stroke:#000000;stroke-width:1.5;" width="1460.6265" x="296.896" y="711.7578"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="311.896" y="724.8247">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="358.5796" x="376.3389" y="723.9683">[hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == TRUE]</text>
    <path d="M316.896,735.8906 L403.8477,735.8906 L403.8477,743.0234 L393.8477,753.0234 L316.896,753.0234 L316.896,735.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="239.7344" style="stroke:#000000;stroke-width:1.5;" width="1057.5615" x="316.896" y="735.8906"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41.9517" x="331.896" y="748.9575">break</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="425.936" y1="774.1563" y2="774.1563"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="425.936" x2="425.936" y1="774.1563" y2="787.1563"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="384.936" x2="425.936" y1="787.1563" y2="787.1563"/>
    <polygon fill="#181818" points="394.936,783.1563,384.936,787.1563,394.936,791.1563,390.936,787.1563" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="390.936" y="769.0903">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320.7344" x="403.9814" y="769.0903">stateRecord = await getTransferState(transferId)</text>
    <path d="M326.896,802.1563 L391.3389,802.1563 L391.3389,809.2891 L381.3389,819.2891 L326.896,819.2891 L326.896,802.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="166.4688" style="stroke:#000000;stroke-width:1.5;" width="1037.5615" x="326.896" y="802.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="341.896" y="815.2231">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="329.8442" x="406.3389" y="814.3667">[endStateList.includes(stateRecord.transferStateId)]</text>
    <rect fill="none" height="53.0703" style="stroke:#000000;stroke-width:1.5;" width="1023.5615" x="333.896" y="844.2891"/>
    <path d="M333.896,844.2891 L398.896,844.2891 L398.896,851.2891 L388.896,861.2891 L333.896,861.2891 L333.896,844.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20.8838" x="346.896" y="858.356">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.6719" x="784.3408" y="876.4277">getTransfer callback</text>
    <text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3.8145" x="843.7695" y="890.3965"> </text>
    <polygon fill="#181818" points="1294.0928,919.4922,1304.0928,923.4922,1294.0928,927.4922,1298.0928,923.4922" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1300.0928" y1="923.4922" y2="923.4922"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="390.936" y="918.4263">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.3306" x="403.9814" y="918.4263">Produce message</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="326.896" x2="1364.4575" y1="932.4922" y2="932.4922"/>
    <path d="M388,938.4922 L388,963.4922 L584,963.4922 L584,948.4922 L574,938.4922 L388,938.4922 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M574,938.4922 L574,948.4922 L584,948.4922 L574,938.4922 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.9888" x="394" y="955.5591">Ignore - resend in progress</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="296.896" x2="1757.5225" y1="983.625" y2="983.625"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="364.6328" x="301.896" y="993.8354">[hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == FALSE]</text>
    <path d="M388,1002.4297 L388,1027.4297 L757,1027.4297 L757,1012.4297 L747,1002.4297 L388,1002.4297 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M747,1002.4297 L747,1012.4297 L757,1012.4297 L747,1002.4297 " fill="#D3D3D3" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348.1626" x="394" y="1019.4966">Validate Prepare Transfer (failure) - Modified Request</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="296.896" x2="1757.5225" y1="1033.5625" y2="1033.5625"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="167.4277" x="301.896" y="1043.7729">[hasDuplicateId == FALSE]</text>
    <path d="M306.896,1054.3672 L645.7861,1054.3672 L645.7861,1061.5 L635.7861,1071.5 L306.896,1071.5 L306.896,1054.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="2547.3438" style="stroke:#000000;stroke-width:1.5;" width="1440.6265" x="306.896" y="1054.3672"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="293.8901" x="321.896" y="1067.4341">Validate and persist Transfer Fulfilment</text>
    <polygon fill="#181818" points="1395.8755,1103.7656,1405.8755,1107.7656,1395.8755,1111.7656,1399.8755,1107.7656" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1401.8755" y1="1107.7656" y2="1107.7656"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="390.936" y="1095.1333">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285.5493" x="403.9814" y="1087.5669">Request information for the validate checks</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="403.9814" y="1102.6997">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="489.6431" y="1102.6997">2003</text>
    <polygon fill="#181818" points="1621.2603,1132.8984,1631.2603,1136.8984,1621.2603,1140.8984,1625.2603,1136.8984" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="1417.8755" x2="1627.2603" y1="1136.8984" y2="1136.8984"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="1424.8755" y="1131.8325">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.0337" x="1437.9209" y="1131.8325">Fetch from database</text>
    <polygon fill="#FFFFE0" points="1610,1149.8984,1665,1149.8984,1675,1160.8984,1665,1172.8984,1610,1172.8984,1600,1160.8984,1610,1149.8984" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51.3398" x="1612" y="1165.9653">transfer</text>
    <polygon fill="#181818" points="1428.8755,1195.1641,1418.8755,1199.1641,1428.8755,1203.1641,1424.8755,1199.1641" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1422.8755" x2="1637.2603" y1="1199.1641" y2="1199.1641"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1434.8755" y="1194.0981">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1456.9663" y="1194.0981"> </text>
    <polygon fill="#181818" points="394.936,1224.2969,384.936,1228.2969,394.936,1232.2969,390.936,1228.2969" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.936" x2="1411.8755" y1="1228.2969" y2="1228.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="400.936" y="1223.231">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.4233" x="423.0269" y="1223.231">Return transfer</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="425.936" y1="1272.5625" y2="1272.5625"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="425.936" x2="425.936" y1="1272.5625" y2="1285.5625"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="384.936" x2="425.936" y1="1285.5625" y2="1285.5625"/>
    <polygon fill="#181818" points="394.936,1281.5625,384.936,1285.5625,394.936,1289.5625,390.936,1285.5625" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="1259.9302">12</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="485.7036" x="413.0269" y="1252.3638">Validate that Transfer.ilpCondition = SHA-256 (content.payload.fulfilment)</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="413.0269" y="1267.4966">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="498.6885" y="1267.4966">2001</text>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="425.936" y1="1329.8281" y2="1329.8281"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="425.936" x2="425.936" y1="1329.8281" y2="1342.8281"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="384.936" x2="425.936" y1="1342.8281" y2="1342.8281"/>
    <polygon fill="#181818" points="394.936,1338.8281,384.936,1342.8281,394.936,1346.8281,390.936,1342.8281" style="stroke:#181818;stroke-width:1.0;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="1317.1958">13</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.3687" x="413.0269" y="1309.6294">Validate expirationDate</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="413.0269" y="1324.7622">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="498.6885" y="1324.7622">3303</text>
    <path d="M316.896,1357.8281 L386.3472,1357.8281 L386.3472,1364.9609 L376.3472,1374.9609 L316.896,1374.9609 L316.896,1357.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="243.3281" style="stroke:#000000;stroke-width:1.5;" width="1414.2202" x="316.896" y="1357.8281"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4512" x="331.896" y="1370.895">opt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="263.7422" x="401.3472" y="1370.0386">[Transfer.ilpCondition validate successful]</text>
    <path d="M326.896,1381.9609 L639.71,1381.9609 L639.71,1389.0938 L629.71,1399.0938 L326.896,1399.0938 L326.896,1381.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="212.1953" style="stroke:#000000;stroke-width:1.5;" width="1394.2202" x="326.896" y="1381.9609"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="267.814" x="341.896" y="1395.0278">Request current Settlement Window</text>
    <polygon fill="#181818" points="1395.8755,1431.3594,1405.8755,1435.3594,1395.8755,1439.3594,1399.8755,1435.3594" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1401.8755" y1="1435.3594" y2="1435.3594"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="1422.7271">14</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="401.8892" x="413.0269" y="1415.1606">Request to retrieve current/latest transfer settlement window</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="413.0269" y="1430.2935">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="498.6885" y="1430.2935">2003</text>
    <polygon fill="#181818" points="1621.2603,1460.4922,1631.2603,1464.4922,1621.2603,1468.4922,1625.2603,1464.4922" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="1417.8755" x2="1627.2603" y1="1464.4922" y2="1464.4922"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1424.8755" y="1459.4263">15</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.2939" x="1446.9663" y="1459.4263">Fetch settlementWindowId</text>
    <polygon fill="#FFFFE0" points="1575,1477.4922,1701,1477.4922,1711,1488.4922,1701,1500.4922,1575,1500.4922,1565,1488.4922,1575,1477.4922" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.1162" x="1577" y="1493.5591">settlementWindow</text>
    <polygon fill="#181818" points="1428.8755,1522.7578,1418.8755,1526.7578,1428.8755,1530.7578,1424.8755,1526.7578" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1422.8755" x2="1637.2603" y1="1526.7578" y2="1526.7578"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1434.8755" y="1521.6919">16</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1456.9663" y="1521.6919"> </text>
    <polygon fill="#181818" points="394.936,1582.1563,384.936,1586.1563,394.936,1590.1563,390.936,1586.1563" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.936" x2="1411.8755" y1="1586.1563" y2="1586.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="400.936" y="1565.9575">17</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497.0596" x="423.0269" y="1550.8247">Return settlementWindowId to be appended during transferFulfilment insert</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41.7612" x="423.0269" y="1565.9575">TODO</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="449.4268" x="464.7881" y="1565.9575">: During settlement design make sure transfers in &apos;RECEIVED-FULFIL&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320.5313" x="423.0269" y="1581.0903">state are updated to the next settlement window</text>
    <path d="M326.896,1615.1563 L499.0903,1615.1563 L499.0903,1622.2891 L489.0903,1632.2891 L326.896,1632.2891 L326.896,1615.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="197.9297" style="stroke:#000000;stroke-width:1.5;" width="1391.5708" x="326.896" y="1615.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="127.1943" x="341.896" y="1628.2231">Persist fulfilment</text>
    <polygon fill="#181818" points="1395.8755,1664.5547,1405.8755,1668.5547,1395.8755,1672.5547,1399.8755,1668.5547" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1401.8755" y1="1668.5547" y2="1668.5547"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="1655.9224">18</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="514.084" x="413.0269" y="1648.356">Persist fulfilment with the result of the above check (transferFulfilment.isValid)</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="413.0269" y="1663.4888">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="498.6885" y="1663.4888">2003</text>
    <polygon fill="#181818" points="1621.2603,1693.6875,1631.2603,1697.6875,1621.2603,1701.6875,1625.2603,1697.6875" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="1417.8755" x2="1627.2603" y1="1697.6875" y2="1697.6875"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1424.8755" y="1692.6216">19</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.0234" x="1446.9663" y="1692.6216">Persist to database</text>
    <polygon fill="#FFFFE0" points="1578,1740.6875,1698,1740.6875,1708,1759.6875,1698,1778.6875,1578,1778.6875,1568,1759.6875,1578,1740.6875" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.4668" x="1580" y="1756.7544">transferFulfilment</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.1592" x="1580" y="1771.8872">transferExtension</text>
    <polygon fill="#181818" points="394.936,1801.0859,384.936,1805.0859,394.936,1809.0859,390.936,1805.0859" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.936" x2="1411.8755" y1="1805.0859" y2="1805.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="400.936" y="1800.02">20</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="423.0269" y="1800.02">Return success</text>
    <path d="M316.896,1827.0859 L381.3389,1827.0859 L381.3389,1834.2188 L371.3389,1844.2188 L316.896,1844.2188 L316.896,1827.0859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="1767.625" style="stroke:#000000;stroke-width:1.5;" width="1420.6265" x="316.896" y="1827.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="331.896" y="1840.1528">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="263.7422" x="396.3389" y="1839.2964">[Transfer.ilpCondition validate successful]</text>
    <path d="M326.896,1851.2188 L830.5332,1851.2188 L830.5332,1858.3516 L820.5332,1868.3516 L326.896,1868.3516 L326.896,1851.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="182.7969" style="stroke:#000000;stroke-width:1.5;" width="1400.6265" x="326.896" y="1851.2188"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="458.6372" x="341.896" y="1864.2856">Persist Transfer State (with transferState=&apos;RECEIVED-FULFIL&apos;)</text>
    <polygon fill="#181818" points="1395.8755,1900.6172,1405.8755,1904.6172,1395.8755,1908.6172,1399.8755,1904.6172" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1401.8755" y1="1904.6172" y2="1904.6172"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="1891.9849">21</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.0913" x="413.0269" y="1884.4185">Request to persist transfer state</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="413.0269" y="1899.5513">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="498.6885" y="1899.5513">2003</text>
    <polygon fill="#181818" points="1621.2603,1929.75,1631.2603,1933.75,1621.2603,1937.75,1625.2603,1933.75" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="1417.8755" x2="1627.2603" y1="1933.75" y2="1933.75"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1424.8755" y="1928.6841">22</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9731" x="1446.9663" y="1928.6841">Persist transfer state</text>
    <polygon fill="#FFFFE0" points="1568,1976.75,1707,1976.75,1717,1987.75,1707,1999.75,1568,1999.75,1558,1987.75,1568,1976.75" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.5225" x="1570" y="1992.8169">transferStateChange</text>
    <polygon fill="#181818" points="394.936,2022.0156,384.936,2026.0156,394.936,2030.0156,390.936,2026.0156" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.936" x2="1411.8755" y1="2026.0156" y2="2026.0156"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="400.936" y="2020.9497">23</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="423.0269" y="2020.9497">Return success</text>
    <path d="M388,2046.0156 L388,2434.0156 L656,2434.0156 L656,2056.0156 L646,2046.0156 L388,2046.0156 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M646,2046.0156 L646,2056.0156 L656,2056.0156 L646,2046.0156 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.3564" x="394" y="2063.0825">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="394" y="2078.2153">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.1572" x="410.5293" y="2093.3481">id: &lt;id&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.6841" x="410.5293" y="2108.481">from: switch,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.1963" x="410.5293" y="2123.6138">to: switch,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.2197" x="410.5293" y="2138.7466">type: application/json</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5552" x="410.5293" y="2153.8794">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.4785" x="427.0586" y="2169.0122">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.3438" x="443.5879" y="2184.145">transferId: {id}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="427.0586" y="2199.2778">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="410.5293" y="2214.4106">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.79" x="410.5293" y="2229.5435">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.8091" x="427.0586" y="2244.6763">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.6357" x="443.5879" y="2259.8091">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9961" x="443.5879" y="2274.9419">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.0322" x="443.5879" y="2290.0747">type: setmodel,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7974" x="443.5879" y="2305.2075">action: commit,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3462" x="443.5879" y="2320.3403">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49.7148" x="443.5879" y="2335.4731">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.4004" x="460.1172" y="2350.606">status: &quot;success&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.1343" x="460.1172" y="2365.7388">code: 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="443.5879" y="2380.8716">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="427.0586" y="2396.0044">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="410.5293" y="2411.1372">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="394" y="2426.27">}</text>
    <polygon fill="#181818" points="1159.4048,2456.4688,1169.4048,2460.4688,1159.4048,2464.4688,1163.4048,2460.4688" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1165.4048" y1="2460.4688" y2="2460.4688"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="2455.4028">24</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263.7642" x="413.0269" y="2455.4028">Route &amp; Publish settlement model event</text>
    <path d="M388,2503.4688 L388,2876.4688 L707,2876.4688 L707,2513.4688 L697,2503.4688 L388,2503.4688 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M697,2503.4688 L697,2513.4688 L707,2513.4688 L697,2503.4688 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.3564" x="394" y="2520.5356">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="394" y="2535.6685">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.1572" x="410.5293" y="2550.8013">id: &lt;id&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269.6484" x="410.5293" y="2565.9341">from: &lt;transferHeaders.FSPIOP-Source&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281.8232" x="410.5293" y="2581.0669">to: &lt;transferHeaders.FSPIOP-Destination&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.3521" x="410.5293" y="2596.1997">type: application/json,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5552" x="410.5293" y="2611.3325">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.4482" x="427.0586" y="2626.4653">headers: &lt;transferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.3091" x="427.0586" y="2641.5981">payload: &lt;transferMessage&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="410.5293" y="2656.731">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.79" x="410.5293" y="2671.8638">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.8091" x="427.0586" y="2686.9966">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.6357" x="443.5879" y="2702.1294">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9961" x="443.5879" y="2717.2622">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.1772" x="443.5879" y="2732.395">type: position,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.7974" x="443.5879" y="2747.5278">action: commit,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3462" x="443.5879" y="2762.6606">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49.7148" x="443.5879" y="2777.7935">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.4004" x="460.1172" y="2792.9263">status: &quot;success&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.1343" x="460.1172" y="2808.0591">code: 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="443.5879" y="2823.1919">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="427.0586" y="2838.3247">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="410.5293" y="2853.4575">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="394" y="2868.5903">}</text>
    <polygon fill="#181818" points="903.7305,2898.7891,913.7305,2902.7891,903.7305,2906.7891,907.7305,2902.7891" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="909.7305" y1="2902.7891" y2="2902.7891"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="2897.7231">25</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265.2939" x="413.0269" y="2897.7231">Route &amp; Publish Position event for Payee</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316.896" x2="1737.5225" y1="2941.7891" y2="2941.7891"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="245.7168" x="321.896" y="2951.9995">[Validate Fulfil Transfer not successful]</text>
    <path d="M326.896,2962.5938 L773.106,2962.5938 L773.106,2969.7266 L763.106,2979.7266 L326.896,2979.7266 L326.896,2962.5938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="182.7969" style="stroke:#000000;stroke-width:1.5;" width="1400.6265" x="326.896" y="2962.5938"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="401.21" x="341.896" y="2975.6606">Persist Transfer State (with transferState=&apos;ABORTED&apos;)</text>
    <polygon fill="#181818" points="1395.8755,3011.9922,1405.8755,3015.9922,1395.8755,3019.9922,1399.8755,3015.9922" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="1401.8755" y1="3015.9922" y2="3015.9922"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="3003.3599">26</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211.0913" x="413.0269" y="2995.7935">Request to persist transfer state</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81.5293" x="413.0269" y="3010.9263">Error code:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33.084" x="498.6885" y="3010.9263">2003</text>
    <polygon fill="#181818" points="1621.2603,3041.125,1631.2603,3045.125,1621.2603,3049.125,1625.2603,3045.125" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="1417.8755" x2="1627.2603" y1="3045.125" y2="3045.125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1424.8755" y="3040.0591">27</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.9731" x="1446.9663" y="3040.0591">Persist transfer state</text>
    <polygon fill="#FFFFE0" points="1568,3088.125,1707,3088.125,1717,3099.125,1707,3111.125,1568,3111.125,1558,3099.125,1568,3088.125" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.5225" x="1570" y="3104.1919">transferStateChange</text>
    <polygon fill="#181818" points="394.936,3133.3906,384.936,3137.3906,394.936,3141.3906,390.936,3137.3906" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.936" x2="1411.8755" y1="3137.3906" y2="3137.3906"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="400.936" y="3132.3247">28</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="423.0269" y="3132.3247">Return success</text>
    <path d="M388,3157.3906 L388,3530.3906 L707,3530.3906 L707,3167.3906 L697,3157.3906 L388,3157.3906 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M697,3157.3906 L697,3167.3906 L707,3167.3906 L697,3157.3906 " fill="#FFFF00" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.3564" x="394" y="3174.4575">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="394" y="3189.5903">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.1572" x="410.5293" y="3204.7231">id: &lt;id&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269.6484" x="410.5293" y="3219.856">from: &lt;transferHeaders.FSPIOP-Source&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281.8232" x="410.5293" y="3234.9888">to: &lt;transferHeaders.FSPIOP-Destination&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.3521" x="410.5293" y="3250.1216">type: application/json,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5552" x="410.5293" y="3265.2544">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.4482" x="427.0586" y="3280.3872">headers: &lt;transferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.3091" x="427.0586" y="3295.52">payload: &lt;transferMessage&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="410.5293" y="3310.6528">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.79" x="410.5293" y="3325.7856">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.8091" x="427.0586" y="3340.9185">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.6357" x="443.5879" y="3356.0513">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.9961" x="443.5879" y="3371.1841">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.1772" x="443.5879" y="3386.3169">type: position,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.2739" x="443.5879" y="3401.4497">action: abort,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3462" x="443.5879" y="3416.5825">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49.7148" x="443.5879" y="3431.7153">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.5352" x="460.1172" y="3446.8481">status: &quot;error&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.1343" x="460.1172" y="3461.981">code: 1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="443.5879" y="3477.1138">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="427.0586" y="3492.2466">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="410.5293" y="3507.3794">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="394" y="3522.5122">}</text>
    <polygon fill="#181818" points="903.7305,3552.7109,913.7305,3556.7109,903.7305,3560.7109,907.7305,3556.7109" style="stroke:#181818;stroke-width:1.0;"/>
    <line style="stroke:#181818;stroke-width:1.0;" x1="383.936" x2="909.7305" y1="3556.7109" y2="3556.7109"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="390.936" y="3551.645">29</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262.6406" x="413.0269" y="3551.645">Route &amp; Publish Position event for Payer</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1767.5225" y1="3616.7109" y2="3616.7109"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170.6987" x="25" y="3626.9214">[Consume Batch Messages]</text>
    <path d="M146,3635.5156 L146,3660.5156 L368,3660.5156 L368,3645.5156 L358,3635.5156 L146,3635.5156 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M358,3635.5156 L358,3645.5156 L368,3645.5156 L358,3635.5156 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201.8682" x="152" y="3652.5825">To be delivered by future story</text>
  </g>
</svg>
