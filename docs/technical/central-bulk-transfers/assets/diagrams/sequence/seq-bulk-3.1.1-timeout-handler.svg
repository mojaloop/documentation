<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="5586px" preserveAspectRatio="none" style="width:1749px;height:5586px" version="1.1" viewBox="0 0 1749 5586" width="1749px" zoomAndPan="magnify">
  <defs>
    <filter height="300%" id="f2o40hljxpjg" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
      <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
    </filter>
  </defs>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="475" x="635" y="28.708">3.1.1. Timeout Handler Consume (incl. Bulk Transfer)</text>
    <rect fill="#FFFFE0" height="5539.5234" style="stroke:#A80036;stroke-width:1.0" width="1372.5" x="46" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="676.75" y="53.02">Central Service</text>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="5361.2031" style="stroke:#A80036;stroke-width:1.0" width="10" x="107" y="134.6797"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="353" y="4271.6406"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="353" y="5436.8828"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="479" y="3553.2578"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="714" y="4869.8281"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="287.8594" style="stroke:#A80036;stroke-width:1.0" width="10" x="838.5" y="639.3359"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="135.6641" style="stroke:#A80036;stroke-width:1.0" width="10" x="838.5" y="987.4609"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="1591.8906" style="stroke:#A80036;stroke-width:1.0" width="10" x="838.5" y="1183.3906"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="181.0625" style="stroke:#A80036;stroke-width:1.0" width="10" x="1103.5" y="324.7422"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="122.7969" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="353.875"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="668.4688"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="77.3984" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1016.5938"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1278.7891"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1552.6484"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1856.7734"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="2130.6328"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="380.0547" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="2366.0938"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="5354.2031" style="stroke:#000000;stroke-width:2.0" width="1725" x="10" y="141.6797"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="106.6641" style="stroke:#000000;stroke-width:2.0" width="612.5" x="40" y="165.8125"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="300.5938" style="stroke:#000000;stroke-width:2.0" width="1490" x="30" y="286.4766"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="59.2656" style="stroke:#000000;stroke-width:2.0" width="441" x="40" y="520.8047"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="334.125" style="stroke:#000000;stroke-width:2.0" width="1630" x="40" y="601.0703"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="181.9297" style="stroke:#000000;stroke-width:2.0" width="1528" x="40" y="949.1953"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="1638.1563" style="stroke:#000000;stroke-width:2.0" width="1685" x="40" y="1145.125"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="1139.5703" style="stroke:#000000;stroke-width:2.0" width="929.5" x="785.5" y="1198.3906"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="2691.6016" style="stroke:#000000;stroke-width:2.0" width="795.5" x="20" y="2797.2813"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="2635.4688" style="stroke:#000000;stroke-width:2.0" width="775.5" x="30" y="2846.4141"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="1439.0938" style="stroke:#000000;stroke-width:2.0" width="502.5" x="40" y="2870.5469"/>
    <rect fill="#FFFFFF" height="718.3828" style="stroke:none;stroke-width:1.0" width="502.5" x="40" y="3591.2578"/>
    <rect fill="#FFFFFF" height="1165.2422" style="stroke:none;stroke-width:1.0" width="775.5" x="30" y="4316.6406"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="1136.4375" style="stroke:#000000;stroke-width:2.0" width="755.5" x="40" y="4338.4453"/>
    <rect fill="#FFFFFF" height="567.0547" style="stroke:none;stroke-width:1.0" width="755.5" x="40" y="4907.8281"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="112" x2="112" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="357.5" x2="357.5" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="483.5" x2="483.5" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="592.5" x2="592.5" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="718.5" x2="718.5" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="843.5" x2="843.5" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="1108.5" x2="1108.5" y1="124.6797" y2="5512.8828"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="1366.5" x2="1366.5" y1="124.6797" y2="5512.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="50" y="105.0811">Transfer Timeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="82.5" y="121.3779">Handler</text>
    <ellipse cx="112" cy="76.0859" fill="#FEFECE" filter="url(#f2o40hljxpjg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="108,64.0859,114,59.0859,112,64.0859,114,69.0859,108,64.0859" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="50" y="5524.8779">Transfer Timeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="82.5" y="5541.1748">Handler</text>
    <ellipse cx="112" cy="5560.4766" fill="#FEFECE" filter="url(#f2o40hljxpjg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="108,5548.4766,114,5543.4766,112,5548.4766,114,5553.4766,108,5548.4766" style="stroke:#A80036;stroke-width:1.0"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="127" x="294.5" y="69.0859"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="127" x="290.5" y="73.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="334.5" y="93.0811">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="297.5" y="109.3779">transfer-position</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="127" x="294.5" y="5511.8828"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="127" x="290.5" y="5515.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="334.5" y="5535.8779">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="297.5" y="5552.1748">transfer-position</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="89" x="439.5" y="69.0859"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="89" x="435.5" y="73.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="460.5" y="93.0811">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="442.5" y="109.3779">notification</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="89" x="439.5" y="5511.8828"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="89" x="435.5" y="5515.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="460.5" y="5535.8779">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="442.5" y="5552.1748">notification</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="546.5" y="85.3828"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="542.5" y="89.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="549.5" y="109.3779">topic-event</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="546.5" y="5511.8828"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="542.5" y="5515.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="549.5" y="5535.8779">topic-event</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="125" x="656.5" y="69.0859"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="125" x="652.5" y="73.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="695.5" y="93.0811">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="659.5" y="109.3779">bulk-processing</text>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="125" x="656.5" y="5511.8828"/>
    <rect fill="#FEFECE" filter="url(#f2o40hljxpjg)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="125" x="652.5" y="5515.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="695.5" y="5535.8779">topic-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="659.5" y="5552.1748">bulk-processing</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="795.5" y="121.3779">Position DAO</text>
    <ellipse cx="843.5" cy="92.3828" fill="#FEFECE" filter="url(#f2o40hljxpjg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <line style="stroke:#A80036;stroke-width:2.0" x1="831.5" x2="855.5" y1="106.3828" y2="106.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="795.5" y="5524.8779">Position DAO</text>
    <ellipse cx="843.5" cy="5544.1797" fill="#FEFECE" filter="url(#f2o40hljxpjg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <line style="stroke:#A80036;stroke-width:2.0" x1="831.5" x2="855.5" y1="5558.1797" y2="5558.1797"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1056.5" y="121.3779">Segment DAO</text>
    <ellipse cx="1108.5" cy="92.3828" fill="#FEFECE" filter="url(#f2o40hljxpjg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <line style="stroke:#A80036;stroke-width:2.0" x1="1096.5" x2="1120.5" y1="106.3828" y2="106.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="1056.5" y="5524.8779">Segment DAO</text>
    <ellipse cx="1108.5" cy="5544.1797" fill="#FEFECE" filter="url(#f2o40hljxpjg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <line style="stroke:#A80036;stroke-width:2.0" x1="1096.5" x2="1120.5" y1="5558.1797" y2="5558.1797"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1318.5" y="121.3779">Central Store</text>
    <path d="M1348.5,72.3828 C1348.5,62.3828 1366.5,62.3828 1366.5,62.3828 C1366.5,62.3828 1384.5,62.3828 1384.5,72.3828 L1384.5,98.3828 C1384.5,108.3828 1366.5,108.3828 1366.5,108.3828 C1366.5,108.3828 1348.5,108.3828 1348.5,98.3828 L1348.5,72.3828 " fill="#FEFECE" filter="url(#f2o40hljxpjg)" style="stroke:#000000;stroke-width:1.5"/>
    <path d="M1348.5,72.3828 C1348.5,82.3828 1366.5,82.3828 1366.5,82.3828 C1366.5,82.3828 1384.5,82.3828 1384.5,72.3828 " fill="none" style="stroke:#000000;stroke-width:1.5"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1318.5" y="5524.8779">Central Store</text>
    <path d="M1348.5,5538.1797 C1348.5,5528.1797 1366.5,5528.1797 1366.5,5528.1797 C1366.5,5528.1797 1384.5,5528.1797 1384.5,5538.1797 L1384.5,5564.1797 C1384.5,5574.1797 1366.5,5574.1797 1366.5,5574.1797 C1366.5,5574.1797 1348.5,5574.1797 1348.5,5564.1797 L1348.5,5538.1797 " fill="#FEFECE" filter="url(#f2o40hljxpjg)" style="stroke:#000000;stroke-width:1.5"/>
    <path d="M1348.5,5538.1797 C1348.5,5548.1797 1366.5,5548.1797 1366.5,5548.1797 C1366.5,5548.1797 1384.5,5548.1797 1384.5,5538.1797 " fill="none" style="stroke:#000000;stroke-width:1.5"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="5361.2031" style="stroke:#A80036;stroke-width:1.0" width="10" x="107" y="134.6797"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="353" y="4271.6406"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="353" y="5436.8828"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="479" y="3553.2578"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="714" y="4869.8281"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="287.8594" style="stroke:#A80036;stroke-width:1.0" width="10" x="838.5" y="639.3359"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="135.6641" style="stroke:#A80036;stroke-width:1.0" width="10" x="838.5" y="987.4609"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="1591.8906" style="stroke:#A80036;stroke-width:1.0" width="10" x="838.5" y="1183.3906"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="181.0625" style="stroke:#A80036;stroke-width:1.0" width="10" x="1103.5" y="324.7422"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="122.7969" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="353.875"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="668.4688"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="77.3984" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1016.5938"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1278.7891"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1552.6484"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="1856.7734"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="2130.6328"/>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="380.0547" style="stroke:#A80036;stroke-width:1.0" width="10" x="1361.5" y="2366.0938"/>
    <path d="M10,141.6797 L250,141.6797 L250,148.6797 L240,158.6797 L10,158.6797 L10,141.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="5354.2031" style="stroke:#000000;stroke-width:2.0" width="1725" x="10" y="141.6797"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="25" y="154.7466">Timeout Handler Consume</text>
    <path d="M40,165.8125 L272,165.8125 L272,172.8125 L262,182.8125 L40,182.8125 L40,165.8125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="106.6641" style="stroke:#000000;stroke-width:2.0" width="612.5" x="40" y="165.8125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="55" y="178.8794">Persist Event Information</text>
    <polygon fill="#A80036" points="580.5,200.0781,590.5,204.0781,580.5,208.0781,584.5,204.0781" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="586.5" y1="204.0781" y2="204.0781"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124" y="199.0122">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="137" y="199.0122">Publish event information</text>
    <rect fill="#FFFFFF" filter="url(#f2o40hljxpjg)" height="55.3984" style="stroke:#000000;stroke-width:2.0" width="594.5" x="47" y="212.0781"/>
    <polygon fill="#EEEEEE" points="47,212.0781,113,212.0781,113,219.0781,103,229.0781,47,229.0781,47,212.0781" style="stroke:#000000;stroke-width:2.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="60" y="226.145">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="268.75" y="245.145">Event Handler Consume</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="272.75" y="260.2778"/>
    <path d="M30,286.4766 L635,286.4766 L635,293.4766 L625,303.4766 L30,303.4766 L30,286.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="300.5938" style="stroke:#000000;stroke-width:2.0" width="1490" x="30" y="286.4766"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="560" x="45" y="299.5435">Get previous checkpoint of last record processed (Lower limit for inclusion)</text>
    <polygon fill="#A80036" points="1091.5,320.7422,1101.5,324.7422,1091.5,328.7422,1095.5,324.7422" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="1097.5" y1="324.7422" y2="324.7422"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124" y="319.6763">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="137" y="319.6763">Get last segment as @intervalMin</text>
    <polygon fill="#A80036" points="1349.5,349.875,1359.5,353.875,1349.5,357.875,1353.5,353.875" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="1113.5" x2="1355.5" y1="353.875" y2="353.875"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1120.5" y="348.8091">3</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="1133.5" y="348.8091">Get last segment as @intervalMin</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1233,366.875,1500,366.875,1510,407.875,1500,449.875,1233,449.875,1223,407.875,1233,366.875" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="1235" y="382.9419">SELECT value INTO @intervalMin</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1235" y="398.0747">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="1275" y="398.0747">segment</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1235" y="413.2075">WHERE segmentType = &apos;timeout&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1235" y="428.3403">AND enumeration = 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="1235" y="443.4731">AND tableName = &apos;transferStateChange&apos;</text>
    <polygon fill="#A80036" points="1124.5,472.6719,1114.5,476.6719,1124.5,480.6719,1120.5,476.6719" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="1118.5" x2="1365.5" y1="476.6719" y2="476.6719"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1130.5" y="471.606">4</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1143.5" y="471.606">Return @intervalMin</text>
    <polygon fill="#A80036" points="128,501.8047,118,505.8047,128,509.8047,124,505.8047" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="122" x2="1107.5" y1="505.8047" y2="505.8047"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="134" y="500.7388">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="147" y="500.7388">Return @intervalMin</text>
    <path d="M40,520.8047 L110,520.8047 L110,527.8047 L100,537.8047 L40,537.8047 L40,520.8047 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:2.0" width="441" x="40" y="520.8047"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="55" y="533.8716">opt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="351" x="125" y="533.0151">[@intervalMin IS NULL =&gt; segment record NOT FOUND]</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="159" y1="559.0703" y2="559.0703"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="159" x2="159" y1="559.0703" y2="572.0703"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="118" x2="159" y1="572.0703" y2="572.0703"/>
    <polygon fill="#A80036" points="128,568.0703,118,572.0703,128,576.0703,124,572.0703" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124" y="554.0044">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="137" y="554.0044">Set @intervalMin = 0</text>
    <path d="M40,601.0703 L170,601.0703 L170,608.0703 L160,618.0703 L40,618.0703 L40,601.0703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="334.125" style="stroke:#000000;stroke-width:2.0" width="1630" x="40" y="601.0703"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="55" y="614.1372">Do Cleanup</text>
    <polygon fill="#A80036" points="826.5,635.3359,836.5,639.3359,826.5,643.3359,830.5,639.3359" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="832.5" y1="639.3359" y2="639.3359"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="124" y="634.27">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="137" y="634.27">Clean up transferTimeout from finalised transfers</text>
    <polygon fill="#A80036" points="1349.5,664.4688,1359.5,668.4688,1349.5,672.4688,1353.5,668.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="668.4688" y2="668.4688"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="855.5" y="663.4028">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="868.5" y="663.4028">Clean up transferTimeout from finalised transfers</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1082,711.4688,1650,711.4688,1660,805.4688,1650,900.4688,1082,900.4688,1072,805.4688,1082,711.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="1084" y="727.5356">DELETE tt</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1084" y="742.6685">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1124" y="742.6685">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1246" y="742.6685">AS tt</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="564" x="1084" y="757.8013">JOIN (SELECT tsc.transferId, MAX(tsc.transferStateChangeId) maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1108" y="772.9341">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1148" y="772.9341">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1270" y="772.9341">tt1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1108" y="788.0669">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1138" y="788.0669">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="1296" y="788.0669">tsc</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="1108" y="803.1997">ON tsc.transferId = tt1.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1108" y="818.3325">GROUP BY transferId) ts</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="1084" y="833.4653">ON ts.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1084" y="848.5981">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1114" y="848.5981">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="1272" y="848.5981">tsc</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="1084" y="863.731">ON tsc.transferStateChangeId = ts.maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="459" x="1084" y="878.8638">WHERE tsc.transferStateId IN (&apos;RECEIVED_FULFIL&apos;, &apos;COMMITTED&apos;, &apos;FAILED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="505" x="1100" y="893.9966">, &apos;EXPIRED&apos;, &apos;REJECTED&apos;, &apos;EXPIRED_PREPARED&apos;, &apos;EXPIRED_RESERVED&apos;, &apos;ABORTED&apos;)</text>
    <polygon fill="#A80036" points="128,923.1953,118,927.1953,128,931.1953,124,927.1953" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="122" x2="842.5" y1="927.1953" y2="927.1953"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="134" y="922.1294">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="147" y="922.1294">Return success</text>
    <path d="M40,949.1953 L446,949.1953 L446,956.1953 L436,966.1953 L40,966.1953 L40,949.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="181.9297" style="stroke:#000000;stroke-width:2.0" width="1528" x="40" y="949.1953"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="361" x="55" y="962.2622">Determine IntervalMax (Upper limit for inclusion)</text>
    <polygon fill="#A80036" points="826.5,983.4609,836.5,987.4609,826.5,991.4609,830.5,987.4609" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="832.5" y1="987.4609" y2="987.4609"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="124" y="982.395">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="146" y="982.395">Get last transferStateChangeId as @intervalMax</text>
    <polygon fill="#A80036" points="1349.5,1012.5938,1359.5,1016.5938,1349.5,1020.5938,1353.5,1016.5938" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="1016.5938" y2="1016.5938"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="1011.5278">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="877.5" y="1011.5278">Get last transferStateChangeId as @intervalMax</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1185,1029.5938,1548,1029.5938,1558,1048.5938,1548,1067.5938,1185,1067.5938,1175,1048.5938,1185,1029.5938" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="1187" y="1045.6606">SELECT MAX(transferStateChangeId) INTO @intervalMax</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1187" y="1060.7935">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1227" y="1060.7935">transferStateChange</text>
    <polygon fill="#A80036" points="859.5,1089.9922,849.5,1093.9922,859.5,1097.9922,855.5,1093.9922" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="853.5" x2="1365.5" y1="1093.9922" y2="1093.9922"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="865.5" y="1088.9263">12</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="887.5" y="1088.9263">Return @intervalMax</text>
    <polygon fill="#A80036" points="128,1119.125,118,1123.125,128,1127.125,124,1123.125" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="122" x2="842.5" y1="1123.125" y2="1123.125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="134" y="1118.0591">13</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="156" y="1118.0591">Return @intervalMax</text>
    <path d="M40,1145.125 L427,1145.125 L427,1152.125 L417,1162.125 L40,1162.125 L40,1145.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1638.1563" style="stroke:#000000;stroke-width:2.0" width="1685" x="40" y="1145.125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="342" x="55" y="1158.1919">Prepare data and return the list for expiration</text>
    <polygon fill="#A80036" points="826.5,1179.3906,836.5,1183.3906,826.5,1187.3906,830.5,1183.3906" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="832.5" y1="1183.3906" y2="1183.3906"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="124" y="1178.3247">14</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="146" y="1178.3247">Prepare data and get transfers to be expired</text>
    <path d="M785.5,1198.3906 L958.5,1198.3906 L958.5,1205.3906 L948.5,1215.3906 L785.5,1215.3906 L785.5,1198.3906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1139.5703" style="stroke:#000000;stroke-width:2.0" width="929.5" x="785.5" y="1198.3906"/>
    <text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="800.5" y="1211.4575">DB TRANSACTION</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="890.5" y1="1236.6563" y2="1236.6563"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="890.5" x2="890.5" y1="1236.6563" y2="1249.6563"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="849.5" x2="890.5" y1="1249.6563" y2="1249.6563"/>
    <polygon fill="#A80036" points="859.5,1245.6563,849.5,1249.6563,859.5,1253.6563,855.5,1249.6563" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="1231.5903">15</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="877.5" y="1231.5903">transactionTimestamp</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="1046.5" y="1231.5903">= now()</text>
    <polygon fill="#A80036" points="1349.5,1274.7891,1359.5,1278.7891,1349.5,1282.7891,1353.5,1278.7891" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="1278.7891" y2="1278.7891"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="1273.7231">16</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="877.5" y="1273.7231">Insert all new transfers still in processing state</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1105,1321.7891,1627,1321.7891,1637,1415.7891,1627,1510.7891,1105,1510.7891,1095,1415.7891,1105,1321.7891" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1107" y="1337.856">INSERT INTO</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1190" y="1337.856">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="1308" y="1337.856">(transferId, expirationDate)</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="1107" y="1352.9888">SELECT t.transferId, t.expirationDate</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1107" y="1368.1216">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="1147" y="1368.1216">transfer</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1210" y="1368.1216">t</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="518" x="1107" y="1383.2544">JOIN (SELECT transferId, MAX(transferStateChangeId) maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1131" y="1398.3872">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1171" y="1398.3872">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="1131" y="1413.52">WHERE transferStateChangeId &gt; @intervalMin</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="1131" y="1428.6528">AND transferStateChangeId &lt;= @intervalMax</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1131" y="1443.7856">GROUP BY transferId) ts</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="1107" y="1458.9185">ON ts.transferId = t.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1107" y="1474.0513">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1137" y="1474.0513">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="1295" y="1474.0513">tsc</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="1107" y="1489.1841">ON tsc.transferStateChangeId = ts.maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="414" x="1107" y="1504.3169">WHERE tsc.transferStateId IN (&apos;RECEIVED_PREPARE&apos;, &apos;RESERVED&apos;)</text>
    <polygon fill="#A80036" points="1349.5,1548.6484,1359.5,1552.6484,1349.5,1556.6484,1353.5,1552.6484" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="1552.6484" y2="1552.6484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="1540.0161">17</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="877.5" y="1532.4497">Insert transfer state ABORTED for</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="877.5" y="1547.5825">expired RECEIVED_PREPARE transfers</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1037,1595.6484,1695,1595.6484,1705,1704.6484,1695,1814.6484,1037,1814.6484,1027,1704.6484,1037,1595.6484" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1039" y="1611.7153">INSERT INTO</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1122" y="1611.7153">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="654" x="1039" y="1626.8481">SELECT tt.transferId, &apos;EXPIRED_PREPARED&apos; AS transferStateId, &apos;Aborted by Timeout Handler&apos; AS reason</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1039" y="1641.981">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1079" y="1641.981">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="1201" y="1641.981">tt</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="1039" y="1657.1138">JOIN (</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="458" x="1078" y="1657.1138">-- Following subquery is reused 3 times and may be optimized if needed</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="545" x="1063" y="1672.2466">SELECT tsc1.transferId, MAX(tsc1.transferStateChangeId) maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1063" y="1687.3794">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1103" y="1687.3794">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="1261" y="1687.3794">tsc1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1063" y="1702.5122">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1093" y="1702.5122">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1215" y="1702.5122">tt1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1063" y="1717.645">ON tt1.transferId = tsc1.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1063" y="1732.7778">GROUP BY tsc1.transferId) ts</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="1039" y="1747.9106">ON ts.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1039" y="1763.0435">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1069" y="1763.0435">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="1227" y="1763.0435">tsc</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="1039" y="1778.1763">ON tsc.transferStateChangeId = ts.maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="1039" y="1793.3091">WHERE tt.expirationDate &lt; {transactionTimestamp}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="1039" y="1808.4419">AND tsc.transferStateId = &apos;RECEIVED_PREPARE&apos;</text>
    <polygon fill="#A80036" points="1349.5,1852.7734,1359.5,1856.7734,1349.5,1860.7734,1353.5,1856.7734" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="1856.7734" y2="1856.7734"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="1844.1411">18</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="877.5" y="1836.5747">Insert transfer state EXPIRED for</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="877.5" y="1851.7075">expired RESERVED transfers</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1037,1899.7734,1695,1899.7734,1705,2001.7734,1695,2103.7734,1037,2103.7734,1027,2001.7734,1037,1899.7734" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1039" y="1915.8403">INSERT INTO</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1122" y="1915.8403">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="654" x="1039" y="1930.9731">SELECT tt.transferId, &apos;RESERVED_TIMEOUT&apos; AS transferStateId, &apos;Expired by Timeout Handler&apos; AS reason</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1039" y="1946.106">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1079" y="1946.106">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="1201" y="1946.106">tt</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="580" x="1039" y="1961.2388">JOIN (SELECT tsc1.transferId, MAX(tsc1.transferStateChangeId) maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1063" y="1976.3716">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1103" y="1976.3716">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="1261" y="1976.3716">tsc1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1063" y="1991.5044">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1093" y="1991.5044">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1215" y="1991.5044">tt1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1063" y="2006.6372">ON tt1.transferId = tsc1.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1063" y="2021.77">GROUP BY tsc1.transferId) ts</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="1039" y="2036.9028">ON ts.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1039" y="2052.0356">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1069" y="2052.0356">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="1227" y="2052.0356">tsc</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="1039" y="2067.1685">ON tsc.transferStateChangeId = ts.maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="1039" y="2082.3013">WHERE tt.expirationDate &lt; {transactionTimestamp}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="1039" y="2097.4341">AND tsc.transferStateId = &apos;RESERVED&apos;</text>
    <polygon fill="#A80036" points="1349.5,2126.6328,1359.5,2130.6328,1349.5,2134.6328,1353.5,2130.6328" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="2130.6328" y2="2130.6328"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="2125.5669">19</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="877.5" y="2125.5669">Update segment table to be used for the next run</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1153,2173.6328,1580,2173.6328,1590,2252.6328,1580,2332.6328,1153,2332.6328,1143,2252.6328,1153,2173.6328" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="1155" y="2189.6997">IF @intervalMin = 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1171" y="2204.8325">INSERT</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="1171" y="2219.9653">INTO</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="1205" y="2219.9653">segment</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="1270" y="2219.9653">(segmentType, enumeration, tableName, value)</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="380" x="1171" y="2235.0981">VALUES (&apos;timeout&apos;, 0, &apos;transferStateChange&apos;, @intervalMax)</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1155" y="2250.231">ELSE</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="1171" y="2265.3638">UPDATE</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="1227" y="2265.3638">segment</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="1171" y="2280.4966">SET value = @intervalMax</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1171" y="2295.6294">WHERE segmentType = &apos;timeout&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="1171" y="2310.7622">AND enumeration = 0</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="1171" y="2325.895">AND tableName = &apos;transferStateChange&apos;</text>
    <polygon fill="#A80036" points="1349.5,2362.0938,1359.5,2366.0938,1349.5,2370.0938,1353.5,2366.0938" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="848.5" x2="1355.5" y1="2366.0938" y2="2366.0938"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="855.5" y="2361.0278">20</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="877.5" y="2361.0278">Get list of transfers to be expired with current state</text>
    <polygon fill="#FFFFE0" filter="url(#f2o40hljxpjg)" points="1074,2379.0938,1658,2379.0938,1668,2549.0938,1658,2719.0938,1074,2719.0938,1064,2549.0938,1074,2379.0938" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="492" x="1076" y="2395.1606">SELECT tt.*, tsc.transferStateId, tp1.participantCurrencyId payerParticipantId,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="405" x="1108" y="2410.2935">tp2.participantCurrencyId payeeParticipantId, bta.bulkTransferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1076" y="2425.4263">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1116" y="2425.4263">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="1238" y="2425.4263">tt</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="580" x="1076" y="2440.5591">JOIN (SELECT tsc1.transferId, MAX(tsc1.transferStateChangeId) maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1108" y="2455.6919">FROM</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1148" y="2455.6919">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="1306" y="2455.6919">tsc1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1108" y="2470.8247">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1138" y="2470.8247">transferTimeout</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1260" y="2470.8247">tt1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1108" y="2485.9575">ON tt1.transferId = tsc1.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1108" y="2501.0903">GROUP BY tsc1.transferId) ts</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="1076" y="2516.2231">ON ts.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1076" y="2531.356">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="154" x="1106" y="2531.356">transferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="1264" y="2531.356">tsc</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="1076" y="2546.4888">ON tsc.transferStateChangeId = ts.maxTransferStateChangeId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1076" y="2561.6216">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1106" y="2561.6216">transferParticipant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1250" y="2561.6216">tp1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1076" y="2576.7544">ON tp1.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="1076" y="2591.8872">AND tp1.transferParticipantRoleTypeId = {PAYER_DFSP}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="1076" y="2607.02">AND tp1.ledgerEntryTypeId = {PRINCIPLE_VALUE}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1076" y="2622.1528">JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1106" y="2622.1528">transferParticipant</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1250" y="2622.1528">tp2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1076" y="2637.2856">ON tp2.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="1076" y="2652.4185">AND tp2.transferParticipantRoleTypeId = {PAYEE_DFSP}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="1076" y="2667.5513">AND tp2.ledgerEntryTypeId = {PRINCIPLE_VALUE}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="1076" y="2682.6841">LEFT JOIN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="1139" y="2682.6841">bulkTransferAssociation</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1320" y="2682.6841">bta</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="1076" y="2697.8169">ON bta.transferId = tt.transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="1076" y="2712.9497">WHERE tt.expirationDate &lt; {transactionTimestamp}</text>
    <polygon fill="#A80036" points="859.5,2742.1484,849.5,2746.1484,859.5,2750.1484,855.5,2746.1484" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="853.5" x2="1365.5" y1="2746.1484" y2="2746.1484"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="865.5" y="2741.0825">21</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="887.5" y="2741.0825">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="933.5" y="2741.0825">transferTimeoutList</text>
    <polygon fill="#A80036" points="128,2771.2813,118,2775.2813,128,2779.2813,124,2775.2813" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="122" x2="842.5" y1="2775.2813" y2="2775.2813"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="134" y="2770.2153">22</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="156" y="2770.2153">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="202" y="2770.2153">transferTimeoutList</text>
    <path d="M20,2797.2813 L97,2797.2813 L97,2804.2813 L87,2814.2813 L20,2814.2813 L20,2797.2813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="2691.6016" style="stroke:#000000;stroke-width:2.0" width="795.5" x="20" y="2797.2813"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="35" y="2810.3481">loop</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="112" y="2809.4917">[for each transfer in the list]</text>
    <path d="M30,2846.4141 L94,2846.4141 L94,2853.4141 L84,2863.4141 L30,2863.4141 L30,2846.4141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="2635.4688" style="stroke:#000000;stroke-width:2.0" width="775.5" x="30" y="2846.4141"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="45" y="2859.481">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="412" x="109" y="2858.6245">[transferTimeoutList.bulkTransferId == NULL (Regular Transfer)]</text>
    <path d="M40,2870.5469 L104,2870.5469 L104,2877.5469 L94,2887.5469 L40,2887.5469 L40,2870.5469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1439.0938" style="stroke:#000000;stroke-width:2.0" width="502.5" x="40" y="2870.5469"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="55" y="2883.6138">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="263" x="119" y="2882.7573">[transferStateId == &apos;RECEIVED_PREPARE&apos;]</text>
    <path d="M122,2892.6797 L122,3522.6797 L526,3522.6797 L526,2902.6797 L516,2892.6797 L122,2892.6797 " fill="#FFFF00" filter="url(#f2o40hljxpjg)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M516,2892.6797 L516,2902.6797 L526,2902.6797 L516,2892.6797 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="128" y="2909.7466">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="2924.8794">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="144" y="2940.0122">id: &lt;transferId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="144" y="2955.145">from: &lt;payerParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="144" y="2970.2778">to: &lt;payeeParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="144" y="2985.4106">type: application/json,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="144" y="3000.5435">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="160" y="3015.6763">headers: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="176" y="3030.8091">Content-Length: &lt;Content-Length&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="176" y="3045.9419">Content-Type: &lt;Content-Type&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="176" y="3061.0747">Date: &lt;Date&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="176" y="3076.2075">X-Forwarded-For: &lt;X-Forwarded-For&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="176" y="3091.3403">FSPIOP-Source: &lt;FSPIOP-Source&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="176" y="3106.4731">FSPIOP-Destination: &lt;FSPIOP-Destination&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="176" y="3121.606">FSPIOP-Encryption: &lt;FSPIOP-Encryption&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="176" y="3136.7388">FSPIOP-Signature: &lt;FSPIOP-Signature&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="176" y="3151.8716">FSPIOP-URI: &lt;FSPIOP-URI&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="300" x="176" y="3167.0044">FSPIOP-HTTP-Method: &lt;FSPIOP-HTTP-Method&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="160" y="3182.1372">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="160" y="3197.27">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="176" y="3212.4028">&quot;errorInformation&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="192" y="3227.5356">&quot;errorCode&quot;: 3303,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="192" y="3242.6685">&quot;errorDescription&quot;: &quot;Transfer expired&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="192" y="3257.8013">&quot;extensionList&quot;: &lt;transferMessage.extensionList&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="3272.9341">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="3288.0669">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="144" y="3303.1997">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="144" y="3318.3325">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="160" y="3333.4653">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="176" y="3348.5981">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="176" y="3363.731">type: notification,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="176" y="3378.8638">action: timeout-received,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="176" y="3393.9966">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="176" y="3409.1294">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="192" y="3424.2622">status: &apos;error&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="192" y="3439.395">code: &lt;errorInformation.errorCode&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="192" y="3454.5278">description: &lt;errorInformation.errorDescription&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="3469.6606">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="3484.7935">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="144" y="3499.9263">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="3515.0591">}</text>
    <polygon fill="#A80036" points="467,3549.2578,477,3553.2578,467,3557.2578,471,3553.2578" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="473" y1="3553.2578" y2="3553.2578"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="124" y="3548.1919">23</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="146" y="3548.1919">Publish Notification event</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="40" x2="542.5" y1="3592.2578" y2="3592.2578"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="45" y="3602.4683">[transferStateId == &apos;RESERVED&apos;]</text>
    <path d="M122,3611.0625 L122,4241.0625 L526,4241.0625 L526,3621.0625 L516,3611.0625 L122,3611.0625 " fill="#FFFF00" filter="url(#f2o40hljxpjg)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M516,3611.0625 L516,3621.0625 L526,3621.0625 L516,3611.0625 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="128" y="3628.1294">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="3643.2622">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="144" y="3658.395">id: &lt;transferId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="144" y="3673.5278">from: &lt;payerParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="144" y="3688.6606">to: &lt;payeeParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="144" y="3703.7935">type: application/json,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="144" y="3718.9263">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="160" y="3734.0591">headers: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="176" y="3749.1919">Content-Length: &lt;Content-Length&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="176" y="3764.3247">Content-Type: &lt;Content-Type&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="176" y="3779.4575">Date: &lt;Date&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="176" y="3794.5903">X-Forwarded-For: &lt;X-Forwarded-For&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="176" y="3809.7231">FSPIOP-Source: &lt;FSPIOP-Source&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="176" y="3824.856">FSPIOP-Destination: &lt;FSPIOP-Destination&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="176" y="3839.9888">FSPIOP-Encryption: &lt;FSPIOP-Encryption&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="176" y="3855.1216">FSPIOP-Signature: &lt;FSPIOP-Signature&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="176" y="3870.2544">FSPIOP-URI: &lt;FSPIOP-URI&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="300" x="176" y="3885.3872">FSPIOP-HTTP-Method: &lt;FSPIOP-HTTP-Method&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="160" y="3900.52">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="160" y="3915.6528">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="176" y="3930.7856">&quot;errorInformation&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="192" y="3945.9185">&quot;errorCode&quot;: 3303,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="192" y="3961.0513">&quot;errorDescription&quot;: &quot;Transfer expired&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="192" y="3976.1841">&quot;extensionList&quot;: &lt;transferMessage.extensionList&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="3991.3169">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="4006.4497">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="144" y="4021.5825">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="144" y="4036.7153">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="160" y="4051.8481">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="176" y="4066.981">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="176" y="4082.1138">type: position,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="176" y="4097.2466">action: timeout-reserved,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="176" y="4112.3794">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="176" y="4127.5122">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="192" y="4142.645">status: &apos;error&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="192" y="4157.7778">code: &lt;errorInformation.errorCode&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="192" y="4172.9106">description: &lt;errorInformation.errorDescription&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="4188.0435">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="4203.1763">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="144" y="4218.3091">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="4233.4419">}</text>
    <polygon fill="#A80036" points="341,4267.6406,351,4271.6406,341,4275.6406,345,4271.6406" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="347" y1="4271.6406" y2="4271.6406"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="124" y="4266.5747">24</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="146" y="4266.5747">Route &amp; Publish Position event</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="30" x2="805.5" y1="4317.6406" y2="4317.6406"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="35" y="4327.8511">[Individual Transfer from a Bulk]</text>
    <path d="M40,4338.4453 L104,4338.4453 L104,4345.4453 L94,4355.4453 L40,4355.4453 L40,4338.4453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1136.4375" style="stroke:#000000;stroke-width:2.0" width="755.5" x="40" y="4338.4453"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="55" y="4351.5122">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="263" x="119" y="4350.6558">[transferStateId == &apos;RECEIVED_PREPARE&apos;]</text>
    <path d="M122,4360.5781 L122,4839.5781 L526,4839.5781 L526,4370.5781 L516,4360.5781 L122,4360.5781 " fill="#FFFF00" filter="url(#f2o40hljxpjg)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M516,4360.5781 L516,4370.5781 L526,4370.5781 L516,4360.5781 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="128" y="4377.645">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="4392.7778">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="144" y="4407.9106"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="144" y="4407.9106">id</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="155" y="4407.9106">: &lt;transferTimeoutList.bulkTransferId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="144" y="4423.0435"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="144" y="4423.0435">transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="205" y="4423.0435">: &lt;transferTimeoutList.transferId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="144" y="4438.1763">from: &lt;payerParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="144" y="4453.3091">to: &lt;payeeParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="144" y="4468.4419">type: application/json,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="144" y="4483.5747">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="160" y="4498.7075">headers: &lt;bulkTransferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="160" y="4513.8403">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="176" y="4528.9731">&quot;errorInformation&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="192" y="4544.106">&quot;errorCode&quot;: 3303,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="192" y="4559.2388">&quot;errorDescription&quot;: &quot;Transfer expired&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="192" y="4574.3716">&quot;extensionList&quot;: &lt;transferMessage.extensionList&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="4589.5044">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="4604.6372">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="144" y="4619.77">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="144" y="4634.9028">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="160" y="4650.0356">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="176" y="4665.1685">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="176" y="4680.3013">type: bulk-processing,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="176" y="4695.4341">action: bulk-timeout-received,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="176" y="4710.5669">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="176" y="4725.6997">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="192" y="4740.8325">status: &apos;error&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="192" y="4755.9653">code: &lt;errorInformation.errorCode&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="192" y="4771.0981">description: &lt;errorInformation.errorDescription&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="4786.231">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="4801.3638">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="144" y="4816.4966">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="4831.6294">}</text>
    <polygon fill="#A80036" points="702,4865.8281,712,4869.8281,702,4873.8281,706,4869.8281" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="708" y1="4869.8281" y2="4869.8281"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="124" y="4864.7622">25</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="146" y="4864.7622">Publish to Bulk Processing topic</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="40" x2="795.5" y1="4908.8281" y2="4908.8281"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="45" y="4919.0386">[transferStateId == &apos;RESERVED&apos;]</text>
    <path d="M122,4927.6328 L122,5406.6328 L526,5406.6328 L526,4937.6328 L516,4927.6328 L122,4927.6328 " fill="#FFFF00" filter="url(#f2o40hljxpjg)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M516,4927.6328 L516,4937.6328 L526,4937.6328 L516,4927.6328 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="128" y="4944.6997">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="4959.8325">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="144" y="4974.9653"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="144" y="4974.9653">id</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="155" y="4974.9653">: &lt;transferTimeoutList.bulkTransferId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="144" y="4990.0981"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="144" y="4990.0981">transferId</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="205" y="4990.0981">: &lt;transferTimeoutList.transferId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="144" y="5005.231">from: &lt;payerParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="144" y="5020.3638">to: &lt;payeeParticipantId&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="144" y="5035.4966">type: application/json,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="144" y="5050.6294">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="160" y="5065.7622">headers: &lt;bulkTransferHeaders&gt;,,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="160" y="5080.895">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="176" y="5096.0278">&quot;errorInformation&quot;: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="192" y="5111.1606">&quot;errorCode&quot;: 3303,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="192" y="5126.2935">&quot;errorDescription&quot;: &quot;Transfer expired&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="192" y="5141.4263">&quot;extensionList&quot;: &lt;transferMessage.extensionList&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="5156.5591">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="5171.6919">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="144" y="5186.8247">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="144" y="5201.9575">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="160" y="5217.0903">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="176" y="5232.2231">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="176" y="5247.356">type: position,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="176" y="5262.4888">action: bulk-timeout-reserved,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="176" y="5277.6216">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="176" y="5292.7544">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="192" y="5307.8872">status: &apos;error&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="192" y="5323.02">code: &lt;errorInformation.errorCode&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="192" y="5338.1528">description: &lt;errorInformation.errorDescription&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="176" y="5353.2856">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="160" y="5368.4185">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="144" y="5383.5513">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="128" y="5398.6841">}</text>
    <polygon fill="#A80036" points="341,5432.8828,351,5436.8828,341,5440.8828,345,5436.8828" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="117" x2="347" y1="5436.8828" y2="5436.8828"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="124" y="5431.8169">26</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="146" y="5431.8169">Route &amp; Publish Position event</text>
  </g>
</svg>
