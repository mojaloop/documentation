<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4057px" preserveAspectRatio="none" style="width:1331px;height:4057px" version="1.1" viewBox="0 0 1331 4057" width="1331px" zoomAndPan="magnify">
  <defs>
    <filter height="300%" id="f1t75n0bhgj1s5" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
      <feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
    </filter>
  </defs>
  <g>
    <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="358" x="484.5" y="28.708">1.4.0. Bulk Processing Handler Consume</text>
    <rect fill="#FFFFE0" height="4010.4531" style="stroke:#A80036;stroke-width:1.0" width="1230" x="16" y="40.9531"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="575.5" y="53.02">Central Service</text>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="64.5" y="187.2422"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="3824.5391" style="stroke:#A80036;stroke-width:1.0" width="10" x="230.5" y="141.9766"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="44.2656" style="stroke:#A80036;stroke-width:1.0" width="10" x="632.5" y="3325.4609"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="763.5" y="3846.5781"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="135.6641" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="621.2344"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="151.6641" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="2407.5391"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="120.5313" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="2588.3359"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="121.3984" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="2877.3359"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="150.7969" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="3052"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="77.3984" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="650.3672"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="2466.9375"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="62.2656" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="2617.4688"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="2906.4688"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="92.5313" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="3081.1328"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="3810.5391" style="stroke:#000000;stroke-width:2.0" width="1307" x="10" y="148.9766"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="166.0625" style="stroke:#000000;stroke-width:2.0" width="377.5" x="157" y="232.2422"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="134.9297" style="stroke:#000000;stroke-width:2.0" width="357.5" x="167" y="256.375"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="156.6641" style="stroke:#000000;stroke-width:2.0" width="417.5" x="167" y="412.3047"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="3369.5469" style="stroke:#000000;stroke-width:2.0" width="1160" x="147" y="582.9688"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="1607.5078" style="stroke:#000000;stroke-width:2.0" width="570" x="215" y="771.8984"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="1431.3125" style="stroke:#000000;stroke-width:2.0" width="550" x="225" y="941.0938"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="393.0781" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="1034.625"/>
    <rect fill="#FFFFFF" height="84.2031" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1121.1563"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1205.3594"/>
    <rect fill="#FFFFFF" height="114.4688" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1259.2969"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1373.7656"/>
    <rect fill="#FFFFFF" height="184.4063" style="stroke:none;stroke-width:1.0" width="550" x="225" y="1434.7031"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="155.6016" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="1456.5078"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1558.1719"/>
    <rect fill="#FFFFFF" height="484.6875" style="stroke:none;stroke-width:1.0" width="550" x="225" y="1619.1094"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="386.4844" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="1710.3125"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1766.5781"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1820.5156"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1874.4531"/>
    <rect fill="#FFFFFF" height="114.4688" style="stroke:none;stroke-width:1.0" width="515" x="235" y="1928.3906"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="2042.8594"/>
    <rect fill="#FFFFFF" height="214.6719" style="stroke:none;stroke-width:1.0" width="550" x="225" y="2103.7969"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="185.8672" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="2125.6016"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="515" x="235" y="2257.5313"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="550" x="225" y="2318.4688"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="125.3359" style="stroke:#000000;stroke-width:2.0" width="310" x="235" y="2723.8672"/>
    <rect fill="#FFFFFF" height="69.0703" style="stroke:none;stroke-width:1.0" width="310" x="235" y="2780.1328"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="931.7813" style="stroke:#000000;stroke-width:2.0" width="1140" x="157" y="3013.7344"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="666.7813" style="stroke:#000000;stroke-width:2.0" width="679.5" x="167" y="3217.7969"/>
    <rect fill="#FFFFFF" height="53.9375" style="stroke:none;stroke-width:1.0" width="1140" x="157" y="3891.5781"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="69" x2="69" y1="131.9766" y2="3976.5156"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="235" x2="235" y1="131.9766" y2="3976.5156"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="524.5" x2="524.5" y1="131.9766" y2="3976.5156"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="637.5" x2="637.5" y1="131.9766" y2="3976.5156"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="768.5" x2="768.5" y1="131.9766" y2="3976.5156"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="881.5" x2="881.5" y1="131.9766" y2="3976.5156"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0" x1="1194" x2="1194" y1="131.9766" y2="3976.5156"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="91" x="24" y="76.3828"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="91" x="20" y="80.3828"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="29" y="100.3779">topic-bulk-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="27" y="116.6748">processing</text>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="91" x="24" y="3975.5156"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="46.5938" style="stroke:#A80036;stroke-width:1.5" width="91" x="20" y="3979.5156"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="29" y="3999.5107">topic-bulk-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="27" y="4015.8076">processing</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="177" y="112.3779">Bulk Processing</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="206" y="128.6748">Handler</text>
    <ellipse cx="235.5" cy="83.3828" fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="231.5,71.3828,237.5,66.3828,235.5,71.3828,237.5,76.3828,231.5,71.3828" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="177" y="3988.5107">Bulk Processing</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="206" y="4004.8076">Handler</text>
    <ellipse cx="235.5" cy="4024.1094" fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <polygon fill="#A80036" points="231.5,4012.1094,237.5,4007.1094,235.5,4012.1094,237.5,4017.1094,231.5,4012.1094" style="stroke:#A80036;stroke-width:1.0"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="478.5" y="92.6797"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="474.5" y="96.6797"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="481.5" y="116.6748">topic-event</text>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="478.5" y="3975.5156"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="92" x="474.5" y="3979.5156"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="481.5" y="3999.5107">topic-event</text>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="62.8906" style="stroke:#A80036;stroke-width:1.5" width="98" x="588.5" y="60.0859"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="62.8906" style="stroke:#A80036;stroke-width:1.5" width="98" x="584.5" y="64.0859"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="599.5" y="84.0811">mojaloop-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="591.5" y="100.3779">object-store</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="5" x="606.5" y="116.6748">(</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="611.5" y="116.6748">MLOS</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="5" x="655.5" y="116.6748">)</text>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="62.8906" style="stroke:#A80036;stroke-width:1.5" width="98" x="588.5" y="3975.5156"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="62.8906" style="stroke:#A80036;stroke-width:1.5" width="98" x="584.5" y="3979.5156"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="599.5" y="3999.5107">mojaloop-</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="591.5" y="4015.8076">object-store</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="5" x="606.5" y="4032.1045">(</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="611.5" y="4032.1045">MLOS</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="5" x="655.5" y="4032.1045">)</text>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="704.5" y="92.6797"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="700.5" y="96.6797"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="707.5" y="116.6748">topic-notification</text>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="704.5" y="3975.5156"/>
    <rect fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5" width="128" x="700.5" y="3979.5156"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="707.5" y="3999.5107">topic-notification</text>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="846.5" y="128.6748">Bulk DAO</text>
    <ellipse cx="882" cy="99.6797" fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <line style="stroke:#A80036;stroke-width:2.0" x1="870" x2="894" y1="113.6797" y2="113.6797"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="846.5" y="3988.5107">Bulk DAO</text>
    <ellipse cx="882" cy="4007.8125" fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0"/>
    <line style="stroke:#A80036;stroke-width:2.0" x1="870" x2="894" y1="4021.8125" y2="4021.8125"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1146" y="128.6748">Central Store</text>
    <path d="M1176,79.6797 C1176,69.6797 1194,69.6797 1194,69.6797 C1194,69.6797 1212,69.6797 1212,79.6797 L1212,105.6797 C1212,115.6797 1194,115.6797 1194,115.6797 C1194,115.6797 1176,115.6797 1176,105.6797 L1176,79.6797 " fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" style="stroke:#000000;stroke-width:1.5"/>
    <path d="M1176,79.6797 C1176,89.6797 1194,89.6797 1194,89.6797 C1194,89.6797 1212,89.6797 1212,79.6797 " fill="none" style="stroke:#000000;stroke-width:1.5"/>
    <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1146" y="3988.5107">Central Store</text>
    <path d="M1176,4001.8125 C1176,3991.8125 1194,3991.8125 1194,3991.8125 C1194,3991.8125 1212,3991.8125 1212,4001.8125 L1212,4027.8125 C1212,4037.8125 1194,4037.8125 1194,4037.8125 C1194,4037.8125 1176,4037.8125 1176,4027.8125 L1176,4001.8125 " fill="#FEFECE" filter="url(#f1t75n0bhgj1s5)" style="stroke:#000000;stroke-width:1.5"/>
    <path d="M1176,4001.8125 C1176,4011.8125 1194,4011.8125 1194,4011.8125 C1194,4011.8125 1212,4011.8125 1212,4001.8125 " fill="none" style="stroke:#000000;stroke-width:1.5"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="64.5" y="187.2422"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="3824.5391" style="stroke:#A80036;stroke-width:1.0" width="10" x="230.5" y="141.9766"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="44.2656" style="stroke:#A80036;stroke-width:1.0" width="10" x="632.5" y="3325.4609"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="763.5" y="3846.5781"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="135.6641" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="621.2344"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="151.6641" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="2407.5391"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="120.5313" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="2588.3359"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="121.3984" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="2877.3359"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="150.7969" style="stroke:#A80036;stroke-width:1.0" width="10" x="877" y="3052"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="77.3984" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="650.3672"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="2466.9375"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="62.2656" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="2617.4688"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="30" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="2906.4688"/>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="92.5313" style="stroke:#A80036;stroke-width:1.0" width="10" x="1189" y="3081.1328"/>
    <path d="M10,148.9766 L309,148.9766 L309,155.9766 L299,165.9766 L10,165.9766 L10,148.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="3810.5391" style="stroke:#000000;stroke-width:2.0" width="1307" x="10" y="148.9766"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="254" x="25" y="162.0435">Bulk Processing Handler Consume</text>
    <polygon fill="#A80036" points="85.5,183.2422,75.5,187.2422,85.5,191.2422,81.5,187.2422" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="79.5" x2="229.5" y1="187.2422" y2="187.2422"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91.5" y="182.1763">1</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="104.5" y="182.1763">Consume message</text>
    <path d="M157,232.2422 L245,232.2422 L245,239.2422 L235,249.2422 L157,249.2422 L157,232.2422 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="166.0625" style="stroke:#000000;stroke-width:2.0" width="377.5" x="157" y="232.2422"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="172" y="245.3091">break</text>
    <path d="M167,256.375 L319,256.375 L319,263.375 L309,273.375 L167,273.375 L167,256.375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="134.9297" style="stroke:#000000;stroke-width:2.0" width="357.5" x="167" y="256.375"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="182" y="269.4419">Validate Event</text>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="282.5" y1="370.3047" y2="370.3047"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="282.5" x2="282.5" y1="370.3047" y2="383.3047"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="241.5" x2="282.5" y1="383.3047" y2="383.3047"/>
    <polygon fill="#A80036" points="251.5,379.3047,241.5,383.3047,251.5,387.3047,247.5,383.3047" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="247.5" y="327.4067">2</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="260.5" y="289.5747">Validate event - Rule:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="260.5" y="304.7075">type == &apos;bulk-processing&apos; &amp;&amp; action IN</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="260.5" y="319.8403">[&apos;prepare-duplicate&apos;, &apos;bulk-prepare&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="260.5" y="334.9731">&apos;bulk-timeout-received&apos;, &apos;fulfil-duplicate&apos;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="260.5" y="350.106">&apos;bulk-commit&apos;, &apos;bulk-timeout-reserved&apos;]</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="260.5" y="365.2388">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="354.5" y="365.2388">2001</text>
    <path d="M167,412.3047 L399,412.3047 L399,419.3047 L389,429.3047 L167,429.3047 L167,412.3047 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="156.6641" style="stroke:#000000;stroke-width:2.0" width="417.5" x="167" y="412.3047"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="182" y="425.3716">Persist Event Information</text>
    <polygon fill="#A80036" points="512.5,471.5703,522.5,475.5703,512.5,479.5703,516.5,475.5703" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="518.5" y1="475.5703" y2="475.5703"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="247.5" y="470.5044">3</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="260.5" y="470.5044">Publish event information</text>
    <rect fill="#FFFFFF" filter="url(#f1t75n0bhgj1s5)" height="55.3984" style="stroke:#000000;stroke-width:2.0" width="399.5" x="174" y="483.5703"/>
    <polygon fill="#EEEEEE" points="174,483.5703,240,483.5703,240,490.5703,230,500.5703,174,500.5703,174,483.5703" style="stroke:#000000;stroke-width:2.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="187" y="497.6372">ref</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="298.25" y="516.6372">Event Handler Consume</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="302.25" y="531.77"/>
    <path d="M147,582.9688 L321,582.9688 L321,589.9688 L311,599.9688 L147,599.9688 L147,582.9688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="3369.5469" style="stroke:#000000;stroke-width:2.0" width="1160" x="147" y="582.9688"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="162" y="596.0356">Process Message</text>
    <polygon fill="#A80036" points="865,617.2344,875,621.2344,865,625.2344,869,621.2344" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="871" y1="621.2344" y2="621.2344"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="247.5" y="616.1685">4</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="260.5" y="616.1685">Retrieve current state of Bulk Transfer</text>
    <polygon fill="#A80036" points="1177,646.3672,1187,650.3672,1177,654.3672,1181,650.3672" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="887" x2="1183" y1="650.3672" y2="650.3672"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="894" y="645.3013">5</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="907" y="645.3013">Retrieve current state of Bulk Transfer</text>
    <polygon fill="#FFFFE0" filter="url(#f1t75n0bhgj1s5)" points="1111,663.3672,1277,663.3672,1287,682.3672,1277,701.3672,1111,701.3672,1101,682.3672,1111,663.3672" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1113" y="679.4341">bulkTransfer</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1113" y="694.5669">bulkTransferStateChange</text>
    <polygon fill="#A80036" points="898,723.7656,888,727.7656,898,731.7656,894,727.7656" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="892" x2="1193" y1="727.7656" y2="727.7656"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="904" y="722.6997">6</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="917" y="722.6997">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121" x="963" y="722.6997">bulkTransferInfo</text>
    <polygon fill="#A80036" points="251.5,752.8984,241.5,756.8984,251.5,760.8984,247.5,756.8984" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="245.5" x2="881" y1="756.8984" y2="756.8984"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="257.5" y="751.8325">7</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="270.5" y="751.8325">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121" x="316.5" y="751.8325">bulkTransferInfo</text>
    <path d="M215,771.8984 L468,771.8984 L468,778.8984 L458,788.8984 L215,788.8984 L215,771.8984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1607.5078" style="stroke:#000000;stroke-width:2.0" width="570" x="215" y="771.8984"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="230" y="784.9653">Validate Bulk Transfer State</text>
    <path d="M245,794.0313 L245,925.0313 L459,925.0313 L459,804.0313 L449,794.0313 L245,794.0313 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M449,794.0313 L449,804.0313 L459,804.0313 L449,794.0313 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="251" y="811.0981">Initialize variables</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="384" y="811.0981">:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="251" y="826.231">let criteriaState</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="251" y="841.3638">let incompleteBulkState</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="251" y="856.4966">let completedBulkState</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="251" y="871.6294">let bulkTransferState</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="251" y="886.7622">let processingState</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="251" y="901.895">let errorCode, errorMessage</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="251" y="917.0278">let produceNotification = false</text>
    <path d="M225,941.0938 L289,941.0938 L289,948.0938 L279,958.0938 L225,958.0938 L225,941.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="1431.3125" style="stroke:#000000;stroke-width:2.0" width="550" x="225" y="941.0938"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="240" y="954.1606">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="466" x="304" y="953.3042">[bulkTransferInfo.bulkTransferState IN [&apos;RECEIVED&apos;, &apos;PENDING_PREPARE&apos;]]</text>
    <path d="M245,963.2266 L245,1018.2266 L547,1018.2266 L547,973.2266 L537,963.2266 L245,963.2266 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M537,963.2266 L537,973.2266 L547,973.2266 L537,963.2266 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="251" y="980.2935">criteriaState = &apos;RECEIVED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="251" y="995.4263">incompleteBulkState = &apos;PENDING_PREPARE&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="251" y="1010.5591">completedBulkState = &apos;ACCEPTED&apos;</text>
    <path d="M235,1034.625 L299,1034.625 L299,1041.625 L289,1051.625 L235,1051.625 L235,1034.625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="393.0781" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="1034.625"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="250" y="1047.6919">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="371" x="314" y="1046.8354">[action == &apos;prepare-duplicate&apos; AND state.status == &apos;error&apos;]</text>
    <path d="M245,1056.7578 L245,1111.7578 L653,1111.7578 L653,1066.7578 L643,1056.7578 L245,1056.7578 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M643,1056.7578 L643,1066.7578 L653,1066.7578 L643,1056.7578 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="251" y="1073.8247">processingState = &apos;RECEIVED_DUPLICATE&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="251" y="1088.9575">errorCode = payload.errorInformation.errorCode</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="387" x="251" y="1104.0903">errorDescription = payload.errorInformation.errorDescription</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1122.1563" y2="1122.1563"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="338" x="240" y="1132.3667">[action == &apos;bulk-prepare&apos; AND state.status == &apos;error&apos;]</text>
    <path d="M245,1140.9609 L245,1195.9609 L653,1195.9609 L653,1150.9609 L643,1140.9609 L245,1140.9609 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M643,1140.9609 L643,1150.9609 L653,1150.9609 L643,1140.9609 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="251" y="1158.0278">processingState = &apos;RECEIVED_INVALID&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="251" y="1173.1606">errorCode = payload.errorInformation.errorCode</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="387" x="251" y="1188.2935">errorDescription = payload.errorInformation.errorDescription</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1206.3594" y2="1206.3594"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="358" x="240" y="1216.5698">[action == &apos;bulk-prepare&apos; AND state.status == &apos;success&apos;]</text>
    <path d="M245,1225.1641 L245,1250.1641 L463,1250.1641 L463,1235.1641 L453,1225.1641 L245,1225.1641 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M453,1225.1641 L453,1235.1641 L463,1235.1641 L453,1225.1641 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="251" y="1242.231">processingState = &apos;ACCEPTED&apos;</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1260.2969" y2="1260.2969"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="384" x="240" y="1270.5073">[action IN [&apos;bulk-timeout-received&apos;, &apos;bulk-timeout-reserved&apos;]]</text>
    <path d="M245,1279.1016 L245,1364.1016 L653,1364.1016 L653,1289.1016 L643,1279.1016 L245,1279.1016 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M643,1279.1016 L643,1289.1016 L653,1289.1016 L643,1279.1016 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="251" y="1296.1685">incompleteBulkState = &apos;EXPIRING&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="251" y="1311.3013">completedBulkState = &apos;COMPLETED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="251" y="1326.4341">processingState = &apos;EXPIRED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="251" y="1341.5669">errorCode = payload.errorInformation.errorCode</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="387" x="251" y="1356.6997">errorDescription = payload.errorInformation.errorDescription</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1374.7656" y2="1374.7656"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="240" y="1384.9761">[all other actions]</text>
    <path d="M245,1393.5703 L245,1418.5703 L736,1418.5703 L736,1403.5703 L726,1393.5703 L245,1393.5703 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M726,1393.5703 L726,1403.5703 L736,1403.5703 L726,1393.5703 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="251" y="1410.6372">throw</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="290" y="1410.6372">ErrorHandler.Factory.createFSPIOPError(INTERNAL_SERVER_ERROR)</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="225" x2="775" y1="1435.7031" y2="1435.7031"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="339" x="230" y="1445.9136">[bulkTransferInfo.bulkTransferState IN [&apos;ACCEPTED&apos;]]</text>
    <path d="M235,1456.5078 L299,1456.5078 L299,1463.5078 L289,1473.5078 L235,1473.5078 L235,1456.5078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="155.6016" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="1456.5078"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="250" y="1469.5747">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="314" y="1468.7183">[action == &apos;bulk-timeout-reserved&apos;]</text>
    <path d="M245,1478.6406 L245,1548.6406 L499,1548.6406 L499,1488.6406 L489,1478.6406 L245,1478.6406 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M489,1478.6406 L489,1488.6406 L499,1488.6406 L489,1478.6406 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="251" y="1495.7075">criteriaState = &apos;ACCEPTED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="251" y="1510.8403">incompleteBulkState = &apos;EXPIRING&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="251" y="1525.9731">completedBulkState = &apos;COMPLETED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="251" y="1541.106">processingState = &apos;EXPIRED&apos;</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1559.1719" y2="1559.1719"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="240" y="1569.3823">[all other actions]</text>
    <path d="M245,1577.9766 L245,1602.9766 L736,1602.9766 L736,1587.9766 L726,1577.9766 L245,1577.9766 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M726,1577.9766 L726,1587.9766 L736,1587.9766 L726,1577.9766 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="251" y="1595.0435">throw</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="290" y="1595.0435">ErrorHandler.Factory.createFSPIOPError(INTERNAL_SERVER_ERROR)</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="225" x2="775" y1="1620.1094" y2="1620.1094"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="544" x="230" y="1630.3198">[bulkTransferInfo.bulkTransferState IN [&apos;PROCESSING&apos;, &apos;PENDING_FULFIL&apos;, &apos;EXPIRING&apos;]]</text>
    <path d="M245,1638.9141 L245,1693.9141 L531,1693.9141 L531,1648.9141 L521,1638.9141 L245,1638.9141 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M521,1638.9141 L521,1648.9141 L531,1648.9141 L521,1638.9141 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="251" y="1655.981">criteriaState = &apos;PROCESSING&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="251" y="1671.1138">incompleteBulkState = &apos;PENDING_FULFIL&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="251" y="1686.2466">completedBulkState = &apos;COMPLETED&apos;</text>
    <path d="M235,1710.3125 L299,1710.3125 L299,1717.3125 L289,1727.3125 L235,1727.3125 L235,1710.3125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="386.4844" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="1710.3125"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="250" y="1723.3794">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="314" y="1722.5229">[action == &apos;fulfil-duplicate&apos;]</text>
    <path d="M245,1732.4453 L245,1757.4453 L514,1757.4453 L514,1742.4453 L504,1732.4453 L245,1732.4453 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M504,1732.4453 L504,1742.4453 L514,1742.4453 L504,1732.4453 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="251" y="1749.5122">processingState = &apos;FULFIL_DUPLICATE&apos;</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1767.5781" y2="1767.5781"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="354" x="240" y="1777.7886">[action == &apos;bulk-commit&apos; AND state.status == &apos;success&apos;]</text>
    <path d="M245,1786.3828 L245,1811.3828 L473,1811.3828 L473,1796.3828 L463,1786.3828 L245,1786.3828 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M463,1786.3828 L463,1796.3828 L473,1796.3828 L463,1786.3828 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="251" y="1803.4497">processingState = &apos;COMPLETED&apos;</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1821.5156" y2="1821.5156"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="313" x="240" y="1831.7261">[action == &apos;reject&apos; AND state.status == &apos;success&apos;]</text>
    <path d="M245,1840.3203 L245,1865.3203 L456,1865.3203 L456,1850.3203 L446,1840.3203 L245,1840.3203 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M446,1840.3203 L446,1850.3203 L456,1850.3203 L446,1840.3203 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="251" y="1857.3872">processingState = &apos;REJECTED&apos;</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1875.4531" y2="1875.4531"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="355" x="240" y="1885.6636">[action IN [&apos;commit&apos;, &apos;abort&apos;] AND state.status == &apos;error&apos;]</text>
    <path d="M245,1894.2578 L245,1919.2578 L494,1919.2578 L494,1904.2578 L484,1894.2578 L245,1894.2578 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M484,1894.2578 L484,1904.2578 L494,1904.2578 L484,1894.2578 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="251" y="1911.3247">processingState = &apos;FULFIL_INVALID&apos;</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="1929.3906" y2="1929.3906"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="240" y="1939.6011">[action == &apos;bulk-timeout-reserved&apos;]</text>
    <path d="M245,1948.1953 L245,2033.1953 L653,2033.1953 L653,1958.1953 L643,1948.1953 L245,1948.1953 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M643,1948.1953 L643,1958.1953 L653,1958.1953 L643,1948.1953 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="251" y="1965.2622">incompleteBulkState = &apos;EXPIRING&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="251" y="1980.395">completedBulkState = &apos;COMPLETED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="251" y="1995.5278">processingState = &apos;EXPIRED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="251" y="2010.6606">errorCode = payload.errorInformation.errorCode</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="387" x="251" y="2025.7935">errorDescription = payload.errorInformation.errorDescription</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="2043.8594" y2="2043.8594"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="240" y="2054.0698">[all other actions]</text>
    <path d="M245,2062.6641 L245,2087.6641 L736,2087.6641 L736,2072.6641 L726,2062.6641 L245,2062.6641 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M726,2062.6641 L726,2072.6641 L736,2072.6641 L726,2062.6641 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="251" y="2079.731">throw</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="290" y="2079.731">ErrorHandler.Factory.createFSPIOPError(INTERNAL_SERVER_ERROR)</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="225" x2="775" y1="2104.7969" y2="2104.7969"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="337" x="230" y="2115.0073">[bulkTransferInfo.bulkTransferState IN [&apos;ABORTING&apos;]]</text>
    <path d="M235,2125.6016 L299,2125.6016 L299,2132.6016 L289,2142.6016 L235,2142.6016 L235,2125.6016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="185.8672" style="stroke:#000000;stroke-width:2.0" width="515" x="235" y="2125.6016"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="250" y="2138.6685">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="314" y="2137.812">[action == &apos;bulk-abort&apos;]</text>
    <path d="M245,2147.7344 L245,2247.7344 L653,2247.7344 L653,2157.7344 L643,2147.7344 L245,2147.7344 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M643,2147.7344 L643,2157.7344 L653,2157.7344 L643,2147.7344 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="251" y="2164.8013">criteriaState = &apos;PROCESSING&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="251" y="2179.9341">processingState = &apos;FULFIL_INVALID&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="251" y="2195.0669">completedBulkState = &apos;REJECTED&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="251" y="2210.1997">incompleteBulkState = &apos;ABORTING&apos;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="309" x="251" y="2225.3325">errorCode = payload.errorInformation.errorCode</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="387" x="251" y="2240.4653">errorDescription = payload.errorInformation.errorDescription</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="750" y1="2258.5313" y2="2258.5313"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="240" y="2268.7417">[all other actions]</text>
    <path d="M245,2277.3359 L245,2302.3359 L736,2302.3359 L736,2287.3359 L726,2277.3359 L245,2277.3359 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M726,2277.3359 L726,2287.3359 L736,2287.3359 L726,2277.3359 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="251" y="2294.4028">throw</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="290" y="2294.4028">ErrorHandler.Factory.createFSPIOPError(INTERNAL_SERVER_ERROR)</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="225" x2="775" y1="2319.4688" y2="2319.4688"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="426" x="230" y="2329.6792">[all other [&apos;PENDING_INVALID&apos;, &apos;COMPLETED&apos;, &apos;REJECTED&apos;, &apos;INVALID&apos;]]</text>
    <path d="M245,2338.2734 L245,2363.2734 L736,2363.2734 L736,2348.2734 L726,2338.2734 L245,2338.2734 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M726,2338.2734 L726,2348.2734 L736,2348.2734 L726,2338.2734 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="251" y="2355.3403">throw</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="290" y="2355.3403">ErrorHandler.Factory.createFSPIOPError(INTERNAL_SERVER_ERROR)</text>
    <polygon fill="#A80036" points="865,2403.5391,875,2407.5391,865,2411.5391,869,2407.5391" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="871" y1="2407.5391" y2="2407.5391"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="247.5" y="2402.4731">8</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="260.5" y="2402.4731">Persist individual transfer processing state</text>
    <polygon fill="#A80036" points="1177,2462.9375,1187,2466.9375,1177,2470.9375,1181,2466.9375" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="887" x2="1183" y1="2466.9375" y2="2466.9375"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="894" y="2446.7388">9</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="907" y="2431.606">Persist individual transfer processing state</text>
    <text fill="#808080" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="907" y="2446.7388">-- store errorCode/errorMessage when</text>
    <text fill="#808080" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="907" y="2461.8716">state.status == &apos;error&apos;</text>
    <polygon fill="#FFFFE0" filter="url(#f1t75n0bhgj1s5)" points="1116,2509.9375,1271,2509.9375,1281,2520.9375,1271,2532.9375,1116,2532.9375,1106,2520.9375,1116,2509.9375" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1118" y="2526.0044">bulkTransferAssociation</text>
    <polygon fill="#A80036" points="251.5,2555.2031,241.5,2559.2031,251.5,2563.2031,247.5,2559.2031" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="245.5" x2="881" y1="2559.2031" y2="2559.2031"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="257.5" y="2554.1372">10</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="279.5" y="2554.1372">Return success</text>
    <polygon fill="#A80036" points="865,2584.3359,875,2588.3359,865,2592.3359,869,2588.3359" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="871" y1="2588.3359" y2="2588.3359"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="247.5" y="2583.27">11</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="269.5" y="2583.27">Check previously defined completion criteria</text>
    <polygon fill="#A80036" points="1177,2613.4688,1187,2617.4688,1177,2621.4688,1181,2617.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="887" x2="1183" y1="2617.4688" y2="2617.4688"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="894" y="2612.4028">12</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="916" y="2612.4028">Select EXISTS (LIMIT 1) in criteriaState</text>
    <polygon fill="#FFFFE0" filter="url(#f1t75n0bhgj1s5)" points="1116,2630.4688,1271,2630.4688,1281,2641.4688,1271,2653.4688,1116,2653.4688,1106,2641.4688,1116,2630.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1118" y="2646.5356">bulkTransferAssociation</text>
    <polygon fill="#A80036" points="898,2675.7344,888,2679.7344,898,2683.7344,894,2679.7344" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="892" x2="1193" y1="2679.7344" y2="2679.7344"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="904" y="2674.6685">13</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="926" y="2674.6685">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="972" y="2674.6685">existingIndividualTransfer</text>
    <polygon fill="#A80036" points="251.5,2704.8672,241.5,2708.8672,251.5,2712.8672,247.5,2708.8672" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="245.5" x2="881" y1="2708.8672" y2="2708.8672"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="257.5" y="2703.8013">14</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="279.5" y="2703.8013">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="325.5" y="2703.8013">existingIndividualTransfer</text>
    <path d="M235,2723.8672 L299,2723.8672 L299,2730.8672 L289,2740.8672 L235,2740.8672 L235,2723.8672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="125.3359" style="stroke:#000000;stroke-width:2.0" width="310" x="235" y="2723.8672"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="250" y="2736.9341">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="314" y="2736.0776">[individual transfer exists]</text>
    <path d="M245,2746 L245,2771 L531,2771 L531,2756 L521,2746 L245,2746 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M521,2746 L521,2756 L531,2756 L521,2746 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="251" y="2763.0669">bulkTransferState = incompleteBulkState</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="235" x2="545" y1="2781.1328" y2="2781.1328"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="223" x="240" y="2791.3433">[no transfer in criteriaState exists]</text>
    <path d="M245,2799.9375 L245,2839.9375 L528,2839.9375 L528,2809.9375 L518,2799.9375 L245,2799.9375 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M518,2799.9375 L518,2809.9375 L528,2809.9375 L518,2799.9375 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="251" y="2817.0044">bulkTransferState = completedBulkState</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="251" y="2832.1372">produceNotification = true</text>
    <polygon fill="#A80036" points="865,2873.3359,875,2877.3359,865,2881.3359,869,2877.3359" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="871" y1="2877.3359" y2="2877.3359"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="247.5" y="2872.27">15</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="269.5" y="2872.27">Persist bulkTransferState from previous step</text>
    <polygon fill="#A80036" points="1177,2902.4688,1187,2906.4688,1177,2910.4688,1181,2906.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="887" x2="1183" y1="2906.4688" y2="2906.4688"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="894" y="2901.4028">16</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="916" y="2901.4028">Persist bulkTransferState</text>
    <polygon fill="#FFFFE0" filter="url(#f1t75n0bhgj1s5)" points="1111,2949.4688,1277,2949.4688,1287,2960.4688,1277,2972.4688,1111,2972.4688,1101,2960.4688,1111,2949.4688" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1113" y="2965.5356">bulkTransferStateChange</text>
    <polygon fill="#A80036" points="251.5,2994.7344,241.5,2998.7344,251.5,3002.7344,247.5,2998.7344" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="245.5" x2="881" y1="2998.7344" y2="2998.7344"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="257.5" y="2993.6685">17</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="279.5" y="2993.6685">Return success</text>
    <path d="M157,3013.7344 L221,3013.7344 L221,3020.7344 L211,3030.7344 L157,3030.7344 L157,3013.7344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="931.7813" style="stroke:#000000;stroke-width:2.0" width="1140" x="157" y="3013.7344"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="172" y="3026.8013">alt</text>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="236" y="3025.9448">[produceNotification == true]</text>
    <polygon fill="#A80036" points="865,3048,875,3052,865,3056,869,3052" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="871" y1="3052" y2="3052"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="247.5" y="3046.9341">18</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="269.5" y="3046.9341">Request to retrieve all bulk transfer and individual transfer results</text>
    <polygon fill="#A80036" points="1177,3077.1328,1187,3081.1328,1177,3085.1328,1181,3081.1328" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="887" x2="1183" y1="3081.1328" y2="3081.1328"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="894" y="3076.0669">19</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="916" y="3076.0669">Get bulkTransferResult</text>
    <polygon fill="#FFFFE0" filter="url(#f1t75n0bhgj1s5)" points="1111,3094.1328,1277,3094.1328,1287,3120.1328,1277,3147.1328,1111,3147.1328,1101,3120.1328,1111,3094.1328" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1113" y="3110.1997">bulkTransfer</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1113" y="3125.3325">bulkTransferStateChange</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1113" y="3140.4653">bulkTransferAssociation</text>
    <polygon fill="#A80036" points="898,3169.6641,888,3173.6641,898,3177.6641,894,3173.6641" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="892" x2="1193" y1="3173.6641" y2="3173.6641"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="904" y="3168.5981">20</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="926" y="3168.5981">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="972" y="3168.5981">bulkTransferResult</text>
    <polygon fill="#A80036" points="251.5,3198.7969,241.5,3202.7969,251.5,3206.7969,247.5,3202.7969" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="245.5" x2="881" y1="3202.7969" y2="3202.7969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="257.5" y="3197.731">21</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="279.5" y="3197.731">Return</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="325.5" y="3197.731">bulkTransferResult</text>
    <path d="M167,3217.7969 L396,3217.7969 L396,3224.7969 L386,3234.7969 L167,3234.7969 L167,3217.7969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0"/>
    <rect fill="none" height="666.7813" style="stroke:#000000;stroke-width:2.0" width="679.5" x="167" y="3217.7969"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="182" y="3230.8638">Send Bulk Notification(s)</text>
    <path d="M245,3239.9297 L245,3279.9297 L528,3279.9297 L528,3249.9297 L518,3239.9297 L245,3239.9297 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M518,3239.9297 L518,3249.9297 L528,3249.9297 L518,3239.9297 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="251" y="3256.9966">Depending on the action decide where to</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="251" y="3272.1294">send notification: payer, payee OR both</text>
    <polygon fill="#A80036" points="620.5,3321.4609,630.5,3325.4609,620.5,3329.4609,624.5,3325.4609" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="626.5" y1="3325.4609" y2="3325.4609"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="247.5" y="3312.8286">22</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="316" x="269.5" y="3305.2622">Generate &amp; Persist bulk message to object store:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="269.5" y="3320.395">MLOS.bulkTransferResults</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="466.5" y="3320.395">by destination</text>
    <polygon fill="#A80036" points="251.5,3365.7266,241.5,3369.7266,251.5,3373.7266,247.5,3369.7266" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="245.5" x2="636.5" y1="3369.7266" y2="3369.7266"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="257.5" y="3357.0942">23</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="279.5" y="3349.5278">Return reference to the stored object(s)</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="279" x="279.5" y="3364.6606">MLOS.bulkTransferResults.messageId</text>
    <path d="M245,3382.7266 L245,3800.7266 L654,3800.7266 L654,3392.7266 L644,3382.7266 L245,3382.7266 " fill="#FFFF00" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M644,3382.7266 L644,3392.7266 L654,3392.7266 L644,3382.7266 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="251" y="3399.7935">Message:</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="251" y="3414.9263">{</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="267" y="3430.0591">id: &lt;messageId&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="267" y="3445.1919">from: &lt;source&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="267" y="3460.3247">to: &lt;destination&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="267" y="3475.4575">type: &quot;application/json&quot;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="267" y="3490.5903">content: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="283" y="3505.7231">headers: &lt;bulkTransferHeaders&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="283" y="3520.856">payload: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="299" y="3535.9888">bulkTransferId: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="299" y="3551.1216">bulkTransferState: &lt;string&gt;</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="283" y="3566.2544">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="267" y="3581.3872">},</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="267" y="3596.52">metadata: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="283" y="3611.6528">event: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="299" y="3626.7856">id: &lt;uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="299" y="3641.9185">responseTo: &lt;previous.uuid&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="299" y="3657.0513">type: &quot;notification&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="299" y="3672.1841">action: &quot;bulk-[prepare | commit | abort | processing]&quot;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="299" y="3687.3169">createdAt: &lt;timestamp&gt;,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="299" y="3702.4497">state: {</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="315" y="3717.5825">status: state.status,</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="315" y="3732.7153">code: state.code</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="299" y="3747.8481">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="283" y="3762.981">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="267" y="3778.1138">}</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="251" y="3793.2466">}</text>
    <polygon fill="#A80036" points="751.5,3842.5781,761.5,3846.5781,751.5,3850.5781,755.5,3846.5781" style="stroke:#A80036;stroke-width:1.0"/>
    <line style="stroke:#A80036;stroke-width:1.0" x1="240.5" x2="757.5" y1="3846.5781" y2="3846.5781"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="247.5" y="3833.9458">24</text>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="269.5" y="3826.3794">Publish Notification event for Payer/Payee</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="269.5" y="3841.5122">Error codes:</text>
    <text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="363.5" y="3841.5122">2003</text>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0" x1="157" x2="1297" y1="3892.5781" y2="3892.5781"/>
    <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="162" y="3902.7886">[produceNotification == false]</text>
    <path d="M245,3911.3828 L245,3936.3828 L457,3936.3828 L457,3921.3828 L447,3911.3828 L245,3911.3828 " fill="#D3D3D3" filter="url(#f1t75n0bhgj1s5)" style="stroke:#A80036;stroke-width:1.0"/>
    <path d="M447,3911.3828 L447,3921.3828 L457,3921.3828 L447,3911.3828 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0"/>
    <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="251" y="3928.4497">Do nothing (awaitAllTransfers)</text>
  </g>
</svg>
