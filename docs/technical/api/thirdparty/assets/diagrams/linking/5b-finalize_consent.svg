<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1010px" preserveAspectRatio="none" style="width:1511px;height:1010px;background:#FFFFFF;" version="1.1" viewBox="0 0 1511 1010" width="1511px" zoomAndPan="magnify">
  <title>PISP Linking: Credential registration (verification)</title>
  <defs/>
  <g>
    <rect fill="#DDDDDD" height="960.9922" style="stroke:#181818;stroke-width:0.5;" width="391.5078" x="491.5806" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.7202" x="653.9744" y="55.3638">Mojaloop</text>
    <text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="397.0928" x="559.1642" y="27.9951">PISP Linking: Credential registration (verification)</text>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="37.5811" x2="37.5811" y1="100.7109" y2="108.7109"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="37.5811" x2="37.5811" y1="108.7109" y2="136.7109"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="37.5811" x2="37.5811" y1="136.7109" y2="998.2891"/>
    <rect fill="#F5F5F5" height="82.2656" style="stroke:#000000;stroke-width:1.0;" width="10" x="32.5811" y="916.0234"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="540.2759" x2="540.2759" y1="100.7109" y2="108.7109"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="540.2759" x2="540.2759" y1="108.7109" y2="136.7109"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="540.2759" x2="540.2759" y1="136.7109" y2="998.2891"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="737.0298" x2="737.0298" y1="100.7109" y2="108.7109"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="737.0298" x2="737.0298" y1="108.7109" y2="136.7109"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="737.0298" x2="737.0298" y1="136.7109" y2="998.2891"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1254.5103" x2="1254.5103" y1="100.7109" y2="108.7109"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1254.5103" x2="1254.5103" y1="108.7109" y2="136.7109"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1254.5103" x2="1254.5103" y1="136.7109" y2="998.2891"/>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.1621" x="5" y="62.4297"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="51.1621" x="12" y="87.9941">PISP</text>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.3906" x="495.5806" y="62.4297"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="75.3906" x="502.5806" y="87.9941">Switch</text>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="284.1172" x="594.9712" y="62.4297"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="270.1172" x="601.9712" y="87.9941">Account Lookup Service</text>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.3262" x="1217.8472" y="62.4297"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="59.3262" x="1224.8472" y="87.9941">DFSP</text>
    <rect fill="#FAFAFA" height="68" style="stroke:#181818;stroke-width:0.5;" width="503" x="1002.5994" y="141.7109"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="453.5146" x="1006.5994" y="157.7778">DFSP is now satisfied that the Consent registered by the PISP is valid,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="281.0806" x="1006.5994" y="172.9106">and now proceeds to register with the ALS:</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="487.5571" x="1014.864" y="188.0435">- `THIRD_PARTY_LINK` (optional - for routing of funds to a Third Party Link)</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="24.3877" x="1006.5994" y="203.1763">ALS</text>
    <path d="M521.2192,219.2422 L597.8433,219.2422 L597.8433,226.375 L587.8433,236.375 L521.2192,236.375 L521.2192,219.2422 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/>
    <rect fill="none" height="312.9922" style="stroke:#000000;stroke-width:1.5;" width="749.291" x="521.2192" y="219.2422"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="536.2192" y="232.3091">loop</text>
    <text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111.0796" x="612.8433" y="231.4526">[for each scope in</text>
    <text fill="#000000" font-family="monospace" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.3384" x="727.7524" y="231.4526">Consents.scopes</text>
    <text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5.0273" x="827.0908" y="231.4526">]</text>
    <polygon fill="#000000" points="748.0298,324.0391,738.0298,328.0391,748.0298,332.0391,744.0298,328.0391" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="742.0298" x2="1253.5103" y1="328.0391" y2="328.0391"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="754.0298" y="292.7075">CRED-16</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="422.6396" x="820.7383" y="262.4419">POST /participants/THIRD_PARTY_LINK/dfsp.username.5678</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1243.3779" y="262.4419"> </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="148.7065" x="836.3916" y="277.5747">FSIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="836.3916" y="292.7075">{</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="117.3999" x="852.0449" y="307.8403">fspId: &quot;dfspa&quot;,</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="836.3916" y="322.9731">}</text>
    <polygon fill="#000000" points="1242.5103,353.1719,1252.5103,357.1719,1242.5103,361.1719,1246.5103,357.1719" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="737.0298" x2="1248.5103" y1="357.1719" y2="357.1719"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="744.0298" y="352.106">CRED-17</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="93.9199" x="810.7383" y="352.106">202 Accepted</text>
    <rect fill="#D3D3D3" height="23" style="stroke:#181818;stroke-width:0.5;" width="389" x="542.2192" y="370.1719"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="381.6211" x="546.2192" y="386.2388">ALS registers a new entry in the THIRD_PARTY_LINK oracle</text>
    <polygon fill="#000000" points="1242.5103,491.1016,1252.5103,495.1016,1242.5103,499.1016,1246.5103,495.1016" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="737.0298" x2="1248.5103" y1="495.1016" y2="495.1016"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="744.0298" y="452.2036">CRED-18</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="414.813" x="810.7383" y="414.3716">PUT /participants/THIRD_PARTY_LINK/dfsp.username.5678</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1225.5513" y="414.3716"> </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="281.7598" x="826.3916" y="429.5044">FSIOP-Source: account-lookup-service</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="187.8398" x="826.3916" y="444.6372">FSIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="826.3916" y="459.77">{</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="117.3999" x="842.0449" y="474.9028">fspId: &quot;dfspa&quot;,</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="826.3916" y="490.0356">}</text>
    <polygon fill="#000000" points="748.0298,520.2344,738.0298,524.2344,748.0298,528.2344,744.0298,524.2344" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742.0298" x2="1253.5103" y1="524.2344" y2="524.2344"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="754.0298" y="519.1685">CRED-19</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="820.7383" y="519.1685">200 OK</text>
    <rect fill="#FAFAFA" height="38" style="stroke:#181818;stroke-width:0.5;" width="496" x="1006.2334" y="551.2344"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="488.5537" x="1010.2334" y="567.3013">Now that the Credentials are verified and registered with the Auth Service,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="327.228" x="1010.2334" y="582.4341">the DFSP can update the PISP with the final status</text>
    <polygon fill="#000000" points="551.2759,732.6953,541.2759,736.6953,551.2759,740.6953,547.2759,736.6953" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="545.2759" x2="1253.5103" y1="736.6953" y2="736.6953"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="557.2759" y="671.0981">CRED-20</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="406.9863" x="623.9844" y="610.5669">PATCH /consents/22222222-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="148.7065" x="639.6377" y="625.6997">FSIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="195.6665" x="639.6377" y="640.8325">FSPIOP-Destination: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="328.7197" x="639.6377" y="655.9653">Content-Type: application/merge-patch+json</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="639.6377" y="671.0981">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.5293" x="623.9844" y="686.231">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="101.7466" x="656.167" y="686.231">credential: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.5293" x="623.9844" y="701.3638">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="31.3066" x="640.5137" y="701.3638">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="266.1064" x="671.8203" y="701.3638">status: &quot;VERIFIED&quot;, //this is new!</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.5293" x="623.9844" y="716.4966">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="656.167" y="716.4966">}</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="639.6377" y="731.6294">}</text>
    <polygon fill="#000000" points="551.2759,761.8281,541.2759,765.8281,551.2759,769.8281,547.2759,765.8281" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="545.2759" x2="1253.5103" y1="765.8281" y2="765.8281"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="557.2759" y="760.7622">CRED-21</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="623.9844" y="760.7622">200 OK</text>
    <polygon fill="#000000" points="53.5811,912.0234,43.5811,916.0234,53.5811,920.0234,49.5811,916.0234" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="47.5811" x2="539.2759" y1="916.0234" y2="916.0234"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="59.5811" y="850.4263">CRED-22</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="406.9863" x="126.2896" y="789.895">PATCH /consents/22222222-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="148.7065" x="141.9429" y="805.0278">FSIOP-Source: dfspa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="195.6665" x="141.9429" y="820.1606">FSPIOP-Destination: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="328.7197" x="141.9429" y="835.2935">Content-Type: application/merge-patch+json</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="141.9429" y="850.4263">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.5293" x="126.2896" y="865.5591">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="101.7466" x="158.4722" y="865.5591">credential: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.5293" x="126.2896" y="880.6919">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="31.3066" x="142.8188" y="880.6919">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="266.1064" x="174.1255" y="880.6919">status: &quot;VERIFIED&quot;, //this is new!</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.5293" x="126.2896" y="895.8247">    </text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="158.4722" y="895.8247">}</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="7.8267" x="141.9429" y="910.9575">}</text>
    <polygon fill="#000000" points="528.2759,941.1563,538.2759,945.1563,528.2759,949.1563,532.2759,945.1563" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="42.5811" x2="534.2759" y1="945.1563" y2="945.1563"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62.7085" x="49.5811" y="940.0903">CRED-23</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="116.2896" y="940.0903">200 OK</text>
    <path d="M7.959,958.1563 L7.959,983.1563 L1283.959,983.1563 L1283.959,968.1563 L1273.959,958.1563 L7.959,958.1563 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M1273.959,958.1563 L1273.959,968.1563 L1283.959,968.1563 L1273.959,958.1563 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="961.6255" x="160.7329" y="975.2231">Now we have a new identifier that the PISP can use to initiate transactions, a registered credential, and that credential is stored in the auth-service</text>
  </g>
</svg>
