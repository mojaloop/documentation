<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="906px" preserveAspectRatio="none" style="width:1440px;height:906px;background:#FFFFFF;" version="1.1" viewBox="0 0 1440 906" width="1440px" zoomAndPan="magnify">
  <title>Transfer: 1.2.3 Signed Authorization FIDO</title>
  <defs/>
  <g>
    <text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="331.7822" x="550.3342" y="27.9951">Transfer: 1.2.3 Signed Authorization FIDO</text>
    <rect fill="#DDDDDD" height="850.6094" style="stroke:#181818;stroke-width:0.5;" width="154.4219" x="1" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33.2554" x="61.5833" y="55.3638">PISP</text>
    <rect fill="#DDDDDD" height="850.6094" style="stroke:#181818;stroke-width:0.5;" width="97.3906" x="640.5151" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.7202" x="655.8503" y="55.3638">Mojaloop</text>
    <rect fill="#DDDDDD" height="850.6094" style="stroke:#181818;stroke-width:0.5;" width="104.9004" x="958.1733" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="53.1489" x="984.0491" y="55.3638">DFSP A</text>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="123.9922" y2="899.9063"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="688.5151" x2="688.5151" y1="123.9922" y2="899.9063"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1010.1733" x2="1010.1733" y1="123.9922" y2="899.9063"/>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.4219" x="5" y="85.7109"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="132.4219" x="12" y="111.2754">PISP Server</text>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.3906" x="644.5151" y="85.7109"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="75.3906" x="651.5151" y="111.2754">Switch</text>
    <rect fill="#F5F5F5" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.9004" x="962.1733" y="62.4297"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="81.7676" x="969.7397" y="87.9941">DFSP A</text>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="82.9004" x="969.1733" y="111.2754">(Payer)</text>
    <rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1433.4507" x="0" y="154.5586"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1433.4507" y1="154.5586" y2="154.5586"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1433.4507" y1="157.5586" y2="157.5586"/>
    <rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="148.4053" x="642.5227" y="143.9922"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.8794" x="648.5227" y="160.0591">Agreement Phase</text>
    <path d="M83,182.125 L83,282.125 L432,282.125 L432,192.125 L422,182.125 L83,182.125 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M422,182.125 L422,192.125 L432,192.125 L422,182.125 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.8076" x="89" y="199.1919">PISP looks up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="204.9399" y="199.1919">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="24.4575" x="365.6055" y="199.1919">and</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.1084" x="89" y="214.3247">checks the terms with the user.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="89" y="229.4575"> </text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="260.9839" x="89" y="244.5903">If the user agrees to the terms, the PISP</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="324.7524" x="89" y="259.7231">uses the FIDO API on the user&apos;s device to sign the</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="21.3345" x="89" y="274.856">the</text>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.4399" x="114.4668" y="274.856">challenge</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.3179" x="189.0391" y="274.856">string</text>
    <rect fill="#D3D3D3" height="310" style="stroke:#181818;stroke-width:0.5;" width="594" x="83" y="292.9219"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="586.9995" x="87" y="308.9888">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="87" y="324.1216">FSPIOP-Source: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="195.6665" x="87" y="339.2544">FSPIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="87" y="354.3872">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.9116" x="95.2646" y="369.52">&quot;responseType&quot;: &quot;ACCEPTED&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.1509" x="95.2646" y="384.6528">&quot;signedPayload&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="194.4097" x="103.5293" y="399.7856">&quot;signedPayloadType&quot;: &quot;FIDO&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.0239" x="103.5293" y="414.9185">&quot;fidoSignedPayload&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85.7441" x="111.7939" y="430.0513">&quot;id&quot;: &quot;string&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="265.3765" x="111.7939" y="445.1841">&quot;rawId&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.0737" x="111.7939" y="460.3169">&quot;response&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="348.3848" x="120.0586" y="475.4497">&quot;authenticatorData&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="328.1357" x="120.0586" y="490.5825">&quot;clientDataJSON&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="290.8687" x="120.0586" y="505.7153">&quot;signature&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="303.5449" x="120.0586" y="520.8481">&quot;userHandle&quot;: &quot;string - base64 encoded utf-8&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="111.7939" y="535.981">},</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.4956" x="111.7939" y="551.1138">&quot;type&quot;: &quot;public-key&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="103.5293" y="566.2466">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="95.2646" y="581.3794">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="87" y="596.5122">}</text>
    <polygon fill="#000000" points="677.2104,625.7109,687.2104,629.7109,677.2104,633.7109,681.2104,629.7109" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="78.2109" x2="683.2104" y1="629.7109" y2="629.7109"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="586.9995" x="90.2109" y="624.645">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="89.2109,654.8438,79.2109,658.8438,89.2109,662.8438,85.2109,658.8438" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="83.2109" x2="688.2104" y1="658.8438" y2="658.8438"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="360.2307" y="653.7778">200 OK</text>
    <polygon fill="#000000" points="998.6235,699.1094,1008.6235,703.1094,998.6235,707.1094,1002.6235,703.1094" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="689.2104" x2="1004.6235" y1="703.1094" y2="703.1094"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="297.4131" x="701.2104" y="682.9106">PUT /thirdpartyRequests/authorizations</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="289.5864" x="705.1238" y="698.0435">/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="700.2104,728.2422,690.2104,732.2422,700.2104,736.2422,696.2104,732.2422" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="694.2104" x2="1009.6235" y1="732.2422" y2="732.2422"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="826.437" y="727.1763">200 OK</text>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1010.6235" x2="1052.6235" y1="761.375" y2="761.375"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1052.6235" x2="1052.6235" y1="761.375" y2="774.375"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1011.6235" x2="1052.6235" y1="774.375" y2="774.375"/>
    <polygon fill="#000000" points="1021.6235,770.375,1011.6235,774.375,1021.6235,778.375,1017.6235,774.375" style="stroke:#000000;stroke-width:1.0;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.7686" x="1017.6235" y="756.3091">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="1098.5244" y="756.3091">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.7285" x="1259.1899" y="756.3091">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="117.3999" x="1309.0508" y="756.3091">authorizationId</text>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1010.6235" x2="1052.6235" y1="803.5078" y2="803.5078"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1052.6235" x2="1052.6235" y1="803.5078" y2="816.5078"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1011.6235" x2="1052.6235" y1="816.5078" y2="816.5078"/>
    <polygon fill="#000000" points="1021.6235,812.5078,1011.6235,816.5078,1021.6235,820.5078,1017.6235,816.5078" style="stroke:#000000;stroke-width:1.0;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.7686" x="1017.6235" y="798.4419">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="70.4399" x="1098.5244" y="798.4419">consentId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.7285" x="1173.0967" y="798.4419">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="1222.9575" y="798.4419">transactionRequestId</text>
    <path d="M851,829.5078 L851,884.5078 L1169,884.5078 L1169,839.5078 L1159,829.5078 L851,829.5078 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M1159,829.5078 L1159,839.5078 L1169,839.5078 L1159,829.5078 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.7437" x="857" y="846.5747">DFSP has the signed challenge.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="297.9019" x="857" y="861.7075">It now needs to ask the Auth-Service to verify</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.9214" x="857" y="876.8403">the signed challenge.</text>
  </g>
</svg>
