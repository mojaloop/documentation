<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="740px" preserveAspectRatio="none" style="width:1440px;height:740px;background:#FFFFFF;" version="1.1" viewBox="0 0 1440 740" width="1440px" zoomAndPan="magnify">
  <title>Transfer: 1.2.3 Signed Authorization</title>
  <defs/>
  <g>
    <text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="288.6133" x="571.9187" y="27.9951">Transfer: 1.2.3 Signed Authorization</text>
    <rect fill="#DDDDDD" height="684.1484" style="stroke:#181818;stroke-width:0.5;" width="154.4219" x="1" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33.2554" x="61.5833" y="55.3638">PISP</text>
    <rect fill="#DDDDDD" height="684.1484" style="stroke:#181818;stroke-width:0.5;" width="97.3906" x="640.5151" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.7202" x="655.8503" y="55.3638">Mojaloop</text>
    <rect fill="#DDDDDD" height="684.1484" style="stroke:#181818;stroke-width:0.5;" width="104.9004" x="958.1733" y="43.2969"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="53.1489" x="984.0491" y="55.3638">DFSP A</text>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="123.9922" y2="733.4453"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="688.5151" x2="688.5151" y1="123.9922" y2="733.4453"/>
    <line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1010.1733" x2="1010.1733" y1="123.9922" y2="733.4453"/>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.4219" x="5" y="85.7109"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="132.4219" x="12" y="111.2754">PISP Server</text>
    <rect fill="#F5F5F5" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.3906" x="644.5151" y="85.7109"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="75.3906" x="651.5151" y="111.2754">Switch</text>
    <rect fill="#F5F5F5" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96.9004" x="962.1733" y="62.4297"/>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="81.7676" x="969.7397" y="87.9941">DFSP A</text>
    <text fill="#000000" font-family="Verdana" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="82.9004" x="969.1733" y="111.2754">(Payer)</text>
    <rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1433.4507" x="0" y="154.5586"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1433.4507" y1="154.5586" y2="154.5586"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1433.4507" y1="157.5586" y2="157.5586"/>
    <rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="148.4053" x="642.5227" y="143.9922"/>
    <text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.8794" x="648.5227" y="160.0591">Agreement Phase</text>
    <path d="M83,182.125 L83,267.125 L422,267.125 L422,192.125 L412,182.125 L83,182.125 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M412,182.125 L412,192.125 L422,192.125 L412,182.125 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.8076" x="89" y="199.1919">PISP looks up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="204.9399" y="199.1919">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="24.4575" x="365.6055" y="199.1919">and</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.772" x="89" y="214.3247">checks the quote with the user.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="89" y="229.4575"> </text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="294.8994" x="89" y="244.5903">If the user agrees to the terms, the PISP uses</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="318.1763" x="89" y="259.7231">the Credential&apos;s privateKey to sign the challenge</text>
    <rect fill="#D3D3D3" height="159" style="stroke:#181818;stroke-width:0.5;" width="594" x="83" y="277.7891"/>
    <text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="586.9995" x="87" y="293.856">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="87" y="308.9888">FSPIOP-Source: pispa</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="195.6665" x="87" y="324.1216">FSPIOP-Destination: dfspa</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="87" y="339.2544">{</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.9116" x="95.2646" y="354.3872">&quot;responseType&quot;: &quot;ACCEPTED&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.1509" x="95.2646" y="369.52">&quot;signedPayload&quot;: {</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="221.0254" x="103.5293" y="384.6528">&quot;signedPayloadType&quot;: &quot;GENERIC&quot;,</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="385.0742" x="103.5293" y="399.7856">&quot;genericSignedPayload&quot;: &quot;utf-8 base64 encoded signature&quot;</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="95.2646" y="414.9185">}</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="8.271" x="87" y="430.0513">}</text>
    <polygon fill="#000000" points="677.2104,459.25,687.2104,463.25,677.2104,467.25,681.2104,463.25" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="78.2109" x2="683.2104" y1="463.25" y2="463.25"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="586.9995" x="90.2109" y="458.1841">PUT /thirdpartyRequests/authorizations/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="89.2109,488.3828,79.2109,492.3828,89.2109,496.3828,85.2109,492.3828" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="83.2109" x2="688.2104" y1="492.3828" y2="492.3828"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="360.2307" y="487.3169">200 OK</text>
    <polygon fill="#000000" points="998.6235,532.6484,1008.6235,536.6484,998.6235,540.6484,1002.6235,536.6484" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="689.2104" x2="1004.6235" y1="536.6484" y2="536.6484"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="297.4131" x="701.2104" y="516.4497">PUT /thirdpartyRequests/authorizations</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="289.5864" x="705.1238" y="531.5825">/33333333-0000-0000-0000-000000000000</text>
    <polygon fill="#000000" points="700.2104,561.7813,690.2104,565.7813,700.2104,569.7813,696.2104,565.7813" style="stroke:#000000;stroke-width:1.0;"/>
    <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="694.2104" x2="1009.6235" y1="565.7813" y2="565.7813"/>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="826.437" y="560.7153">200 OK</text>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1010.6235" x2="1052.6235" y1="594.9141" y2="594.9141"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1052.6235" x2="1052.6235" y1="594.9141" y2="607.9141"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1011.6235" x2="1052.6235" y1="607.9141" y2="607.9141"/>
    <polygon fill="#000000" points="1021.6235,603.9141,1011.6235,607.9141,1021.6235,611.9141,1017.6235,607.9141" style="stroke:#000000;stroke-width:1.0;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.7686" x="1017.6235" y="589.8481">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="1098.5244" y="589.8481">transactionRequestId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.7285" x="1259.1899" y="589.8481">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="117.3999" x="1309.0508" y="589.8481">authorizationId</text>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1010.6235" x2="1052.6235" y1="637.0469" y2="637.0469"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1052.6235" x2="1052.6235" y1="637.0469" y2="650.0469"/>
    <line style="stroke:#000000;stroke-width:1.0;" x1="1011.6235" x2="1052.6235" y1="650.0469" y2="650.0469"/>
    <polygon fill="#000000" points="1021.6235,646.0469,1011.6235,650.0469,1021.6235,654.0469,1017.6235,650.0469" style="stroke:#000000;stroke-width:1.0;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.7686" x="1017.6235" y="631.981">Look up the</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="70.4399" x="1098.5244" y="631.981">consentId</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.7285" x="1173.0967" y="631.981">for this</text>
    <text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="156.5332" x="1222.9575" y="631.981">transactionRequestId</text>
    <path d="M851,663.0469 L851,718.0469 L1169,718.0469 L1169,673.0469 L1159,663.0469 L851,663.0469 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <path d="M1159,663.0469 L1159,673.0469 L1169,673.0469 L1159,663.0469 " fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.7437" x="857" y="680.1138">DFSP has the signed challenge.</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="297.9019" x="857" y="695.2466">It now needs to ask the Auth-Service to verify</text>
    <text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.9214" x="857" y="710.3794">the signed challenge.</text>
  </g>
</svg>
