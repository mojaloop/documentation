<svg xmlns="http://www.w3.org/2000/svg" height="1521" preserveAspectRatio="none" style="width:953px;height:1521px" width="953">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="339" x="305" y="28.708">
    Transaction Requests Service - Create
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M10 305.344h929v1139.93H10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M20 553.273h909v772.797H20z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M30 716.938h889v392.531H30z"/>
  <path fill="#FFF" d="M30 927.867h889v181.602H30zM20 1116.469h909v209.602H20zM10 1333.07h929v112.203H10z"/>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M113 91.547v1370.726M391 91.547v1370.726M774 91.547v1370.726"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M70 56.25h82v30.297H70z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="77" y="76.245">
    Payer FSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M70 1461.273h82v30.297H70z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="77" y="1481.269">
    Payer FSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M283 39.953h212v46.594H283z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="366.5" y="59.948">
    Switch
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="198" x="290" y="76.245">
    transaction-requests-service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M283 1461.273h212v46.594H283z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="366.5" y="1481.269">
    Switch
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="198" x="290" y="1497.565">
    transaction-requests-service
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M729 56.25h86v30.297h-86z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="736" y="76.245">
    Payee FSP
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M729 1461.273h86v30.297h-86z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="736" y="1481.269">
    Payee FSP
  </text>
  <path stroke="#a80036" d="M774 137.813h42M816 137.813v13M775 150.813h41"/>
  <path fill="#A80036" stroke="#a80036" d="M785 146.813l-10 4h10z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="781" y="125.18">
    1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="794" y="117.614">
    Lookup process
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="794" y="132.747">
    (not shown here)
  </text>
  <path d="M317 163.813v25h531v-15l-10-10H317" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M838 163.813v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="382" y="180.879">
    Payee FSP generates a transaction-request to the Payer FSP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M402 215.078l-10 4h10z"/>
  <path stroke="#a80036" d="M391 219.078h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="408" y="214.012">
    2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="421" y="214.012">
    POST /transactionRequests
  </text>
  <path stroke="#a80036" d="M391 248.211h42M433 248.211v13M392 261.211h41"/>
  <path fill="#A80036" stroke="#a80036" d="M402 257.21l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="398" y="243.145">
    3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="411" y="243.145">
    Validate POST /transactionRequests schema
  </text>
  <path fill="#A80036" stroke="#a80036" d="M762 291.344h10l-10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M391 290.344h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="398" y="285.278">
    4
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="411" y="285.278">
    202 Accepted
  </text>
  <path d="M10 305.344h64v7l-10 10H10v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M10 305.344h929v1139.93H10z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="25" y="318.411">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="89" y="317.554">
    [transaction-request is valid]
  </text>
  <path stroke="#a80036" d="M391 343.609h42M433 343.609v13M392 356.609h41"/>
  <path fill="#A80036" stroke="#a80036" d="M402 352.61l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="398" y="338.543">
    5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="356" x="411" y="338.543">
    Validate POST /transactionRequests (internal validation)
  </text>
  <path stroke="#a80036" d="M391 385.742h42M433 385.742v13M392 398.742h41"/>
  <path fill="#A80036" stroke="#a80036" d="M402 394.742l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="398" y="380.676">
    6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="411" y="380.676">
    Retrieve corresponding end-points for Payer FSP
  </text>
  <path d="M32 411.742v25h435v-15l-10-10H32" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M457 411.742v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="414" x="38" y="428.809">
    Switch forwards POST /transactionRequests request to Payer FSP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M124 463.008l-10 4h10z"/>
  <path stroke="#a80036" d="M113 467.008h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="130" y="461.942">
    7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="143" y="461.942">
    POST /transactionRequests
  </text>
  <path fill="#A80036" stroke="#a80036" d="M379 497.14h10l-10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M113 496.141h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="120" y="491.075">
    8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="133" y="491.075">
    202 Accepted
  </text>
  <path stroke="#a80036" d="M113 525.273h42M155 525.273v13M114 538.273h41"/>
  <path fill="#A80036" stroke="#a80036" d="M124 534.273l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="120" y="520.207">
    9
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="133" y="520.207">
    Process transaction-request
  </text>
  <path d="M20 553.273h64v7l-10 10H20v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M20 553.273h909v772.797H20z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="35" y="566.34">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="357" x="99" y="565.484">
    [Payer FSP successfully processes transaction-request]
  </text>
  <path d="M40 575.406v25h424v-15l-10-10H40" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M454 575.406v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="321" x="85" y="592.473">
    Payer FSP responds to POST /transactionRequests
  </text>
  <path fill="#A80036" stroke="#a80036" d="M379 626.672l10 4h-10z"/>
  <path stroke="#a80036" d="M113 630.672h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="120" y="625.606">
    10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="142" y="625.606">
    PUT /transactionRequests/{ID}
  </text>
  <path fill="#A80036" stroke="#a80036" d="M124 660.805h-10l10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M113 659.805h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="130" y="654.739">
    11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="152" y="654.739">
    200 Ok
  </text>
  <path stroke="#a80036" d="M391 688.938h42M433 688.938v13M392 701.938h41"/>
  <path fill="#A80036" stroke="#a80036" d="M402 697.938l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398" y="683.872">
    12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="420" y="683.872">
    Validate PUT /transactionRequests/{ID}
  </text>
  <path d="M30 716.938h64v7l-10 10H30v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M30 716.938h889v392.531H30z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="45" y="730.004">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="109" y="729.148">
    [response is ok]
  </text>
  <path d="M317 739.07v25h531v-15l-10-10H317" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M838 739.07v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="380" x="386" y="756.137">
    Switch forwards transaction-request response to Payee FSP
  </text>
  <path stroke="#a80036" d="M391 794.336h42M433 794.336v13M392 807.336h41"/>
  <path fill="#A80036" stroke="#a80036" d="M402 803.336l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398" y="789.27">
    13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="420" y="789.27">
    Retrieve corresponding end-points for Payee FSP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M762 832.469l10 4h-10z"/>
  <path stroke="#a80036" d="M391 836.469h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398" y="831.403">
    14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="420" y="831.403">
    PUT /transactionRequests/{ID}
  </text>
  <path fill="#A80036" stroke="#a80036" d="M402 866.602h-10l10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M391 865.602h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="408" y="860.536">
    15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="430" y="860.536">
    200 Ok
  </text>
  <path d="M638 878.602v40h267v-30l-10-10H638" fill="#3498DB" filter="url(#a)" stroke="#a80036"/>
  <path d="M895 878.602v10h10l-10-10" fill="#3498DB" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="644" y="895.668">
    Wait for a quote, transfer by Payer FSP
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="644" y="910.801">
    or a rejected transaction-request
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M30 928.867h889"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="35" y="939.078">
    [response invalid]
  </text>
  <path d="M40 947.672v25h424v-15l-10-10H40" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M454 947.672v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="140" y="964.739">
    Switch returns error to Payer FSP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M124 998.938l-10 4h10z"/>
  <path stroke="#a80036" d="M113 1002.938h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="130" y="997.872">
    16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="152" y="997.872">
    PUT /transactionRequests/{ID}/error
  </text>
  <path fill="#A80036" stroke="#a80036" d="M379 1033.07h10l-10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M113 1032.07h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="120" y="1027.004">
    17
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="142" y="1027.004">
    200 Ok
  </text>
  <path d="M40 1045.07v55h424v-45l-10-10H40" fill="#EC7063" filter="url(#a)" stroke="#a80036"/>
  <path d="M454 1045.07v10h10l-10-10" fill="#EC7063" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="156.5" y="1062.137">
    Note that under this
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="156.5" y="1077.27">
    scenario the Payee FSP
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="156.5" y="1092.403">
    may not receive a response
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M20 1117.469h909"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="324" x="25" y="1127.679">
    [Payer FSP calculation fails or rejects the request]
  </text>
  <path d="M40 1136.273v25h424v-15l-10-10H40" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M454 1136.273v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="140" y="1153.34">
    Payer FSP returns error to Switch
  </text>
  <path fill="#A80036" stroke="#a80036" d="M379 1187.54l10 4h-10z"/>
  <path stroke="#a80036" d="M113 1191.539h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="120" y="1186.473">
    18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="142" y="1186.473">
    PUT /transactionRequests/{ID}/error
  </text>
  <path fill="#A80036" stroke="#a80036" d="M124 1221.672h-10l10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M113 1220.672h277"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="130" y="1215.606">
    19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="152" y="1215.606">
    200 OK
  </text>
  <path d="M317 1233.672v25h531v-15l-10-10H317" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M838 1233.672v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="469" y="1250.739">
    Switch returns error to Payee FSP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M762 1284.938l10 4h-10z"/>
  <path stroke="#a80036" d="M391 1288.938h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398" y="1283.872">
    20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="420" y="1283.872">
    PUT /transactionRequests/{ID}/error
  </text>
  <path fill="#A80036" stroke="#a80036" d="M402 1319.07h-10l10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M391 1318.07h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="408" y="1313.004">
    21
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="430" y="1313.004">
    200 OK
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M10 1334.07h929"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="15" y="1344.281">
    [transaction-request is invalid]
  </text>
  <path d="M317 1352.875v25h531v-15l-10-10H317" fill="#FBFB77" filter="url(#a)" stroke="#a80036"/>
  <path d="M838 1352.875v10h10l-10-10" fill="#FBFB77" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="469" y="1369.942">
    Switch returns error to Payee FSP
  </text>
  <path fill="#A80036" stroke="#a80036" d="M762 1404.14l10 4h-10z"/>
  <path stroke="#a80036" d="M391 1408.141h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398" y="1403.075">
    22
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="420" y="1403.075">
    PUT /transactionRequests/{ID}/error
  </text>
  <path fill="#A80036" stroke="#a80036" d="M402 1438.273h-10l10 4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M391 1437.273h382"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="408" y="1432.207">
    23
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="430" y="1432.207">
    200 OK
  </text>
</svg>
