<svg xmlns="http://www.w3.org/2000/svg" height="2544" preserveAspectRatio="none" style="width:1166px;height:2544px" width="1166">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="601" x="280.5" y="28.708">
    6.2.2. Query Settlements by Parameters (getSettlementsByParams)
  </text>
  <path fill="#FFB6C1" stroke="#a80036" d="M58 40.953h114v2497.859H58z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="70.5" y="53.02">
    Central HUB
  </text>
  <path fill="#90EE90" stroke="#a80036" d="M288.5 40.953h428v2497.859h-428z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="433" y="53.02">
    Settlement Service
  </text>
  <path fill="#FFFFE0" stroke="#a80036" d="M798 40.953h125v2497.859H798z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="801" y="53.02">
    Central Services
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M110 153.383h10v2267.133h-10zM368 373.977h10v2046.539h-10zM649 418.242h10v635.047h-10zM855.5 447.375h10v576.781h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M10 160.383h1142v2275.133H10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M20 1068.289h899v1360.227H20z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M373 1161.82h536v510.25H373z"/>
  <path fill="#FFF" d="M20 2243.453h899v185.063H20z"/>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M115 143.383v2309.133M372.5 143.383v2309.133M653.5 143.383v2309.133M860.5 143.383v2309.133"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="62" y="140.081">
    Hub Employee
  </text>
  <circle cx="115" cy="70.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M115 78.086v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="62" y="2464.511">
    Hub Employee
  </text>
  <circle cx="115" cy="2477.813" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="8"/>
  <path d="M115 2485.813v27m-13-19h26m-13 19l-13 15m13-15l13 15" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="292.5" y="140.081">
    Settlement Service API
  </text>
  <path d="M352.5 99.086v24m0-12h17" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <circle cx="381.5" cy="111.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="292.5" y="2464.511">
    Settlement Service API
  </text>
  <path d="M352.5 2471.813v24m0-12h17" fill="none" filter="url(#a)" stroke="#a80036" stroke-width="2"/>
  <circle cx="381.5" cy="2483.813" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="595.5" y="140.081">
    Settlement DAO
  </text>
  <circle cx="654" cy="111.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M642 125.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="595.5" y="2464.511">
    Settlement DAO
  </text>
  <circle cx="654" cy="2483.813" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M642 2497.813h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="812.5" y="140.081">
    Central Store
  </text>
  <path d="M842.5 91.086c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M842.5 91.086c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="812.5" y="2464.511">
    Central Store
  </text>
  <path d="M842.5 2477.813c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M842.5 2477.813c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M110 153.383h10v2267.133h-10zM368 373.977h10v2046.539h-10zM649 418.242h10v635.047h-10zM855.5 447.375h10v576.781h-10z"/>
  <path d="M10 160.383h296v7l-10 10H10v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M10 160.383h1142v2275.133H10z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="251" x="25" y="173.45">
    Query Settlements by Parameters
  </text>
  <path d="M125 182.516v161h491v-151l-10-10H125" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M606 182.516v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="131" y="199.583">
    Params:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="131" y="214.715">
    ?[state={settlementStateId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="131" y="229.848">
    [&amp;fromDateTime={fromDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="131" y="244.981">
    [&amp;toDateTime={toDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="131" y="260.114">
    [&amp;currency={currencyId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="131" y="275.247">
    [&amp;settlementWindowId={settlementWindowId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="470" x="131" y="290.379">
    [&amp;fromSettlementWindowDateTime={fromSettlementWindowDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="436" x="131" y="305.512">
    [&amp;toSettlementWindowDateTime={toSettlementWindowDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="131" y="320.645">
    [&amp;participantId={participantId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="131" y="335.778">
    [&amp;accountId={participantCurrencyId}]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M356 369.977l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M120 373.977h242"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="127" y="368.911">
    1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="140" y="368.911">
    GET - /settlements
  </text>
  <path fill="#A80036" stroke="#a80036" d="M637 414.242l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M378 418.242h265"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="385" y="405.61">
    2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="398" y="398.043">
    Retrieve settlements
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="398" y="413.176">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="484" y="413.176">
    2001
  </text>
  <path fill="#A80036" stroke="#a80036" d="M843.5 443.375l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M659 447.375h190.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="666" y="442.309">
    3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="679" y="442.309">
    Retrieve requested data
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M588 460.375h544l10 268-10 269H588l-10-269 10-268z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="590" y="476.442">
    SELECT
  </text>
  <text fill="#00A" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="642" y="476.442">
    DISTINCT
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="711" y="476.442">
    s.settlementId, ssc.settlementStateId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="446" x="618" y="491.575">
    ssw.settlementWindowId, swsc.settlementWindowStateId, swsc.reason
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="488" x="618" y="506.707">
    settlementWindowReason, sw.createdDate, swsc.createdDate changedDate,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="618" y="521.84">
    pc.participantId, spc.participantCurrencyId, spcsc.reason
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="458" x="618" y="536.973">
    accountReason, spcsc.settlementStateId accountState, spc.netAmount
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="618" y="552.106">
    accountAmount, pc.currencyId accountCurrency
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="590" y="567.239">
    FROM
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="630" y="567.239">
    settlement
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="714" y="567.239">
    s
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="582.372">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="620" y="582.372">
    settlementStateChange
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="799" y="582.372">
    ssc
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="590" y="597.504">
    ON ssc.settlementStateChangeId = s.currentStateChangeId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="612.637">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="219" x="620" y="612.637">
    settlementSettlementWindow
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="843" y="612.637">
    ssw
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="590" y="627.77">
    ON ssw.settlementId = s.settlementId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="642.903">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="620" y="642.903">
    settlementWindow
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="762" y="642.903">
    sw
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="346" x="590" y="658.036">
    ON sw.settlementWindowId = ssw.settlementWindowId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="673.168">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="233" x="620" y="673.168">
    settlementWindowStateChange
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="857" y="673.168">
    swsc
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="450" x="590" y="688.301">
    ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="703.434">
    JOIN
  </text>
  <text fill="#00A" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="620" y="703.434">
    settlementWindowContent
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="820" y="703.434">
    swc
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="346" x="590" y="718.567">
    ON swc.settlementWindowId = sw.settlementWindowId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="733.7">
    JOIN
  </text>
  <text fill="#00A" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="620" y="733.7">
    settlementWindowContentAggregation
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="912" y="733.7">
    swca
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="463" x="590" y="748.832">
    ON swca.settlementWindowContentId = swc.settlementWindowContentId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="763.965">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="620" y="763.965">
    settlementParticipantCurrency
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="850" y="763.965">
    spc
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="590" y="779.098">
    ON spc.settlementId = s.settlementId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="590" y="794.231">
    AND spc.participantCurrencyId = swca.participantCurrencyId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="809.364">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="321" x="620" y="809.364">
    settlementParticipantCurrencyStateChange
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="945" y="809.364">
    spcsc
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="540" x="590" y="824.497">
    ON spcsc.settlementParticipantCurrencyStateChangeId = spc.currentStateChangeId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="590" y="839.629">
    JOIN
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="620" y="839.629">
    participantCurrency
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="15" x="770" y="839.629">
    pc
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="590" y="854.762">
    ON pc.participantCurrencyId = spc.participantCurrencyId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="351" x="590" y="869.895">
    WHERE [ssc.settlementStateId = {settlementStateId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="590" y="885.028">
    [AND s.createdDate &gt;= {fromDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="590" y="900.161">
    [AND s.createdDate &lt;= {toDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="590" y="915.293">
    [AND pc.currencyId = {currencyId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="590" y="930.426">
    [AND sw.settlementWindowId =
  </text>
  <text fill="#00A" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="144" x="795" y="930.426">
    {settlementWindowId}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="939" y="930.426">
    ]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="400" x="590" y="945.559">
    [AND sw.createdDate &gt;= {fromSettlementWindowDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="383" x="590" y="960.692">
    [AND sw.createdDate &lt;= {toSettlementWindowDateTime}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="590" y="975.825">
    [AND pc.participantId = {participantId}]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="376" x="590" y="990.957">
    [AND spc.participantCurrencyId = {participantCurrencyId}]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M670 1020.156l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M664 1024.156h195.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="676" y="1019.09">
    4
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="689" y="1019.09">
    Return data
  </text>
  <path fill="#A80036" stroke="#a80036" d="M389 1049.29l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M383 1053.289h270"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="395" y="1048.223">
    5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="408" y="1048.223">
    Return
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="123" x="454" y="1048.223">
    settlementsData
  </text>
  <path d="M20 1068.29h64v7l-10 10H20v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M20 1068.289h899v1360.227H20z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="35" y="1081.356">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="99" y="1080.499">
    [Settlement(s) found]
  </text>
  <path d="M383 1090.422v55h153v-45l-10-10H383" fill="#D3D3D3" filter="url(#a)" stroke="#a80036"/>
  <path d="M526 1090.422v10h10l-10-10" fill="#D3D3D3" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="389" y="1107.489">
    let settlements = {}
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="389" y="1122.622">
    let settlement
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="389" y="1137.754">
    let participant
  </text>
  <path d="M373 1161.82h77v7l-10 10h-67v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M373 1161.82h536v510.25H373z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="388" y="1174.887">
    loop
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="465" y="1174.031">
    [settlementsData]
  </text>
  <path d="M383 1183.953v479h512v-469l-10-10H383" fill="#D3D3D3" filter="url(#a)" stroke="#a80036"/>
  <path d="M885 1183.953v10h10l-10-10" fill="#D3D3D3" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="389" y="1201.02">
    if (!settlements[settlementsData.settlementId]) {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="405" y="1216.153">
    settlements[settlementsData.settlementId] = {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="421" y="1231.286">
    &quot;id: settlementsData.settlementId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="279" x="421" y="1246.418">
    &quot;state&quot;: settlementsData.settlementStateId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="405" y="1261.551">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="389" y="1276.684">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="389" y="1291.817">
    settlement = settlements[settlementsData.settlementId]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="486" x="389" y="1306.95">
    if (!settlement.settlementWindows[settlementsData.settlementWindowId]) {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="475" x="405" y="1322.082">
    settlement.settlementWindows[settlementsData.settlementWindowId] = {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="421" y="1337.215">
    &quot;id&quot;: settlementsData.settlementWindowId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="330" x="421" y="1352.348">
    &quot;state&quot;: settlementsData.settlementWindowStateId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="421" y="1367.481">
    &quot;reason&quot;: settlementsData.settlementWindowReason,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="421" y="1382.614">
    &quot;createdDate&quot;: settlementsData.createdDate,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="421" y="1397.747">
    &quot;changedDate&quot;: settlementsData.changedDate
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="405" y="1412.879">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="389" y="1428.012">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="388" x="389" y="1443.145">
    if (!settlement.participants[settlementsData.participantId]) {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="405" y="1458.278">
    settlement.participants[settlementsData.participantId] = {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="421" y="1473.411">
    &quot;id&quot;: settlementsData.participantId
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="405" y="1488.543">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="389" y="1503.676">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="437" x="389" y="1518.809">
    participant = settlement.participants[settlementsData.participantId]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="341" x="389" y="1533.942">
    participant.accounts[settlementsData.accountId] = {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="405" y="1549.075">
    &quot;id&quot;: settlementsData.participantCurrencyId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="405" y="1564.207">
    &quot;state&quot;: settlementsData.accountState,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="405" y="1579.34">
    &quot;reason&quot;: settlementsData.accountReason,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="405" y="1594.473">
    &quot;netSettlementAmount&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="421" y="1609.606">
    &quot;amount&quot;: settlementsData.accountAmount,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="421" y="1624.739">
    &quot;currency&quot;: settlementsData.accountCurrency
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="405" y="1639.872">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="389" y="1655.004">
    }
  </text>
  <path stroke="#a80036" d="M378 1705.203h42M420 1705.203v13M373 1718.203h47"/>
  <path fill="#A80036" stroke="#a80036" d="M383 1714.203l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="385" y="1700.137">
    6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="398" y="1700.137">
    Transform
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="467" y="1700.137">
    settlements
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="559" y="1700.137">
    map to array
  </text>
  <path d="M44 1726.203v479h315v-469l-10-10H44" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M349 1726.203v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="50" y="1743.27">
    [
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="66" y="1758.403">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="82" y="1773.536">
    &quot;id&quot;: settlementId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="82" y="1788.668">
    &quot;state&quot;: settlementStateId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="82" y="1803.801">
    &quot;settlementWindows&quot;: [
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="98" y="1818.934">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="114" y="1834.067">
    &quot;id&quot;: settlementWindowId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="114" y="1849.2">
    &quot;state&quot;: settlementWindowStateId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="114" y="1864.332">
    &quot;reason&quot;: settlementWindowReason,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="114" y="1879.465">
    &quot;createdDate&quot;: createdDate,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="114" y="1894.598">
    &quot;changedDate&quot;: changedDate
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="98" y="1909.731">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="82" y="1924.864">
    ],
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="82" y="1939.997">
    &quot;participants&quot;: [
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="98" y="1955.129">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="114" y="1970.262">
    &quot;id&quot;: participantId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="114" y="1985.395">
    &quot;accounts&quot;: [
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="130" y="2000.528">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="146" y="2015.661">
    &quot;id&quot;: participantCurrencyId,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="146" y="2030.793">
    &quot;state&quot;: accountState,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="146" y="2045.926">
    &quot;reason&quot;: accountReason,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="146" y="2061.059">
    &quot;netSettlementAmount&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="162" y="2076.192">
    &quot;amount&quot;: accountAmount,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="162" y="2091.325">
    &quot;currency&quot;: accountCurrency
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="146" y="2106.457">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="130" y="2121.59">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="114" y="2136.723">
    ]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="98" y="2151.856">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="82" y="2166.989">
    ]
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="66" y="2182.122">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="50" y="2197.254">
    ]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M131 2231.453l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M125 2235.453h242"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="137" y="2230.387">
    7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="150" y="2230.387">
    Respond HTTP - 200 (OK)
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M20 2244.453h899"/>
  <path d="M383 2250.453v25h130v-15l-10-10H383" fill="#D3D3D3" filter="url(#a)" stroke="#a80036"/>
  <path d="M503 2250.453v10h10l-10-10" fill="#D3D3D3" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="389" y="2267.52">
    Log ERROR event
  </text>
  <path d="M30 2289.586v100h329v-90l-10-10H30" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M349 2289.586v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="36" y="2306.653">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="52" y="2321.786">
    errorInformation: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="68" y="2336.919">
    &quot;errorCode&quot;: &lt;integer&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="68" y="2352.051">
    &quot;errorDescription&quot;: &quot;Client error description&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="52" y="2367.184">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="36" y="2382.317">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M126 2416.516l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M120 2420.516h252"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="132" y="2415.45">
    8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="145" y="2415.45">
    Respond HTTP - 4xx (Client error)
  </text>
</svg>
