<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1006px" preserveAspectRatio="none" style="width:1407px;height:1006px;" version="1.1" viewBox="0 0 1407 1006" width="1407px" zoomAndPan="magnify"><defs><filter height="300%" id="f7iu8gvbi0ygr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="620.5" y="23.5352">2.3.0. Transfer Timeout</text><rect fill="#D3D3D3" height="960.6719" style="stroke: #A80036; stroke-width: 1.0;" width="186" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="7" y="47.0566">Financial Service Providers</text><rect fill="#ADD8E6" height="960.6719" style="stroke: #A80036; stroke-width: 1.0;" width="361" x="192" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="294" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="960.6719" style="stroke: #A80036; stroke-width: 1.0;" width="825" x="555" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="917" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="645.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1134" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="704.4082" style="stroke: #000000; stroke-width: 2.0;" width="1373" x="23" y="170.7754"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="210.4395" style="stroke: #000000; stroke-width: 2.0;" width="837" x="549" y="281.0176"/><rect fill="#FFFFFF" height="163.8184" style="stroke: none; stroke-width: 1.0;" width="837" x="549" y="327.6387"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1353" x="33" y="505.457"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1294" x="92" y="735.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="126" x2="126" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="251" x2="251" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="432" x2="432" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="650" x2="650" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="843" x2="843" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="996" x2="996" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1139" x2="1139" y1="153.7754" y2="892.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1302" x2="1302" y1="153.7754" y2="892.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="134.334">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="150.8223">Payer</text><ellipse cx="67.5" cy="63.7988" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,71.7988 L67.5,98.7988 M54.5,79.7988 L80.5,79.7988 M67.5,98.7988 L54.5,113.7988 M67.5,98.7988 L80.5,113.7988 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="904.7188">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="921.207">Payer</text><ellipse cx="67.5" cy="934.1602" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,942.1602 L67.5,969.1602 M54.5,950.1602 L80.5,950.1602 M67.5,969.1602 L54.5,984.1602 M67.5,969.1602 L80.5,984.1602 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="134.334">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="150.8223">Payee</text><ellipse cx="126.5" cy="63.7988" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,71.7988 L126.5,98.7988 M113.5,79.7988 L139.5,79.7988 M126.5,98.7988 L113.5,113.7988 M126.5,98.7988 L139.5,113.7988 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="904.7188">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="921.207">Payee</text><ellipse cx="126.5" cy="934.1602" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,942.1602 L126.5,969.1602 M113.5,950.1602 L139.5,950.1602 M126.5,969.1602 L113.5,984.1602 M126.5,969.1602 L139.5,984.1602 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="196" y="150.8223">ML API Adapter</text><path d="M230.5,109.2871 L230.5,133.2871 M230.5,121.2871 L247.5,121.2871 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="259.5" cy="121.2871" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="196" y="904.7188">ML API Adapter</text><path d="M230.5,911.6719 L230.5,935.6719 M230.5,923.6719 L247.5,923.6719 " fill="none" filter="url(#f7iu8gvbi0ygr)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="259.5" cy="923.6719" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="316" y="150.8223">ML API Notification Event Handler</text><ellipse cx="432.5" cy="121.2871" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="428.5,109.2871,434.5,104.2871,432.5,109.2871,434.5,114.2871,428.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="316" y="904.7188">ML API Notification Event Handler</text><ellipse cx="432.5" cy="923.6719" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="428.5,911.6719,434.5,906.6719,432.5,911.6719,434.5,916.6719,428.5,911.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="559" y="150.8223">Transfer Timeout Handler</text><ellipse cx="650.5" cy="121.2871" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="646.5,109.2871,652.5,104.2871,650.5,109.2871,652.5,114.2871,646.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="559" y="904.7188">Transfer Timeout Handler</text><ellipse cx="650.5" cy="923.6719" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="646.5,911.6719,652.5,906.6719,650.5,911.6719,652.5,916.6719,646.5,911.6719" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="756" y="114.2871"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="752" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="160" x="759" y="138.8223">topic-transfer-position</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="756" y="891.1836"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="752" y="895.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="160" x="759" y="915.7188">topic-transfer-position</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="948" y="114.2871"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="944" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="951" y="138.8223">Event-Topic</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="948" y="891.1836"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="944" y="895.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="951" y="915.7188">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="1059" y="150.8223">Position Event Handler</text><ellipse cx="1139" cy="121.2871" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1135,109.2871,1141,104.2871,1139,109.2871,1141,114.2871,1135,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="1059" y="904.7188">Position Event Handler</text><ellipse cx="1139" cy="923.6719" fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1135,911.6719,1141,906.6719,1139,911.6719,1141,916.6719,1135,911.6719" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1233" y="114.2871"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1229" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1236" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1233" y="891.1836"/><rect fill="#FEFECE" filter="url(#f7iu8gvbi0ygr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1229" y="895.1836"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1236" y="915.7188">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="645.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="718.4082" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1134" y="163.7754"/><path d="M23,170.7754 L173,170.7754 L173,177.7754 L163,187.7754 L23,187.7754 L23,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="704.4082" style="stroke: #000000; stroke-width: 2.0;" width="1373" x="23" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="38" y="184.3438">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="492" x="556" y="213.0859"/><polygon fill="#EEEEEE" points="556,213.0859,620,213.0859,620,220.0859,610,230.0859,556,230.0859,556,213.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="569" y="227.6543">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="696" y="246.6543">Timeout Handler Consume {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-timeout-2.3.1.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-timeout-2.3.1.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="32" x="872" y="246.6543">2.3.1</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="872" x2="904" y1="248.6543" y2="248.6543"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="904" y="246.6543">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="700" y="261.9648"/><path d="M549,281.0176 L611,281.0176 L611,288.0176 L601,298.0176 L549,298.0176 L549,281.0176 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="210.4395" style="stroke: #000000; stroke-width: 2.0;" width="837" x="549" y="281.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="564" y="294.5859">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="626" y="293.6523">[transferStateId == 'RECEIVED_PREPARE']</text><polygon fill="#A80036" points="1290.5,315.6387,1300.5,319.6387,1290.5,323.6387,1294.5,319.6387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="1296.5" y1="319.6387" y2="319.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="662.5" y="314.8965">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="675.5" y="314.8965">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="549" x2="1386" y1="328.6387" y2="328.6387"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="554" y="339.2734">[transferStateId == 'RESERVED']</text><polygon fill="#A80036" points="831,359.9043,841,363.9043,831,367.9043,835,363.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="837" y1="363.9043" y2="363.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="662.5" y="359.1621">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="675.5" y="359.1621">Produce message</text><polygon fill="#A80036" points="854,389.2148,844,393.2148,854,397.2148,850,393.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="848" x2="1133" y1="393.2148" y2="393.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="860" y="388.4727">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="873" y="388.4727">Consume message</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="626" x="749" y="401.2148"/><polygon fill="#EEEEEE" points="749,401.2148,813,401.2148,813,408.2148,803,418.2148,749,418.2148,749,401.2148" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="762" y="415.7832">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="926.5" y="434.7832">Position Hander Consume (Timeout) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-position-1.3.3-abort.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-position-1.3.3-abort.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="32" x="1161.5" y="434.7832">1.3.3</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1161.5" x2="1193.5" y1="436.7832" y2="436.7832"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1193.5" y="434.7832">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="930.5" y="450.0938"/><polygon fill="#A80036" points="1290.5,479.457,1300.5,483.457,1290.5,487.457,1294.5,483.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1144" x2="1296.5" y1="483.457" y2="483.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1151" y="478.7148">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1164" y="478.7148">Produce message</text><path d="M33,505.457 L100,505.457 L100,512.457 L90,522.457 L33,522.457 L33,505.457 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1353" x="33" y="505.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="48" y="519.0254">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="115" y="518.0918">[action IN ['timeout-received', 'timeout-reserved']]</text><polygon fill="#A80036" points="1290.5,565.0781,1300.5,569.0781,1290.5,573.0781,1294.5,569.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="1296.5" y1="569.0781" y2="569.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="444.5" y="564.3359">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="457.5" y="564.3359">Consume message</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1335" x="40" y="577.0781"/><polygon fill="#EEEEEE" points="40,577.0781,104,577.0781,104,584.0781,94,594.0781,40,594.0781,40,577.0781" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="53" y="591.6465">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="560" y="610.6465">Send notification to Participant (Payer) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="43" x="808" y="610.6465">1.1.4.a</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="808" x2="851" y1="612.6465" y2="612.6465"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="851" y="610.6465">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="564" y="625.957"/><polygon fill="#A80036" points="78.5,655.3203,68.5,659.3203,78.5,663.3203,74.5,659.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="426.5" y1="659.3203" y2="659.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="84.5" y="654.5781">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="97.5" y="654.5781">Send callback notification</text><polygon fill="#A80036" points="1290.5,716.6309,1300.5,720.6309,1290.5,724.6309,1294.5,720.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="1296.5" y1="720.6309" y2="720.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="444.5" y="715.8887">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="457.5" y="715.8887">Consume message</text><path d="M92,735.6309 L159,735.6309 L159,742.6309 L149,752.6309 L92,752.6309 L92,735.6309 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1294" x="92" y="735.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="107" y="749.1992">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="174" y="748.2656">[action == 'timeout-reserved']</text><rect fill="#FFFFFF" filter="url(#f7iu8gvbi0ygr)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1276" x="99" y="777.9414"/><polygon fill="#EEEEEE" points="99,777.9414,163,777.9414,163,784.9414,153,794.9414,99,794.9414,99,777.9414" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="112" y="792.5098">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="588.5" y="811.5098">Send notification to Participant (Payee) {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="43" x="838.5" y="811.5098">1.1.4.a</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="838.5" x2="881.5" y1="813.5098" y2="813.5098"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="881.5" y="811.5098">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="592.5" y="826.8203"/><polygon fill="#A80036" points="137.5,856.1836,127.5,860.1836,137.5,864.1836,133.5,860.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="426.5" y1="860.1836" y2="860.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="143.5" y="855.4414">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="156.5" y="855.4414">Send callback notification</text><!--
@startuml
title 2.3.0. Transfer Timeout

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API Adapter" as MLAPI
control "ML API Notification Event Handler" as NOTIFY_HANDLER
control "Transfer Timeout Handler" as EXP_HANDLER
collections "topic-transfer-position" as TOPIC_TRANSFER_POSITION
control "Position Event Handler" as POS_HANDLER
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENT

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_TRANSFER_POSITION
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-timeout-2.3.1.svg 2.3.1]]} \n
    alt transferStateId == 'RECEIVED_PREPARE'
        EXP_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    else transferStateId == 'RESERVED'
        EXP_HANDLER -> TOPIC_TRANSFER_POSITION: Produce message
        TOPIC_TRANSFER_POSITION <- POS_HANDLER: Consume message
        ref over TOPIC_TRANSFER_POSITION, TOPIC_NOTIFICATIONS :  Position Hander Consume (Timeout) {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-position-1.3.3-abort.svg 1.3.3]]} \n
        POS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    end
    opt action IN ['timeout-received', 'timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer) {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg 1.1.4.a]]} \n
        NOTIFY_HANDLER -> DFSP1: Send callback notification
    end
    |||
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
    opt action == 'timeout-reserved'
        |||
        ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee) {[[https://github.com/mojaloop/docs/blob/master/Diagrams/SequenceDiagrams/seq-prepare-1.1.4.a.svg 1.1.4.a]]} \n
        NOTIFY_HANDLER -> DFSP2: Send callback notification
    end
end
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.14.5
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>