<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1150px" preserveAspectRatio="none" style="width:1363px;height:1150px;" version="1.1" viewBox="0 0 1363 1150" width="1363px" zoomAndPan="magnify"><defs><filter height="300%" id="fypx9nhdm4pop" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="598.5" y="23.5352">2.3.0. Transfer Timeout</text><rect fill="#D3D3D3" height="1105.2246" style="stroke: #A80036; stroke-width: 1.0;" width="186" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="7" y="47.0566">Financial Service Providers</text><rect fill="#ADD8E6" height="1105.2246" style="stroke: #A80036; stroke-width: 1.0;" width="230" x="192" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="228.5" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="1105.2246" style="stroke: #A80036; stroke-width: 1.0;" width="912" x="424" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="829.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="862.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="863.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="862.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="794" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="862.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1105" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="848.9609" style="stroke: #000000; stroke-width: 2.0;" width="1329" x="23" y="170.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="210.4395" style="stroke: #000000; stroke-width: 2.0;" width="584.5" x="757.5" y="425.5703"/><rect fill="#FFFFFF" height="163.8184" style="stroke: none; stroke-width: 1.0;" width="584.5" x="757.5" y="472.1914"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1309" x="33" y="650.0098"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1250" x="92" y="880.1836"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="126" x2="126" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="226" x2="226" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="375" x2="375" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="488" x2="488" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="638.5" x2="638.5" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="798.5" x2="798.5" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="950" x2="950" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1109.5" x2="1109.5" y1="153.7754" y2="1036.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1261" x2="1261" y1="153.7754" y2="1036.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="134.334">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="150.8223">Payer</text><ellipse cx="67.5" cy="63.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,71.7988 L67.5,98.7988 M54.5,79.7988 L80.5,79.7988 M67.5,98.7988 L54.5,113.7988 M67.5,98.7988 L80.5,113.7988 " fill="none" filter="url(#fypx9nhdm4pop)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="1049.2715">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="1065.7598">Payer</text><ellipse cx="67.5" cy="1078.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,1086.7129 L67.5,1113.7129 M54.5,1094.7129 L80.5,1094.7129 M67.5,1113.7129 L54.5,1128.7129 M67.5,1113.7129 L80.5,1128.7129 " fill="none" filter="url(#fypx9nhdm4pop)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="134.334">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="150.8223">Payee</text><ellipse cx="126.5" cy="63.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,71.7988 L126.5,98.7988 M113.5,79.7988 L139.5,79.7988 M126.5,98.7988 L113.5,113.7988 M126.5,98.7988 L139.5,113.7988 " fill="none" filter="url(#fypx9nhdm4pop)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="1049.2715">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="1065.7598">Payee</text><ellipse cx="126.5" cy="1078.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,1086.7129 L126.5,1113.7129 M113.5,1094.7129 L139.5,1094.7129 M126.5,1113.7129 L113.5,1128.7129 M126.5,1113.7129 L139.5,1128.7129 " fill="none" filter="url(#fypx9nhdm4pop)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="201" y="134.334">ML API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="196" y="150.8223">Adapter</text><path d="M206,92.7988 L206,116.7988 M206,104.7988 L223,104.7988 " fill="none" filter="url(#fypx9nhdm4pop)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="235" cy="104.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="201" y="1049.2715">ML API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="196" y="1065.7598">Adapter</text><path d="M206,1072.7129 L206,1096.7129 M206,1084.7129 L223,1084.7129 " fill="none" filter="url(#fypx9nhdm4pop)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="235" cy="1084.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="333" y="134.334">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="345.5" y="150.8223">Handler</text><ellipse cx="375.5" cy="104.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="371.5,92.7988,377.5,87.7988,375.5,92.7988,377.5,97.7988,371.5,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="333" y="1049.2715">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="345.5" y="1065.7598">Handler</text><ellipse cx="375.5" cy="1084.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="371.5,1072.7129,377.5,1067.7129,375.5,1072.7129,377.5,1077.7129,371.5,1072.7129" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="428" y="134.334">Timeout Prepare</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="458" y="150.8223">Handler</text><ellipse cx="488" cy="104.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="484,92.7988,490,87.7988,488,92.7988,490,97.7988,484,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="428" y="1049.2715">Timeout Prepare</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="458" y="1065.7598">Handler</text><ellipse cx="488" cy="1084.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="484,1072.7129,490,1067.7129,488,1072.7129,490,1077.7129,484,1072.7129" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="574.5" y="97.7988"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="570.5" y="101.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="614" y="122.334">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="577.5" y="138.8223">transfer-timeout</text><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="574.5" y="1035.7363"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="570.5" y="1039.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="614" y="1060.2715">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="577.5" y="1076.7598">transfer-timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="767.5" y="134.334">Timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="769" y="150.8223">Handler</text><ellipse cx="799" cy="104.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="795,92.7988,801,87.7988,799,92.7988,801,97.7988,795,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="767.5" y="1049.2715">Timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="769" y="1065.7598">Handler</text><ellipse cx="799" cy="1084.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="795,1072.7129,801,1067.7129,799,1072.7129,801,1077.7129,795,1072.7129" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="884" y="97.7988"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="880" y="101.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="925" y="122.334">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="887" y="138.8223">transfer-position</text><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="884" y="1035.7363"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="880" y="1039.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="925" y="1060.2715">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="887" y="1076.7598">transfer-position</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="1079.5" y="134.334">Position</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1080" y="150.8223">Handler</text><ellipse cx="1110" cy="104.7988" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1106,92.7988,1112,87.7988,1110,92.7988,1112,97.7988,1106,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="1079.5" y="1049.2715">Position</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1080" y="1065.7598">Handler</text><ellipse cx="1110" cy="1084.7129" fill="#FEFECE" filter="url(#fypx9nhdm4pop)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1106,1072.7129,1112,1067.7129,1110,1072.7129,1112,1077.7129,1106,1072.7129" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="1194" y="114.2871"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="1190" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="1197" y="138.8223">topic-notification</text><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="1194" y="1035.7363"/><rect fill="#FEFECE" filter="url(#fypx9nhdm4pop)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="1190" y="1039.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="1197" y="1060.2715">topic-notification</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="862.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="863.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="483" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="862.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="794" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="862.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1105" y="163.7754"/><path d="M23,170.7754 L173,170.7754 L173,177.7754 L163,187.7754 L23,187.7754 L23,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="848.9609" style="stroke: #000000; stroke-width: 2.0;" width="1329" x="23" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="38" y="184.3438">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="281.5" x="425" y="213.0859"/><polygon fill="#EEEEEE" points="425,213.0859,489,213.0859,489,220.0859,479,230.0859,425,230.0859,425,213.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="438" y="227.6543">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="447.75" y="246.6543">Timeout Processing Handler Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="451.75" y="261.9648"/><polygon fill="#A80036" points="627,291.3281,637,295.3281,627,299.3281,631,295.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="493" x2="633" y1="295.3281" y2="295.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="500" y="290.5859">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="513" y="290.5859">Produce message</text><polygon fill="#A80036" points="650,345.6387,640,349.6387,650,353.6387,646,349.6387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644" x2="793" y1="349.6387" y2="349.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="656" y="344.8965">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="669" y="344.8965">Consume message</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="262" x="567.5" y="357.6387"/><polygon fill="#EEEEEE" points="567.5,357.6387,631.5,357.6387,631.5,364.6387,621.5,374.6387,567.5,374.6387,567.5,357.6387" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="580.5" y="372.207">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="580.5" y="391.207">Timeout Processing Handler Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="584.5" y="406.5176"/><path d="M757.5,425.5703 L819.5,425.5703 L819.5,432.5703 L809.5,442.5703 L757.5,442.5703 L757.5,425.5703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="210.4395" style="stroke: #000000; stroke-width: 2.0;" width="584.5" x="757.5" y="425.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="772.5" y="439.1387">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="834.5" y="438.2051">[transferStateId == 'RECEIVED_PREPARE']</text><polygon fill="#A80036" points="1249,460.1914,1259,464.1914,1249,468.1914,1253,464.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="804" x2="1255" y1="464.1914" y2="464.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="811" y="459.4492">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="824" y="459.4492">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="757.5" x2="1342" y1="473.1914" y2="473.1914"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="762.5" y="483.8262">[transferStateId == 'RESERVED']</text><polygon fill="#A80036" points="938,504.457,948,508.457,938,512.457,942,508.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="804" x2="944" y1="508.457" y2="508.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="811" y="503.7148">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="824" y="503.7148">Produce message</text><polygon fill="#A80036" points="961,533.7676,951,537.7676,961,541.7676,957,537.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="955" x2="1104" y1="537.7676" y2="537.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="967" y="533.0254">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="980" y="533.0254">Consume message</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="454" x="877" y="545.7676"/><polygon fill="#EEEEEE" points="877,545.7676,941,545.7676,941,552.7676,931,562.7676,877,562.7676,877,545.7676" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="890" y="560.3359">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="992.5" y="579.3359">Position Hander Consume (Timeout)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="996.5" y="594.6465"/><polygon fill="#A80036" points="1249,624.0098,1259,628.0098,1249,632.0098,1253,628.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1115" x2="1255" y1="628.0098" y2="628.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1122" y="623.2676">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1135" y="623.2676">Produce message</text><path d="M33,650.0098 L100,650.0098 L100,657.0098 L90,667.0098 L33,667.0098 L33,650.0098 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1309" x="33" y="650.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="48" y="663.5781">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="115" y="662.6445">[action IN ['timeout-received', 'timeout-reserved']]</text><polygon fill="#A80036" points="1249,709.6309,1259,713.6309,1249,717.6309,1253,713.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="380.5" x2="1255" y1="713.6309" y2="713.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="387.5" y="708.8887">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="400.5" y="708.8887">Consume message</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1291" x="40" y="721.6309"/><polygon fill="#EEEEEE" points="40,721.6309,104,721.6309,104,728.6309,94,738.6309,40,738.6309,40,721.6309" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="53" y="736.1992">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="567.5" y="755.1992">Send notification to Participant (Payer)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="571.5" y="770.5098"/><polygon fill="#A80036" points="78.5,799.873,68.5,803.873,78.5,807.873,74.5,803.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="369.5" y1="803.873" y2="803.873"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="84.5" y="799.1309">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="97.5" y="799.1309">Send callback notification</text><polygon fill="#A80036" points="1249,861.1836,1259,865.1836,1249,869.1836,1253,865.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="380.5" x2="1255" y1="865.1836" y2="865.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="387.5" y="860.4414">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="400.5" y="860.4414">Consume message</text><path d="M92,880.1836 L159,880.1836 L159,887.1836 L149,897.1836 L92,897.1836 L92,880.1836 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1250" x="92" y="880.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="107" y="893.752">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="174" y="892.8184">[action == 'timeout-reserved']</text><rect fill="#FFFFFF" filter="url(#fypx9nhdm4pop)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1232" x="99" y="922.4941"/><polygon fill="#EEEEEE" points="99,922.4941,163,922.4941,163,929.4941,153,939.4941,99,939.4941,99,922.4941" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="112" y="937.0625">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="596" y="956.0625">Send notification to Participant (Payee)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="600" y="971.373"/><polygon fill="#A80036" points="137.5,1000.7363,127.5,1004.7363,137.5,1008.7363,133.5,1004.7363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="369.5" y1="1004.7363" y2="1004.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="143.5" y="999.9941">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="165.5" y="999.9941">Send callback notification</text><!--
@startuml
title 2.3.0. Transfer Timeout

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API\nAdapter" as MLAPI
control "Notification\nHandler" as NOTIFY_HANDLER
control  "Timeout Prepare\nHandler" as TIMEOUT_PREP_HANDLER
collections "topic-\ntransfer-timeout" as TOPIC_TRANSFER_TIMEOUT
control "Timeout\nHandler" as TIMEOUT_HANDLER
collections "topic-\ntransfer-position" as TOPIC_TRANSFER_POSITION
control "Position\nHandler" as POS_HANDLER
collections "topic-notification" as TOPIC_NOTIFICATIONS

box "Financial Service Providers" #lightgray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #lightblue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #lightyellow
    participant TIMEOUT_PREP_HANDLER
    participant TOPIC_TRANSFER_TIMEOUT
    participant TIMEOUT_HANDLER
    participant TOPIC_TRANSFER_POSITION
    participant POS_HANDLER
    participant TOPIC_NOTIFICATIONS
end box

activate TIMEOUT_PREP_HANDLER
activate NOTIFY_HANDLER
activate TIMEOUT_HANDLER
activate POS_HANDLER
group Transfer Expiry
    |||
    ref over TIMEOUT_PREP_HANDLER, TOPIC_TRANSFER_TIMEOUT:  Timeout Processing Handler Consume\n
    TIMEOUT_PREP_HANDLER -> TOPIC_TRANSFER_TIMEOUT: Produce message
    |||
    TOPIC_TRANSFER_TIMEOUT <- TIMEOUT_HANDLER: Consume message
    ref over TOPIC_TRANSFER_TIMEOUT, TIMEOUT_HANDLER:  Timeout Processing Handler Consume\n
    alt transferStateId == 'RECEIVED_PREPARE'
        TIMEOUT_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    else transferStateId == 'RESERVED'
        TIMEOUT_HANDLER -> TOPIC_TRANSFER_POSITION: Produce message
        TOPIC_TRANSFER_POSITION <- POS_HANDLER: Consume message
        ref over TOPIC_TRANSFER_POSITION, TOPIC_NOTIFICATIONS:  Position Hander Consume (Timeout)\n
        POS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    end
    opt action IN ['timeout-received', 'timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer)\n
        NOTIFY_HANDLER -> DFSP1: Send callback notification
    end
    |||
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
    opt action == 'timeout-reserved'
        |||
        ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee)\n
        NOTIFY_HANDLER -> DFSP2: Send callback notification
    end
end
deactivate POS_HANDLER
deactivate TIMEOUT_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.15.1
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>