<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1393px" preserveAspectRatio="none" style="width:1485px;height:1393px;" version="1.1" viewBox="0 0 1485 1393" width="1485px" zoomAndPan="magnify"><defs><filter height="300%" id="fqxyl1lal4un7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="269" x="608.5" y="23.5352">4.2.0 Get Positions of all Participants</text><rect fill="#ADD8E6" height="1347.7832" style="stroke: #A80036; stroke-width: 1.0;" width="163" x="5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="8" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="1347.7832" style="stroke: #A80036; stroke-width: 1.0;" width="1012" x="429.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="885" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1180.4961" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="81.5" y="126.2871"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1134.875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="495.5" y="171.9082"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1061.2539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="752.5" y="201.2188"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="182.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1054.5" y="245.8398"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="93.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1384.5" y="305.7715"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1166.4961" style="stroke: #000000; stroke-width: 2.0;" width="1460" x="13" y="133.2871"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="86" x2="86" y1="116.2871" y2="1316.7832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="500.5" x2="500.5" y1="116.2871" y2="1316.7832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="757" x2="757" y1="116.2871" y2="1316.7832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1059.5" x2="1059.5" y1="116.2871" y2="1316.7832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1389.5" x2="1389.5" y1="116.2871" y2="1316.7832"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="23" y="113.334">ML-API-ADAPTER</text><ellipse cx="86.5" cy="83.7988" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="74.5" x2="98.5" y1="97.7988" y2="97.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="23" y="1329.3184">ML-API-ADAPTER</text><ellipse cx="86.5" cy="1348.2715" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="74.5" x2="98.5" y1="1362.2715" y2="1362.2715"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="433.5" y="113.334">Central Service API</text><path d="M480,71.7988 L480,95.7988 M480,83.7988 L497,83.7988 " fill="none" filter="url(#fqxyl1lal4un7)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="509" cy="83.7988" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="433.5" y="1329.3184">Central Service API</text><path d="M480,1336.2715 L480,1360.2715 M480,1348.2715 L497,1348.2715 " fill="none" filter="url(#fqxyl1lal4un7)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="509" cy="1348.2715" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="689" y="113.334">Participant Handler</text><ellipse cx="757.5" cy="83.7988" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="753.5,71.7988,759.5,66.7988,757.5,71.7988,759.5,76.7988,753.5,71.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="689" y="1329.3184">Participant Handler</text><ellipse cx="757.5" cy="1348.2715" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="753.5,1336.2715,759.5,1331.2715,757.5,1336.2715,759.5,1341.2715,753.5,1336.2715" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1002.5" y="113.334">Participant DAO</text><ellipse cx="1059.5" cy="83.7988" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1047.5" x2="1071.5" y1="97.7988" y2="97.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1002.5" y="1329.3184">Participant DAO</text><ellipse cx="1059.5" cy="1348.2715" fill="#FEFECE" filter="url(#fqxyl1lal4un7)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1047.5" x2="1071.5" y1="1362.2715" y2="1362.2715"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1341.5" y="113.334">Central Store</text><path d="M1371.5,63.7988 C1371.5,53.7988 1389.5,53.7988 1389.5,53.7988 C1389.5,53.7988 1407.5,53.7988 1407.5,63.7988 L1407.5,89.7988 C1407.5,99.7988 1389.5,99.7988 1389.5,99.7988 C1389.5,99.7988 1371.5,99.7988 1371.5,89.7988 L1371.5,63.7988 " fill="#FEFECE" filter="url(#fqxyl1lal4un7)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1371.5,63.7988 C1371.5,73.7988 1389.5,73.7988 1389.5,73.7988 C1389.5,73.7988 1407.5,73.7988 1407.5,63.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1341.5" y="1329.3184">Central Store</text><path d="M1371.5,1342.2715 C1371.5,1332.2715 1389.5,1332.2715 1389.5,1332.2715 C1389.5,1332.2715 1407.5,1332.2715 1407.5,1342.2715 L1407.5,1368.2715 C1407.5,1378.2715 1389.5,1378.2715 1389.5,1378.2715 C1389.5,1378.2715 1371.5,1378.2715 1371.5,1368.2715 L1371.5,1342.2715 " fill="#FEFECE" filter="url(#fqxyl1lal4un7)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1371.5,1342.2715 C1371.5,1352.2715 1389.5,1352.2715 1389.5,1352.2715 C1389.5,1352.2715 1407.5,1352.2715 1407.5,1342.2715 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1180.4961" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="81.5" y="126.2871"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1134.875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="495.5" y="171.9082"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="1061.2539" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="752.5" y="201.2188"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="182.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1054.5" y="245.8398"/><rect fill="#FFFFFF" filter="url(#fqxyl1lal4un7)" height="93.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1384.5" y="305.7715"/><path d="M13,133.2871 L188,133.2871 L188,140.2871 L178,150.2871 L13,150.2871 L13,133.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1166.4961" style="stroke: #000000; stroke-width: 2.0;" width="1460" x="13" y="133.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="28" y="146.8555">Get Position Details</text><polygon fill="#A80036" points="483.5,167.9082,493.5,171.9082,483.5,175.9082,487.5,171.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="91.5" x2="489.5" y1="171.9082" y2="171.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="98.5" y="167.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="358" x="111.5" y="167.166">Request to get positions - GET - /participants/positions</text><polygon fill="#A80036" points="740.5,197.2188,750.5,201.2188,740.5,205.2188,744.5,201.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="505.5" x2="746.5" y1="201.2188" y2="201.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="512.5" y="196.4766">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="525.5" y="196.4766">Fetch Positions for all Participants</text><polygon fill="#A80036" points="1042.5,241.8398,1052.5,245.8398,1042.5,249.8398,1046.5,245.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="762.5" x2="1048.5" y1="245.8398" y2="245.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="769.5" y="233.4424">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="782.5" y="225.7871">Fetch Positions for all active Participants</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="782.5" y="241.0977">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="859.5" y="241.0977">2003,3200</text><polygon fill="#A80036" points="1372.5,301.7715,1382.5,305.7715,1372.5,309.7715,1376.5,305.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1064.5" x2="1378.5" y1="305.7715" y2="305.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1071.5" y="285.7188">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="1084.5" y="270.4082">Fetch Positions for:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1088.5" y="285.7188">all active Participants</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1088.5" y="301.0293">with all active Currencies for each Participant</text><polygon fill="#FFFFE0" filter="url(#fqxyl1lal4un7)" points="1325,318.7715,1453,318.7715,1463,344.7715,1453,371.7715,1325,371.7715,1315,344.7715,1325,318.7715" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1327" y="335.3398">participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="1327" y="350.6504">participantPosition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1327" y="365.9609">participantCurrency</text><polygon fill="#A80036" points="1075.5,395.0137,1065.5,399.0137,1075.5,403.0137,1071.5,399.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1069.5" x2="1388.5" y1="399.0137" y2="399.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1081.5" y="394.2715">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="1094.5" y="394.2715">Retrieved Positions for Participants</text><polygon fill="#A80036" points="773.5,424.3242,763.5,428.3242,773.5,432.3242,769.5,428.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="767.5" x2="1058.5" y1="428.3242" y2="428.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="779.5" y="423.582">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="792.5" y="423.582">Return Positions for Participants</text><path d="M767,441.3242 L767,1231.3242 L1062,1231.3242 L1062,451.3242 L1052,441.3242 L767,441.3242 " fill="#FFFF00" filter="url(#fqxyl1lal4un7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1052,441.3242 L1052,451.3242 L1062,451.3242 L1052,441.3242 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="773" y="458.8926">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="773" y="474.2031">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="789" y="489.5137">snapshotAt: &lt;timestamp0&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="789" y="504.8242">positions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="789" y="520.1348">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="805" y="535.4453">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="821" y="550.7559">participantId: &lt;dfsp1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="821" y="566.0664">participantPositions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="821" y="581.377">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="596.6875">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="853" y="611.998">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="869" y="627.3086">currency: &lt;currency1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="869" y="642.6191">value: &lt;amount1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="869" y="657.9297">reservedValue: &lt;amount2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="869" y="673.2402">lastUpdated: &lt;timeStamp1&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="853" y="688.5508">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="837" y="703.8613">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="719.1719">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="853" y="734.4824">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="869" y="749.793">currency: &lt;currency2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="869" y="765.1035">value: &lt;amount3&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="869" y="780.4141">reservedValue: &lt;amount4&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="869" y="795.7246">lastUpdated: &lt;timeStamp2&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="853" y="811.0352">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="826.3457">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="821" y="841.6563">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="805" y="856.9668">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="805" y="872.2773">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="821" y="887.5879">participantId: &lt;dfsp2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="821" y="902.8984">participantPositions:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="821" y="918.209">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="933.5195">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="853" y="948.8301">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="869" y="964.1406">currency: &lt;currency1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="869" y="979.4512">value: &lt;amount1&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="869" y="994.7617">reservedValue: &lt;amount2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="869" y="1010.0723">lastUpdated: &lt;timeStamp1&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="853" y="1025.3828">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="837" y="1040.6934">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="1056.0039">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="853" y="1071.3145">currentPosition: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="869" y="1086.625">currency: &lt;currency2&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="869" y="1101.9355">value: &lt;amount3&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="869" y="1117.2461">reservedValue: &lt;amount4&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="869" y="1132.5566">lastUpdated: &lt;timeStamp2&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="853" y="1147.8672">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="1163.1777">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="821" y="1178.4883">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="805" y="1193.7988">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="789" y="1209.1094">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="773" y="1224.4199">}</text><polygon fill="#A80036" points="516.5,1258.4727,506.5,1262.4727,516.5,1266.4727,512.5,1262.4727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="510.5" x2="756.5" y1="1262.4727" y2="1262.4727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="522.5" y="1257.7305">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="535.5" y="1257.7305">Return Positions for Participants</text><polygon fill="#A80036" points="102.5,1287.7832,92.5,1291.7832,102.5,1295.7832,98.5,1291.7832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="96.5" x2="494.5" y1="1291.7832" y2="1291.7832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="108.5" y="1287.041">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="121.5" y="1287.041">Return Positions for Participants</text><!--
@startuml
title 4.2.0 Get Positions of all Participants

autonumber



entity "ML-API-ADAPTER" as MLAPI
boundary "Central Service API" as CSAPI
control "Participant Handler" as PARTICIPANT_HANDLER
entity "Central Service API" as CSAPI
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB
box "ML API Adapter Service" #LightBlue
	participant MLAPI
end box

box "Central Service" #LightYellow
    participant CSAPI
    participant PARTICIPANT_HANDLER
    participant PARTICIPANT_DAO
    participant DB
end box


activate MLAPI
group Get Position Details
MLAPI -> CSAPI: Request to get positions - GET - /participants/positions
    activate CSAPI
    CSAPI -> PARTICIPANT_HANDLER: Fetch Positions for all Participants
    activate PARTICIPANT_HANDLER
    PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Fetch Positions for all active Participants \n<color #FF0000><b>Error code:</b> 2003,3200 </color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO ->DB: Fetch Positions for: \n all active Participants \n with all active Currencies for each Participant
    activate DB
    hnote over DB #lightyellow
            participant
            participantPosition
            participantCurrency
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Positions for Participants
    deactivate DB
    PARTICIPANT_DAO - ->PARTICIPANT_HANDLER: Return Positions for Participants
    deactivate PARTICIPANT_DAO
    note right of PARTICIPANT_HANDLER #yellow
            Message:
            {
                snapshotAt: <timestamp0>,
                positions:
                [
                    {
                        participantId: <dfsp1>,
                        participantPositions:
                        [
                            {
                                currentPosition: {
                                    currency: <currency1>,
                                    value: <amount1>,
                                    reservedValue: <amount2>,
                                    lastUpdated: <timeStamp1>
                                }
                            },
                            {
                                currentPosition: {
                                    currency: <currency2>,
                                    value: <amount3>,
                                    reservedValue: <amount4>,
                                    lastUpdated: <timeStamp2>
                                }
                            }
                        ]
                    },
                    {
                        participantId: <dfsp2>,
                        participantPositions:
                        [
                            {
                                currentPosition: {
                                    currency: <currency1>,
                                    value: <amount1>,
                                    reservedValue: <amount2>,
                                    lastUpdated: <timeStamp1>
                                }
                            },
                            {
                                currentPosition: {
                                    currency: <currency2>,
                                    value: <amount3>,
                                    reservedValue: <amount4>,
                                    lastUpdated: <timeStamp2>
                                }
                            }
                        ]
                    }
                ]
            }
        end note
    PARTICIPANT_HANDLER - ->CSAPI: Return Positions for Participants
	deactivate PARTICIPANT_HANDLER
CSAPI - ->MLAPI: Return Positions for Participants

end
    deactivate CSAPI
deactivate MLAPI

@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>