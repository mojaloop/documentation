<svg xmlns="http://www.w3.org/2000/svg" height="4949" preserveAspectRatio="none" style="width:2025px;height:4949px" width="2025">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="394" x="813.5" y="28.708">
    2.2.1. Fulfil Handler Consume (Reject/Abort)
  </text>
  <path fill="#FFFFE0" stroke="#a80036" d="M26 40.953h1851.5v4902.93H26z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="896.25" y="53.02">
    Central Service
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M72.5 201.781h10v30h-10zM371.5 132.383h10v4736.203h-10zM993.5 3044.813h10v30h-10zM993.5 4256.391h10v30h-10zM1275 3530.07h10v30h-10zM1275 4741.648h10v30h-10zM1404.5 683.906h10v150.797h-10zM1404.5 945.234h10v135.664h-10zM1404.5 1514.039h10v121.398h-10zM1404.5 1717.836h10v120.531h-10zM1404.5 1988.164h10v136.531h-10zM1404.5 2272.164h10v121.398h-10zM1404.5 2500.094h10v2369.492h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M1409.5 3681.406h10v1188.18h-10zM1820.5 713.039h10v92.531h-10zM1820.5 974.367h10v77.398h-10zM1820.5 1543.172h10v30h-10zM1820.5 1746.969h10v62.266h-10zM1820.5 2017.297h10v30h-10zM1820.5 2301.297h10v30h-10zM1820.5 2529.227h10v30h-10zM1820.5 3710.539h10v30h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M10 139.383h2001v4722.203H10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M20 163.516h1981v4691.07H20z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M288.5 246.781h568v105.531h-568z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 270.914h548v74.398h-548zM298.5 366.313h911v91.531h-911zM298.5 471.844h1062v102.531h-1062zM268.5 588.375H1991v1062.063H268.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 891.836H1953v751.602H278.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M288.5 1095.898h1082v360.07h-1082z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 1120.031h270v59.266h-270z"/>
  <path fill="#FFF" d="M288.5 1186.297h1082v106.336h-1082z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 1208.102h1062v77.531h-1062z"/>
  <path fill="#FFF" d="M288.5 1292.633h1082v88.07h-1082z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 1314.438h242v59.266h-242z"/>
  <path fill="#FFF" d="M288.5 1380.703h1082v75.266h-1082z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 1389.703h348v59.266h-348z"/>
  <path fill="#FFF" d="M278.5 1462.969H1953v180.469H278.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 1664.438H1934v3129.211H278.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M288.5 1853.367H1913v555.195H288.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 1934.766H1903v197.93H298.5z"/>
  <path fill="#FFF" d="M288.5 2139.695H1913v268.867H288.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 2218.766H1903v182.797H298.5zM288.5 2422.563H1924v1152.508H288.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 2446.695H1914v182.797H298.5z"/>
  <path fill="#FFF" d="M288.5 3082.813H1924v492.258H288.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 3104.617h1062v463.453h-1062z"/>
  <path fill="#FFF" d="M278.5 3582.07H1934v1211.578H278.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M288.5 3603.875H1924v1182.773H288.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 3628.008H1914v213.063H298.5z"/>
  <path fill="#FFF" d="M288.5 4294.391H1924v492.258H288.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M298.5 4316.195h1062v463.453h-1062z"/>
  <path fill="#FFF" d="M20 4800.648h1981v53.938H20z"/>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M77 122.383v4756.203M376.5 122.383v4756.203M998.5 122.383v4756.203M1147.5 122.383v4756.203M1279.5 122.383v4756.203M1409.5 122.383v4756.203M1825.5 122.383v4756.203"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M34 83.086h87v30.297H34z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M30 87.086h87v30.297H30z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="37" y="107.081">
    Fulfil-Topic
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M34 4877.586h87v30.297H34z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M30 4881.586h87v30.297H30z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="37" y="4901.581">
    Fulfil-Topic
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="308.5" y="119.081">
    Fulfil Event Handler
  </text>
  <circle cx="376.5" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path fill="#A80036" stroke="#a80036" d="M372.5 78.086l6-5-2 5 2 5-6-5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="308.5" y="4890.581">
    Fulfil Event Handler
  </text>
  <circle cx="376.5" cy="4909.883" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path fill="#A80036" stroke="#a80036" d="M372.5 4897.883l6-5-2 5 2 5-6-5z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M915.5 83.086h166v30.297h-166z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M911.5 87.086h166v30.297h-166z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="918.5" y="107.081">
    topic-transfer-position
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M915.5 4877.586h166v30.297h-166z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M911.5 4881.586h166v30.297h-166z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="918.5" y="4901.581">
    topic-transfer-position
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1099.5 83.086h96v30.297h-96z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1095.5 87.086h96v30.297h-96z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1102.5" y="107.081">
    Event-Topic
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1099.5 4877.586h96v30.297h-96z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1095.5 4881.586h96v30.297h-96z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1102.5" y="4901.581">
    Event-Topic
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1213.5 83.086h133v30.297h-133z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1209.5 87.086h133v30.297h-133z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1216.5" y="107.081">
    Notification-Topic
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1213.5 4877.586h133v30.297h-133z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1209.5 4881.586h133v30.297h-133z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1216.5" y="4901.581">
    Notification-Topic
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="1360.5" y="119.081">
    Transfer DAO
  </text>
  <circle cx="1409.5" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1397.5 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="1360.5" y="4890.581">
    Transfer DAO
  </text>
  <circle cx="1409.5" cy="4909.883" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1397.5 4923.883h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1777.5" y="119.081">
    Central Store
  </text>
  <path d="M1807.5 70.086c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M1807.5 70.086c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1777.5" y="4890.581">
    Central Store
  </text>
  <path d="M1807.5 4903.883c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M1807.5 4903.883c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M72.5 201.781h10v30h-10zM371.5 132.383h10v4736.203h-10zM993.5 3044.813h10v30h-10zM993.5 4256.391h10v30h-10zM1275 3530.07h10v30h-10zM1275 4741.648h10v30h-10zM1404.5 683.906h10v150.797h-10zM1404.5 945.234h10v135.664h-10zM1404.5 1514.039h10v121.398h-10zM1404.5 1717.836h10v120.531h-10zM1404.5 1988.164h10v136.531h-10zM1404.5 2272.164h10v121.398h-10zM1404.5 2500.094h10v2369.492h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M1409.5 3681.406h10v1188.18h-10zM1820.5 713.039h10v92.531h-10zM1820.5 974.367h10v77.398h-10zM1820.5 1543.172h10v30h-10zM1820.5 1746.969h10v62.266h-10zM1820.5 2017.297h10v30h-10zM1820.5 2301.297h10v30h-10zM1820.5 2529.227h10v30h-10zM1820.5 3710.539h10v30h-10z"/>
  <path d="M10 139.383h284v7l-10 10H10v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M10 139.383h2001v4722.203H10z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="25" y="152.45">
    Fulfil Handler Consume (Failure)
  </text>
  <path d="M20 163.516h64v7l-10 10H20v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M20 163.516h1981v4691.07H20z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="35" y="176.583">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="99" y="175.726">
    [Consume Single Message]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M93.5 197.781l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M87.5 201.781h283"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="99.5" y="196.715">
    1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="112.5" y="196.715">
    Consume Fulfil event message for Payer
  </text>
  <path d="M288.5 246.781h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M288.5 246.781h568v105.531h-568z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="303.5" y="259.848">
    break
  </text>
  <path d="M298.5 270.914h152v7l-10 10h-142v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 270.914h548v74.398h-548z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="313.5" y="283.981">
    Validate Event
  </text>
  <path stroke="#a80036" d="M381.5 324.313h42M423.5 324.313v13M382.5 337.313h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 333.313l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="311.68">
    2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="433" x="401.5" y="304.114">
    Validate event - Rule: type == &apos;fulfil&apos; &amp;&amp; ( action IN [&apos;reject&apos;,&apos;abort&apos;] )
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="401.5" y="319.247">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="495.5" y="319.247">
    2001
  </text>
  <path d="M298.5 366.313h232v7l-10 10h-222v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 366.313h911v91.531h-911z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="313.5" y="379.379">
    Persist Event Information
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1135.5 400.578l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 404.578h760"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="399.512">
    3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="401.5" y="399.512">
    Publish event information
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M305.5 412.578h893v40.266h-893z"/>
  <path fill="#EEE" stroke="#000" stroke-width="2" d="M305.5 412.578h66v7l-10 10h-56v-17z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="318.5" y="426.645">
    ref
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="676.5" y="445.645">
    Event Handler Consume
  </text>
  <path d="M298.5 471.844h240v7l-10 10h-230v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 471.844h1062v102.531h-1062z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="313.5" y="484.911">
    Validate FSPIOP-Signature
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M305.5 513.977h1044v55.398h-1044z"/>
  <path fill="#EEE" stroke="#000" stroke-width="2" d="M305.5 513.977h66v7l-10 10h-56v-17z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="318.5" y="528.043">
    ref
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="651" y="547.043">
    Validate message.content.headers.
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="879" y="547.043">
    FSPIOP-Signature
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="651" y="562.176">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="745" y="562.176">
    2001
  </text>
  <path d="M268.5 588.375h338v7l-10 10h-328v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M268.5 588.375H1991v1062.063H268.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="293" x="283.5" y="601.442">
    Validate Transfer Fulfil Duplicate Check
  </text>
  <path stroke="#a80036" d="M381.5 626.641h42M423.5 626.641v13M382.5 639.641h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 635.64l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="621.575">
    4
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="401.5" y="621.575">
    Generate transferFulfilmentId uuid
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 679.906l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 683.906h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="671.274">
    5
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="373" x="401.5" y="663.707">
    Request to retrieve transfer fulfilment hashes by transferId
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="401.5" y="678.84">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="487.5" y="678.84">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 709.04l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 713.039h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1421.5" y="707.973">
    6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="346" x="1434.5" y="707.973">
    Request Transfer fulfilment duplicate message hashes
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1679 726.04h292l10 26-10 27h-292l-10-27 10-26z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="1681" y="742.106">
    SELET transferId, hash
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="1681" y="757.239">
    FROM
  </text>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="1721" y="757.239">
    transferFulfilmentDuplicateCheck
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="1681" y="772.372">
    WHERE transferId = request.params.id
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1425.5 801.57l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1419.5 805.57h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1431.5" y="800.504">
    7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="1444.5" y="800.504">
    Return existing hashes
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 830.703l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 834.703h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="398.5" y="829.637">
    8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="411.5" y="829.637">
    Return (list of) transfer fulfil messages hash(es)
  </text>
  <path stroke="#a80036" d="M381.5 863.836h42M423.5 863.836v13M382.5 876.836h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 872.836l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="388.5" y="858.77">
    9
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="585" x="401.5" y="858.77">
    Loop the list of returned hashes and compare each entry with the calculated message hash
  </text>
  <path d="M278.5 891.836h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 891.836H1953v751.602H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="293.5" y="904.903">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="357.5" y="904.046">
    [Hash matched]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 941.234l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 945.234h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="932.602">
    10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="365" x="410.5" y="925.036">
    Request to retrieve Transfer Fulfilment and Transfer state
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="940.168">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="940.168">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 970.367l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 974.367h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1421.5" y="969.301">
    11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="365" x="1443.5" y="969.301">
    Request to retrieve Transfer Fulfilment and Transfer state
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1756 987.367h138l10 19-10 19h-138l-10-19 10-19z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1758" y="1003.434">
    transferFulfilment
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1758" y="1018.567">
    transferStateChange
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1425.5 1047.766l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1419.5 1051.766h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1431.5" y="1046.7">
    12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="1453.5" y="1046.7">
    Return Transfer Fulfilment and Transfer state
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1076.898l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 1080.898h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="1075.832">
    13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="420.5" y="1075.832">
    Return Transfer Fulfilment and Transfer state
  </text>
  <path d="M288.5 1095.898h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M288.5 1095.898h1082v360.07h-1082z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="303.5" y="1108.965">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="367.5" y="1108.109">
    [transferFulfilment.isValid == 0]
  </text>
  <path d="M298.5 1120.031h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 1120.031h270v59.266h-270z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="313.5" y="1133.098">
    break
  </text>
  <path stroke="#a80036" d="M381.5 1158.297h42M423.5 1158.297v13M382.5 1171.297h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1167.297l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1153.231">
    14
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="410.5" y="1153.231">
    Error handling:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="524.5" y="1153.231">
    3105
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M288.5 1187.297h1082"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="293.5" y="1197.507">
    [transferState IN [&apos;COMMITTED&apos;, &apos;ABORTED&apos;]]
  </text>
  <path d="M298.5 1208.102h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 1208.102h1062v77.531h-1062z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="313.5" y="1221.168">
    break
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M305.5 1225.234h1044v55.398h-1044z"/>
  <path fill="#EEE" stroke="#000" stroke-width="2" d="M305.5 1225.234h66v7l-10 10h-56v-17z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="318.5" y="1239.301">
    ref
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="705" y="1258.301">
    Send notification to Participant (Payee)
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M288.5 1293.633h1082"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="293.5" y="1303.843">
    [transferState NOT &apos;RESERVED&apos;]
  </text>
  <path d="M298.5 1314.438h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 1314.438h242v59.266h-242z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="313.5" y="1327.504">
    break
  </text>
  <path stroke="#a80036" d="M381.5 1352.703h42M423.5 1352.703v13M382.5 1365.703h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1361.703l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1347.637">
    15
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="1347.637">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="1347.637">
    2001
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M288.5 1381.703h1082"/>
  <path d="M298.5 1389.703h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 1389.703h348v59.266h-348z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="313.5" y="1402.77">
    break
  </text>
  <path stroke="#a80036" d="M381.5 1427.969h42M423.5 1427.969v13M382.5 1440.969h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1436.969l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1422.903">
    16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="410.5" y="1422.903">
    Allow previous request to complete
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M278.5 1463.969H1953"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="283.5" y="1474.179">
    [Hash not matched]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 1510.04l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 1514.039h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1501.407">
    17
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="410.5" y="1493.84">
    Request to persist transfer hash
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="410.5" y="1508.973">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="504.5" y="1508.973">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 1539.172l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 1543.172h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1421.5" y="1538.106">
    18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1443.5" y="1538.106">
    Persist hash
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1718 1586.172h215l10 11-10 12h-215l-10-12 10-11z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1720" y="1602.239">
    transferFulfilmentDuplicateCheck
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1631.438l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 1635.438h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="1630.372">
    19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="420.5" y="1630.372">
    Return success
  </text>
  <path d="M278.5 1664.438h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 1664.438H1934v3129.211H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="293.5" y="1677.504">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="325" x="357.5" y="1676.648">
    [action==&apos;reject&apos; call made on PUT /transfers/{ID}]
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 1713.836l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 1717.836h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1705.204">
    20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="410.5" y="1697.637">
    Request information for the validate checks
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="1712.77">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="1712.77">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 1742.969l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 1746.969h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1421.5" y="1741.903">
    21
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="1443.5" y="1741.903">
    Fetch from database
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1798 1759.969h54l10 11-10 12h-54l-10-12 10-11z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="1800" y="1776.036">
    transfer
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1425.5 1805.234l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1419.5 1809.234h405"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1431.5" y="1804.168">
    22
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1834.367l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 1838.367h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="1833.301">
    23
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="420.5" y="1833.301">
    Return transfer
  </text>
  <path d="M288.5 1853.367h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M288.5 1853.367H1913v555.195H288.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="303.5" y="1866.434">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="358" x="367.5" y="1865.578">
    [Fulfilment present in the PUT /transfers/{ID} message]
  </text>
  <path stroke="#a80036" d="M381.5 1906.766h42M423.5 1906.766v13M382.5 1919.766h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 1915.766l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1894.133">
    24
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="472" x="410.5" y="1886.567">
    Validate that Transfer.ilpCondition = SHA-256 (content.payload.fulfilment)
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="1901.7">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="1901.7">
    2001
  </text>
  <path d="M298.5 1934.766h172v7l-10 10h-162v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 1934.766H1903v197.93H298.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="313.5" y="1947.832">
    Persist fulfilment
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 1984.164l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 1988.164h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="1975.532">
    25
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="496" x="410.5" y="1967.965">
    Persist fulfilment with the result of the above check (transferFulfilment.isValid)
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="1983.098">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="1983.098">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 2013.297l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 2017.297h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1421.5" y="2012.231">
    26
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1443.5" y="2012.231">
    Persist to database
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1767 2060.297h116l10 19-10 19h-116l-10-19 10-19z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1769" y="2076.364">
    transferFulfilment
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1769" y="2091.497">
    transferExtension
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 2120.695l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 2124.695h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="2119.629">
    27
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="420.5" y="2119.629">
    Return success
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M288.5 2140.695H1913"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="389" x="293.5" y="2150.906">
    [Fulfilment NOT present in the PUT /transfers/{ID} message]
  </text>
  <path stroke="#a80036" d="M381.5 2190.766h42M423.5 2190.766v13M382.5 2203.766h41"/>
  <path fill="#A80036" stroke="#a80036" d="M392.5 2199.766l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="2178.133">
    28
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="365" x="410.5" y="2170.567">
    Validate that transfer fulfilment message to Abort is valid
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="2185.7">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="2185.7">
    2001
  </text>
  <path d="M298.5 2218.766h180v7l-10 10h-170v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 2218.766H1903v182.797H298.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="135" x="313.5" y="2231.832">
    Persist extensions
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 2268.164l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 2272.164h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="2259.532">
    29
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="410.5" y="2251.965">
    Persist extensionList elements
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="2267.098">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="2267.098">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 2297.297l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 2301.297h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1421.5" y="2296.231">
    30
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1443.5" y="2296.231">
    Persist to database
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1767 2344.297h116l10 11-10 12h-116l-10-12 10-11z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1769" y="2360.364">
    transferExtension
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 2389.563l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 2393.563h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="2388.497">
    31
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="420.5" y="2388.497">
    Return success
  </text>
  <path d="M288.5 2422.563h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M288.5 2422.563H1924v1152.508H288.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="303.5" y="2435.629">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="488" x="367.5" y="2434.773">
    [Transfer.ilpCondition validate successful OR generic validation successful]
  </text>
  <path d="M298.5 2446.695h505v7l-10 10h-495v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 2446.695H1914v182.797H298.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="460" x="313.5" y="2459.762">
    Persist Transfer State (with transferState=&apos;RECEIVED_REJECT&apos;)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1392.5 2496.094l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 2500.094h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="2487.461">
    32
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="410.5" y="2479.895">
    Request to persist transfer state
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="2495.028">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="2495.028">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 2525.227l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1414.5 2529.227h400"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1421.5" y="2524.161">
    33
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1443.5" y="2524.161">
    Persist transfer state
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1756 2572.227h138l10 11-10 12h-138l-10-12 10-11z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1758" y="2588.294">
    transferStateChange
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 2617.492l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 2621.492h1017"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="2616.426">
    34
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="420.5" y="2616.426">
    Return success
  </text>
  <path d="M386 2641.492v373h315v-363l-10-10H386" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M691 2641.492v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="392" y="2658.559">
    Message:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="2673.692">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="408" y="2688.825">
    id: &lt;ID&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="408" y="2703.957">
    from: &lt;transferHeaders.FSPIOP-Source&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="408" y="2719.09">
    to: &lt;transferHeaders.FSPIOP-Destination&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="408" y="2734.223">
    type: application/json,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="408" y="2749.356">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="424" y="2764.489">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="424" y="2779.622">
    payload: &lt;transferMessage&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="408" y="2794.754">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="408" y="2809.887">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="424" y="2825.02">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="440" y="2840.153">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="440" y="2855.286">
    responseTo: &lt;previous.uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="440" y="2870.419">
    type: position,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="440" y="2885.551">
    action: reject,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="440" y="2900.684">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="440" y="2915.817">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="456" y="2930.95">
    status: &quot;success&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="456" y="2946.082">
    code: 0
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="440" y="2961.215">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="424" y="2976.348">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="408" y="2991.481">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="3006.614">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M981.5 3040.813l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 3044.813h606"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="3039.747">
    35
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="410.5" y="3039.747">
    Route &amp; Publish Position event for Payer
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M288.5 3083.813H1924"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="434" x="293.5" y="3094.023">
    [Validate Fulfil Transfer not successful or Generic validation failed]
  </text>
  <path d="M298.5 3104.617h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 3104.617h1062v463.453h-1062z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="313.5" y="3117.684">
    break
  </text>
  <path d="M386 3126.75v373h315v-363l-10-10H386" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M691 3126.75v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="392" y="3143.817">
    Message:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="3158.95">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="408" y="3174.082">
    id: &lt;ID&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="408" y="3189.215">
    from: &lt;transferHeaders.FSPIOP-Source&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="408" y="3204.348">
    to: &lt;transferHeaders.FSPIOP-Destination&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="408" y="3219.481">
    type: application/json,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="408" y="3234.614">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="424" y="3249.747">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="424" y="3264.879">
    payload: &lt;transferMessage&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="408" y="3280.012">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="408" y="3295.145">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="424" y="3310.278">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="440" y="3325.411">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="440" y="3340.544">
    responseTo: &lt;previous.uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="440" y="3355.676">
    type: position,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="440" y="3370.809">
    action: reject,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="440" y="3385.942">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="440" y="3401.075">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="456" y="3416.207">
    status: &quot;error&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="456" y="3431.34">
    code: 1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="440" y="3446.473">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="424" y="3461.606">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="408" y="3476.739">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="3491.872">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1263 3526.07l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 3530.07H1269"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="3525.004">
    36
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="410.5" y="3525.004">
    Route &amp; Publish Notification event for Payee
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M278.5 3583.07H1934"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="283.5" y="3593.281">
    [action==&apos;abort&apos; Error callback]
  </text>
  <path d="M288.5 3603.875h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M288.5 3603.875H1924v1182.773H288.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="303.5" y="3616.942">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="367.5" y="3616.085">
    [Validation successful]
  </text>
  <path d="M298.5 3628.008h505v7l-10 10h-495v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 3628.008H1914v213.063H298.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="460" x="313.5" y="3641.075">
    Persist Transfer State (with transferState=&apos;RECEIVED_ERROR&apos;)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1397.5 3677.406l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 3681.406h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="3668.774">
    37
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="410.5" y="3661.207">
    Request to persist transfer state and Error
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="410.5" y="3676.34">
    Error code:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="496.5" y="3676.34">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1808.5 3706.54l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1419.5 3710.539h395"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1426.5" y="3705.473">
    38
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="1448.5" y="3705.473">
    Persist transfer state and error information
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1756 3753.54h138l10 26-10 27h-138l-10-27 10-26z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1758" y="3769.606">
    transferStateChange
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="1758" y="3784.739">
    transferError
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1758" y="3799.872">
    transferExtension
  </text>
  <path fill="#A80036" stroke="#a80036" d="M392.5 3829.07l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M386.5 3833.07h1022"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="398.5" y="3828.004">
    39
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="420.5" y="3828.004">
    Return success
  </text>
  <path d="M386 3853.07v373h315v-363l-10-10H386" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M691 3853.07v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="392" y="3870.137">
    Message:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="3885.27">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="408" y="3900.403">
    id: &lt;ID&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="408" y="3915.536">
    from: &lt;transferHeaders.FSPIOP-Source&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="408" y="3930.669">
    to: &lt;transferHeaders.FSPIOP-Destination&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="408" y="3945.801">
    type: application/json,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="408" y="3960.934">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="424" y="3976.067">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="424" y="3991.2">
    payload: &lt;transferMessage&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="408" y="4006.332">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="408" y="4021.465">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="424" y="4036.598">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="440" y="4051.731">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="440" y="4066.864">
    responseTo: &lt;previous.uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="440" y="4081.997">
    type: position,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="440" y="4097.129">
    action: abort,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="440" y="4112.262">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="440" y="4127.395">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="456" y="4142.528">
    status: &quot;success&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="456" y="4157.661">
    code: 0
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="440" y="4172.793">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="424" y="4187.926">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="408" y="4203.059">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="4218.192">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M981.5 4252.39l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 4256.391h606"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="4251.325">
    40
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="410.5" y="4251.325">
    Route &amp; Publish Position event for Payer
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M288.5 4295.391H1924"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="314" x="293.5" y="4305.601">
    [Validate Transfer Error Message not successful]
  </text>
  <path d="M298.5 4316.195h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M298.5 4316.195h1062v463.453h-1062z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="313.5" y="4329.262">
    break
  </text>
  <path d="M386 4338.328v373h315v-363l-10-10H386" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M691 4338.328v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="392" y="4355.395">
    Message:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="4370.528">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="408" y="4385.661">
    id: &lt;ID&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="408" y="4400.793">
    from: &lt;transferHeaders.FSPIOP-Source&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="408" y="4415.926">
    to: &lt;transferHeaders.FSPIOP-Destination&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="408" y="4431.059">
    type: application/json,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="408" y="4446.192">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="424" y="4461.325">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="424" y="4476.458">
    payload: &lt;transferMessage&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="408" y="4491.59">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="408" y="4506.723">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="424" y="4521.856">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="440" y="4536.989">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="440" y="4552.122">
    responseTo: &lt;previous.uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="440" y="4567.254">
    type: position,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="440" y="4582.387">
    action: abort,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="440" y="4597.52">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="440" y="4612.653">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="456" y="4627.786">
    status: &quot;error&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="456" y="4642.918">
    code: 1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="440" y="4658.051">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="424" y="4673.184">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="408" y="4688.317">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="392" y="4703.45">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1263 4737.648l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M381.5 4741.648H1269"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="388.5" y="4736.583">
    41
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="410.5" y="4736.583">
    Route &amp; Publish Notification event for Payee
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M20 4801.648h1981"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="25" y="4811.859">
    [Consume Batch Messages]
  </text>
  <path d="M147 4820.453v25h215v-15l-10-10H147" fill="#ADD8E6" filter="url(#a)" stroke="#a80036"/>
  <path d="M352 4820.453v10h10l-10-10" fill="#ADD8E6" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="153" y="4837.52">
    To be delivered by future story
  </text>
</svg>
