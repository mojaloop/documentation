<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1396px" preserveAspectRatio="none" style="width:842px;height:1396px;" version="1.1" viewBox="0 0 842 1396" width="842px" zoomAndPan="magnify"><defs><filter height="300%" id="f2nmyjoud0ntu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="273" x="285" y="23.5352">Transaction Requests Service - Query</text><rect fill="#FFFFFF" filter="url(#f2nmyjoud0ntu)" height="1064.8027" style="stroke: #000000; stroke-width: 2.0;" width="818" x="12" y="258.0176"/><rect fill="#FFFFFF" filter="url(#f2nmyjoud0ntu)" height="738.0527" style="stroke: #000000; stroke-width: 2.0;" width="802" x="18" y="464.8809"/><rect fill="#FFFFFF" filter="url(#f2nmyjoud0ntu)" height="340.3711" style="stroke: #000000; stroke-width: 2.0;" width="782" x="28" y="644.7441"/><rect fill="#FFFFFF" height="182.8184" style="stroke: none; stroke-width: 1.0;" width="782" x="28" y="802.2969"/><rect fill="#FFFFFF" height="210.8184" style="stroke: none; stroke-width: 1.0;" width="802" x="18" y="992.1152"/><rect fill="#FFFFFF" height="112.8867" style="stroke: none; stroke-width: 1.0;" width="818" x="12" y="1209.9336"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="110" x2="110" y1="85.4648" y2="1339.8203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="385" x2="385" y1="85.4648" y2="1339.8203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="727" x2="727" y1="85.4648" y2="1339.8203"/><rect fill="#FEFECE" filter="url(#f2nmyjoud0ntu)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="69" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="76" y="70.5117">Payer FSP</text><rect fill="#FEFECE" filter="url(#f2nmyjoud0ntu)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="69" y="1338.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="76" y="1359.3555">Payer FSP</text><rect fill="#FEFECE" filter="url(#f2nmyjoud0ntu)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="277" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="361.5" y="54.0234">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="284" y="70.5117">transaction-requests-service</text><rect fill="#FEFECE" filter="url(#f2nmyjoud0ntu)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="277" y="1338.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="361.5" y="1359.3555">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="284" y="1375.8438">transaction-requests-service</text><rect fill="#FEFECE" filter="url(#f2nmyjoud0ntu)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="685" y="49.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="692" y="70.5117">Payee FSP</text><rect fill="#FEFECE" filter="url(#f2nmyjoud0ntu)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="685" y="1338.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="692" y="1359.3555">Payee FSP</text><path d="M312,100.4648 L312,140.4648 L800,140.4648 L800,110.4648 L790,100.4648 L312,100.4648 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M790,100.4648 L790,110.4648 L800,110.4648 L790,100.4648 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="449" x="325" y="118.0332">Payee FSP requests the status of a transaction-request at the Payer FSP.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="368" x="325" y="133.3438">ID here is the ID of prevoiusly created transaction-request</text><polygon fill="#A80036" points="396.5,167.3965,386.5,171.3965,396.5,171.3965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="726.5" y1="171.3965" y2="171.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="402.5" y="166.6543">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="415.5" y="166.6543">GET /transactionRequests/{ID}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="427.5" y1="200.707" y2="200.707"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="427.5" x2="427.5" y1="200.707" y2="213.707"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386.5" x2="427.5" y1="213.707" y2="213.707"/><polygon fill="#A80036" points="396.5,209.707,386.5,213.707,396.5,217.707,392.5,213.707" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="392.5" y="195.9648">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="405.5" y="195.9648">Validate GET /transactionRequests/{ID}</text><polygon fill="#A80036" points="715.5,244.0176,725.5,244.0176,715.5,248.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="385.5" x2="726.5" y1="243.0176" y2="243.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="392.5" y="238.2754">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="405.5" y="238.2754">202 Accepted</text><path d="M12,258.0176 L74,258.0176 L74,265.0176 L64,275.0176 L12,275.0176 L12,258.0176 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1064.8027" style="stroke: #000000; stroke-width: 2.0;" width="818" x="12" y="258.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="27" y="271.5859">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="89" y="270.6523">[transaction-request query is valid]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="427.5" y1="296.6387" y2="296.6387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="427.5" x2="427.5" y1="296.6387" y2="309.6387"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386.5" x2="427.5" y1="309.6387" y2="309.6387"/><polygon fill="#A80036" points="396.5,305.6387,386.5,309.6387,396.5,313.6387,392.5,309.6387" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="392.5" y="291.8965">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="405.5" y="291.8965">Retrieve corresponding end-points for Payer FSP</text><path d="M22,322.6387 L22,347.6387 L469,347.6387 L469,332.6387 L459,322.6387 L22,322.6387 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459,322.6387 L459,332.6387 L469,332.6387 L459,322.6387 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="426" x="28" y="340.207">Switch forwards GET /transactionRequests/{ID} request to Payer FSP</text><polygon fill="#A80036" points="121.5,374.2598,111.5,378.2598,121.5,378.2598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110.5" x2="384.5" y1="378.2598" y2="378.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="127.5" y="373.5176">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="140.5" y="373.5176">GET /transactionRequests/{ID}</text><polygon fill="#A80036" points="373.5,408.5703,383.5,408.5703,373.5,412.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="110.5" x2="384.5" y1="407.5703" y2="407.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="117.5" y="402.8281">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="130.5" y="402.8281">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="110.5" x2="152.5" y1="436.8809" y2="436.8809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="152.5" x2="152.5" y1="436.8809" y2="449.8809"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="111.5" x2="152.5" y1="449.8809" y2="449.8809"/><polygon fill="#A80036" points="121.5,445.8809,111.5,449.8809,121.5,453.8809,117.5,449.8809" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="117.5" y="432.1387">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="130.5" y="432.1387">Retrieve transaction-request</text><path d="M18,464.8809 L80,464.8809 L80,471.8809 L70,481.8809 L18,481.8809 L18,464.8809 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="738.0527" style="stroke: #000000; stroke-width: 2.0;" width="802" x="18" y="464.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="33" y="478.4492">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="301" x="95" y="477.5156">[Payer FSP successfully retrieves transaction-request]</text><path d="M38,487.1914 L38,527.1914 L458,527.1914 L458,497.1914 L448,487.1914 L38,487.1914 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M448,487.1914 L448,497.1914 L458,497.1914 L448,487.1914 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="117.5" y="504.7598">Payer FSP responds with the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="117.5" y="520.0703">PUT /transactionRequests/{ID} callback</text><polygon fill="#A80036" points="373.5,554.123,383.5,558.123,373.5,558.123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110.5" x2="384.5" y1="558.123" y2="558.123"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="117.5" y="553.3809">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="130.5" y="553.3809">PUT /transactionRequests/{ID}</text><polygon fill="#A80036" points="121.5,588.4336,111.5,588.4336,121.5,592.4336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="110.5" x2="384.5" y1="587.4336" y2="587.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="127.5" y="582.6914">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="140.5" y="582.6914">200 Ok</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="427.5" y1="616.7441" y2="616.7441"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="427.5" x2="427.5" y1="616.7441" y2="629.7441"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386.5" x2="427.5" y1="629.7441" y2="629.7441"/><polygon fill="#A80036" points="396.5,625.7441,386.5,629.7441,396.5,633.7441,392.5,629.7441" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="392.5" y="612.002">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="414.5" y="612.002">Validate PUT /transactionRequests/{ID}</text><path d="M28,644.7441 L90,644.7441 L90,651.7441 L80,661.7441 L28,661.7441 L28,644.7441 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="340.3711" style="stroke: #000000; stroke-width: 2.0;" width="782" x="28" y="644.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="43" y="658.3125">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="105" y="657.3789">[response is ok]</text><path d="M312,667.0547 L312,692.0547 L800,692.0547 L800,677.0547 L790,667.0547 L312,667.0547 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M790,667.0547 L790,677.0547 L800,677.0547 L790,667.0547 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="372" x="363.5" y="684.623">Switch forwards transaction-request response to Payee FSP</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="427.5" y1="722.6758" y2="722.6758"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="427.5" x2="427.5" y1="722.6758" y2="735.6758"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="386.5" x2="427.5" y1="735.6758" y2="735.6758"/><polygon fill="#A80036" points="396.5,731.6758,386.5,735.6758,396.5,739.6758,392.5,735.6758" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="392.5" y="717.9336">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="414.5" y="717.9336">Retrieve corresponding end-points for Payee FSP</text><polygon fill="#A80036" points="715.5,760.9863,725.5,764.9863,715.5,764.9863" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="726.5" y1="764.9863" y2="764.9863"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="392.5" y="760.2441">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="414.5" y="760.2441">PUT /transactionRequests/{ID}</text><polygon fill="#A80036" points="396.5,795.2969,386.5,795.2969,396.5,799.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="385.5" x2="726.5" y1="794.2969" y2="794.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="402.5" y="789.5547">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="424.5" y="789.5547">200 Ok</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="28" x2="810" y1="803.2969" y2="803.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="33" y="813.9316">[response invalid]</text><path d="M38,822.252 L38,847.252 L458,847.252 L458,832.252 L448,822.252 L38,822.252 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M448,822.252 L448,832.252 L458,832.252 L448,822.252 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="140" y="839.8203">Switch returns error to Payer FSP</text><polygon fill="#A80036" points="121.5,873.873,111.5,877.873,121.5,877.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110.5" x2="384.5" y1="877.873" y2="877.873"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="127.5" y="873.1309">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="149.5" y="873.1309">PUT /transactionRequests/{ID}/error</text><polygon fill="#A80036" points="373.5,908.1836,383.5,908.1836,373.5,912.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="110.5" x2="384.5" y1="907.1836" y2="907.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="117.5" y="902.4414">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="139.5" y="902.4414">200 Ok</text><path d="M38,920.1836 L38,975.1836 L458,975.1836 L458,930.1836 L448,920.1836 L38,920.1836 " fill="#EC7063" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M448,920.1836 L448,930.1836 L458,930.1836 L448,920.1836 " fill="#EC7063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="156" y="937.752">Note that under this</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="156" y="953.0625">scenario the Payee FSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="156" y="968.373">may not receive a response</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="18" x2="820" y1="993.1152" y2="993.1152"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="313" x="23" y="1003.75">[Payer FSP is unable to retrieve the transaction-request]</text><path d="M38,1012.0703 L38,1037.0703 L458,1037.0703 L458,1022.0703 L448,1012.0703 L38,1012.0703 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M448,1012.0703 L448,1022.0703 L458,1022.0703 L448,1012.0703 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="140" y="1029.6387">Payer FSP returns error to Switch</text><polygon fill="#A80036" points="373.5,1063.6914,383.5,1067.6914,373.5,1067.6914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="110.5" x2="384.5" y1="1067.6914" y2="1067.6914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="117.5" y="1062.9492">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="139.5" y="1062.9492">PUT /transactionRequests/{ID}/error</text><polygon fill="#A80036" points="121.5,1098.002,111.5,1098.002,121.5,1102.002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="110.5" x2="384.5" y1="1097.002" y2="1097.002"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="127.5" y="1092.2598">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="149.5" y="1092.2598">200 OK</text><path d="M312,1110.002 L312,1135.002 L800,1135.002 L800,1120.002 L790,1110.002 L312,1110.002 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M790,1110.002 L790,1120.002 L800,1120.002 L790,1110.002 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="447" y="1127.5703">Switch returns error to Payee FSP</text><polygon fill="#A80036" points="715.5,1161.623,725.5,1165.623,715.5,1165.623" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="726.5" y1="1165.623" y2="1165.623"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="392.5" y="1160.8809">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="414.5" y="1160.8809">PUT /transactionRequests/{ID}/error</text><polygon fill="#A80036" points="396.5,1195.9336,386.5,1195.9336,396.5,1199.9336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="385.5" x2="726.5" y1="1194.9336" y2="1194.9336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="402.5" y="1190.1914">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="424.5" y="1190.1914">200 OK</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="12" x2="830" y1="1210.9336" y2="1210.9336"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="17" y="1221.5684">[transaction-request is invalid]</text><path d="M312,1229.8887 L312,1254.8887 L800,1254.8887 L800,1239.8887 L790,1229.8887 L312,1229.8887 " fill="#FBFB77" filter="url(#f2nmyjoud0ntu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M790,1229.8887 L790,1239.8887 L800,1239.8887 L790,1229.8887 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="447" y="1247.457">Switch returns error to Payee FSP</text><polygon fill="#A80036" points="715.5,1281.5098,725.5,1285.5098,715.5,1285.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="726.5" y1="1285.5098" y2="1285.5098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="392.5" y="1280.7676">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="414.5" y="1280.7676">PUT /transactionRequests/{ID}/error</text><polygon fill="#A80036" points="396.5,1315.8203,386.5,1315.8203,396.5,1319.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="385.5" x2="726.5" y1="1314.8203" y2="1314.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="402.5" y="1310.0781">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="424.5" y="1310.0781">200 OK</text><!--
@startuml
Title Transaction Requests Service - Query
participant "Payer FSP"
participant "Switch\ntransaction-requests-service" as Switch
participant "Payee FSP"

autonumber
note over "Payee FSP", Switch: Payee FSP requests the status of a transaction-request at the Payer FSP.\nID here is the ID of prevoiusly created transaction-request
"Payee FSP" -\ Switch: GET /transactionRequests/{ID}
Switch -> Switch: Validate GET /transactionRequests/{ID}
Switch - -/ "Payee FSP": 202 Accepted

alt transaction-request query is valid
    
    Switch -> Switch: Retrieve corresponding end-points for Payer FSP
    note over Switch, "Payer FSP": Switch forwards GET /transactionRequests/{ID} request to Payer FSP
    Switch -\ "Payer FSP": GET /transactionRequests/{ID}
    "Payer FSP" - -/ Switch: 202 Accepted
    "Payer FSP" -> "Payer FSP": Retrieve transaction-request
    
    alt Payer FSP successfully retrieves transaction-request
    
        note over "Payer FSP", Switch: Payer FSP responds with the\nPUT /transactionRequests/{ID} callback
        "Payer FSP" -\ Switch: PUT /transactionRequests/{ID}
        Switch - -/ "Payer FSP": 200 Ok
        
        Switch -> Switch: Validate PUT /transactionRequests/{ID}
        
        alt response is ok
        
            note over Switch, "Payee FSP": Switch forwards transaction-request response to Payee FSP
            Switch -> Switch: Retrieve corresponding end-points for Payee FSP
            
            Switch -\ "Payee FSP": PUT /transactionRequests/{ID}
            "Payee FSP" - -/ Switch: 200 Ok
            
        else response invalid
        
            note over Switch, "Payer FSP": Switch returns error to Payer FSP
        
            Switch -\ "Payer FSP": PUT /transactionRequests/{ID}/error
            "Payer FSP" - -/ Switch : 200 Ok
            
            note over Switch, "Payer FSP" #ec7063: Note that under this\nscenario the Payee FSP\nmay not receive a response
        
        end
    else Payer FSP is unable to retrieve the transaction-request
    
        note over "Payer FSP", Switch: Payer FSP returns error to Switch
    
        "Payer FSP" -\ Switch: PUT /transactionRequests/{ID}/error
        Switch - -/ "Payer FSP": 200 OK
        
        note over "Payee FSP", Switch: Switch returns error to Payee FSP
        
        Switch -\ "Payee FSP": PUT /transactionRequests/{ID}/error
        "Payee FSP" - -/ Switch: 200 OK
    
    end
else transaction-request is invalid
    note over "Payee FSP", Switch: Switch returns error to Payee FSP
    Switch -\ "Payee FSP": PUT /transactionRequests/{ID}/error
    "Payee FSP" - -/ Switch: 200 OK
end
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>