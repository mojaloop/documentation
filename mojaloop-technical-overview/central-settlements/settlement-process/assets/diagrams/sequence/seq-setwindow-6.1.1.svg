<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="936px" preserveAspectRatio="none" style="width:985px;height:936px;" version="1.1" viewBox="0 0 985 936" width="985px" zoomAndPan="magnify"><defs><filter height="300%" id="f16emix12ee9t8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="489" x="248.5" y="23.5352">6.1.1. Request Settlement Window By Id (getSettlementWindowById)</text><rect fill="#FFB6C1" height="891.293" style="stroke: #A80036; stroke-width: 1.0;" width="112" x="29" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="44.5" y="47.0566">Central HUB</text><rect fill="#90EE90" height="891.293" style="stroke: #A80036; stroke-width: 1.0;" width="390.5" x="263.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="396.75" y="47.0566">Settlement Service</text><rect fill="#FFFFE0" height="891.293" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="675" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="678" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="660.0059" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="614.3848" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="192.9082"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="198.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="588" y="237.5293"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727" y="266.8398"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="668.0059" style="stroke: #000000; stroke-width: 2.0;" width="960" x="13" y="154.2871"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="364.2793" style="stroke: #000000; stroke-width: 2.0;" width="474" x="23" y="451.0137"/><rect fill="#FFFFFF" height="186.4844" style="stroke: none; stroke-width: 1.0;" width="474" x="23" y="628.8086"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="85" x2="85" y1="137.2871" y2="839.293"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="345.5" x2="345.5" y1="137.2871" y2="839.293"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="593" x2="593" y1="137.2871" y2="839.293"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="732" x2="732" y1="137.2871" y2="839.293"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="134.334">Hub Employee</text><ellipse cx="85" cy="63.7988" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,71.7988 L85,98.7988 M72,79.7988 L98,79.7988 M85,98.7988 L72,113.7988 M85,98.7988 L98,113.7988 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="851.8281">Hub Employee</text><ellipse cx="85" cy="864.7813" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,872.7813 L85,899.7813 M72,880.7813 L98,880.7813 M85,899.7813 L72,914.7813 M85,899.7813 L98,914.7813 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="267.5" y="134.334">Settlement Service API</text><path d="M325.5,92.7988 L325.5,116.7988 M325.5,104.7988 L342.5,104.7988 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="354.5" cy="104.7988" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="267.5" y="851.8281">Settlement Service API</text><path d="M325.5,858.7813 L325.5,882.7813 M325.5,870.7813 L342.5,870.7813 " fill="none" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="354.5" cy="870.7813" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="536" y="134.334">Settlement DAO</text><ellipse cx="593" cy="104.7988" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="581" x2="605" y1="118.7988" y2="118.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="536" y="851.8281">Settlement DAO</text><ellipse cx="593" cy="870.7813" fill="#FEFECE" filter="url(#f16emix12ee9t8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="581" x2="605" y1="884.7813" y2="884.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="684" y="134.334">Central Store</text><path d="M714,84.7988 C714,74.7988 732,74.7988 732,74.7988 C732,74.7988 750,74.7988 750,84.7988 L750,110.7988 C750,120.7988 732,120.7988 732,120.7988 C732,120.7988 714,120.7988 714,110.7988 L714,84.7988 " fill="#FEFECE" filter="url(#f16emix12ee9t8)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M714,84.7988 C714,94.7988 732,94.7988 732,94.7988 C732,94.7988 750,94.7988 750,84.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="684" y="851.8281">Central Store</text><path d="M714,864.7813 C714,854.7813 732,854.7813 732,854.7813 C732,854.7813 750,854.7813 750,864.7813 L750,890.7813 C750,900.7813 732,900.7813 732,900.7813 C732,900.7813 714,900.7813 714,890.7813 L714,864.7813 " fill="#FEFECE" filter="url(#f16emix12ee9t8)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M714,864.7813 C714,874.7813 732,874.7813 732,874.7813 C732,874.7813 750,874.7813 750,864.7813 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="660.0059" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="614.3848" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="192.9082"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="198.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="588" y="237.5293"/><rect fill="#FFFFFF" filter="url(#f16emix12ee9t8)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727" y="266.8398"/><path d="M13,154.2871 L246,154.2871 L246,161.2871 L236,171.2871 L13,171.2871 L13,154.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="668.0059" style="stroke: #000000; stroke-width: 2.0;" width="960" x="13" y="154.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="28" y="167.8555">Request Settlement Window</text><polygon fill="#A80036" points="329,188.9082,339,192.9082,329,196.9082,333,192.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90" x2="335" y1="192.9082" y2="192.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="97" y="188.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="110" y="188.166">GET - /settlementWindows/{id}</text><polygon fill="#A80036" points="576,233.5293,586,237.5293,576,241.5293,580,237.5293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="582" y1="237.5293" y2="237.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="358" y="225.1318">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="371" y="217.4766">Request settlementWindow by id</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="371" y="232.7871">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="448" y="232.7871">2001</text><polygon fill="#A80036" points="715,262.8398,725,266.8398,715,270.8398,719,266.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="598" x2="721" y1="266.8398" y2="266.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="605" y="262.0977">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="618" y="262.0977">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f16emix12ee9t8)" points="510,309.8398,953,309.8398,963,358.8398,953,408.8398,510,408.8398,500,358.8398,510,309.8398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="512" y="326.4082">SELECT sw.settlementWindowId, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="540" y="341.7188">swsc.reason, sw.createdDate, swsc.createdDate changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="512" y="357.0293">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="552" y="357.0293">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="681" y="357.0293">AS sw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="512" y="372.3398">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="544" y="372.3398">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="758" y="372.3398">AS swsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="512" y="387.6504">ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="512" y="402.9609">WHERE sw.settlementWindowId = {id}</text><polygon fill="#A80036" points="362,432.0137,352,436.0137,362,440.0137,358,436.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="592" y1="436.0137" y2="436.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="368" y="431.2715">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="381" y="431.2715">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="426" y="431.2715">data</text><path d="M23,451.0137 L85,451.0137 L85,458.0137 L75,468.0137 L23,468.0137 L23,451.0137 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="364.2793" style="stroke: #000000; stroke-width: 2.0;" width="474" x="23" y="451.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="464.582">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="100" y="463.6484">[settlementWindow found]</text><path d="M52,473.3242 L52,590.3242 L332,590.3242 L332,483.3242 L322,473.3242 L52,473.3242 " fill="#FFFF00" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M322,473.3242 L322,483.3242 L332,483.3242 L322,473.3242 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="58" y="490.8926">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="74" y="506.2031">"id": data.settlementWindowId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="74" y="521.5137">"state": data.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="74" y="536.8242">"reason": data.reason,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="74" y="552.1348">"createdDate": data.createdDate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="74" y="567.4453">"changedDate": data.changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="58" y="582.7559">}</text><polygon fill="#A80036" points="101,616.8086,91,620.8086,101,624.8086,97,620.8086" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="95" x2="340" y1="620.8086" y2="620.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="107" y="616.0664">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="120" y="616.0664">Respond HTTP - 200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="497" y1="629.8086" y2="629.8086"/><path d="M356,635.8086 L356,660.8086 L483,660.8086 L483,645.8086 L473,635.8086 L356,635.8086 " fill="#D3D3D3" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M473,635.8086 L473,645.8086 L483,645.8086 L473,635.8086 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="362" y="653.377">Log ERROR event</text><path d="M101,675.1191 L101,776.1191 L332,776.1191 L332,685.1191 L322,675.1191 L101,675.1191 " fill="#FFFF00" filter="url(#f16emix12ee9t8)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M322,675.1191 L322,685.1191 L332,685.1191 L322,675.1191 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="107" y="692.6875">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="123" y="707.998">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="139" y="723.3086">"errorCode": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="139" y="738.6191">"errorDescription": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="123" y="753.9297">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="107" y="769.2402">}</text><polygon fill="#A80036" points="96,803.293,86,807.293,96,811.293,92,807.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90" x2="345" y1="807.293" y2="807.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="102" y="802.5508">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="115" y="802.5508">Respond HTTP - 4xx (Client error)</text><!--
@startuml
title 6.1.1. Request Settlement Window By Id (getSettlementWindowById)

autonumber

actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Settlement Service" #lightgreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #lightyellow
    participant DB
end box

group Request Settlement Window
    activate OPERATOR
    OPERATOR -> SSAPI: GET - /settlementWindows/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow by id\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Select from DB
    activate DB
    hnote over DB #lightyellow
        SELECT sw.settlementWindowId, swsc.settlementWindowStateId, 
               swsc.reason, sw.createdDate, swsc.createdDate changedDate
        FROM **settlementWindow** AS sw
        JOIN **settlementWindowStateChange** AS swsc
        ON swsc.settlementWindowStateChangeId = sw.currentStateChangeId
        WHERE sw.settlementWindowId = {id}
    end hnote
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return **data**
    deactivate SETTLE_DAO

    alt settlementWindow found
        note left of SSAPI #Yellow
            {
                "id": data.settlementWindowId,
                "state": data.settlementWindowStateId,
                "reason": data.reason,
                "createdDate": data.createdDate,
                "changedDate": data.changedDate
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 200 (OK)
    else
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "errorInformation": {
                    "errorCode": <integer>,
                    "errorDescription": <string>
                }
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 4xx (Client error)
        deactivate SSAPI
        deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.14.5
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>