<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1358px" preserveAspectRatio="none" style="width:1478px;height:1358px;" version="1.1" viewBox="0 0 1478 1358" width="1478px" zoomAndPan="magnify"><defs><filter height="300%" id="f10i70ncir7j5y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="315" x="582.75" y="23.5352">3.1.0. Transfer Timeout (incl. Bulk Transfer)</text><rect fill="#D3D3D3" height="1312.6875" style="stroke: #A80036; stroke-width: 1.0;" width="186" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="7" y="47.0566">Financial Service Providers</text><rect fill="#ADD8E6" height="1312.6875" style="stroke: #A80036; stroke-width: 1.0;" width="254.5" x="192" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="240.75" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="1312.6875" style="stroke: #A80036; stroke-width: 1.0;" width="993" x="448.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="894.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="510" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="903" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1205" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1056.4238" style="stroke: #000000; stroke-width: 2.0;" width="1444.5" x="23" y="170.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="361.5918" style="stroke: #000000; stroke-width: 2.0;" width="1025" x="432.5" y="281.0176"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="1005" x="442.5" y="305.3281"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="1005" x="442.5" y="351.9492"/><rect fill="#FFFFFF" height="239.3945" style="stroke: none; stroke-width: 1.0;" width="1025" x="432.5" y="403.2148"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="600.5" x="847" y="544.7227"/><rect fill="#FFFFFF" height="44.2656" style="stroke: none; stroke-width: 1.0;" width="600.5" x="847" y="591.3438"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="448.5" x="999" y="656.6094"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1086" x="33" y="857.4727"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1027" x="92" y="1058.3359"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="126" x2="126" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="226" x2="226" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="375.5" x2="375.5" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="514.5" x2="514.5" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="666" x2="666" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="796" x2="796" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="908" x2="908" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1059" x2="1059" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1209.5" x2="1209.5" y1="153.7754" y2="1244.1992"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1369.5" x2="1369.5" y1="153.7754" y2="1244.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="134.334">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="150.8223">Payer</text><ellipse cx="67.5" cy="63.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,71.7988 L67.5,98.7988 M54.5,79.7988 L80.5,79.7988 M67.5,98.7988 L54.5,113.7988 M67.5,98.7988 L80.5,113.7988 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="1256.7344">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="1273.2227">Payer</text><ellipse cx="67.5" cy="1286.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,1294.1758 L67.5,1321.1758 M54.5,1302.1758 L80.5,1302.1758 M67.5,1321.1758 L54.5,1336.1758 M67.5,1321.1758 L80.5,1336.1758 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="134.334">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="150.8223">Payee</text><ellipse cx="126.5" cy="63.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,71.7988 L126.5,98.7988 M113.5,79.7988 L139.5,79.7988 M126.5,98.7988 L113.5,113.7988 M126.5,98.7988 L139.5,113.7988 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="1256.7344">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="1273.2227">Payee</text><ellipse cx="126.5" cy="1286.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,1294.1758 L126.5,1321.1758 M113.5,1302.1758 L139.5,1302.1758 M126.5,1321.1758 L113.5,1336.1758 M126.5,1321.1758 L139.5,1336.1758 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="201" y="134.334">ML API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="196" y="150.8223">Adapter</text><path d="M206,92.7988 L206,116.7988 M206,104.7988 L223,104.7988 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="235" cy="104.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="201" y="1256.7344">ML API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="196" y="1273.2227">Adapter</text><path d="M206,1280.1758 L206,1304.1758 M206,1292.1758 L223,1292.1758 " fill="none" filter="url(#f10i70ncir7j5y)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="235" cy="1292.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="308.5" y="134.334">ML API Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="325" y="150.8223">Event Handler</text><ellipse cx="375.5" cy="104.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="371.5,92.7988,377.5,87.7988,375.5,92.7988,377.5,97.7988,371.5,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="308.5" y="1256.7344">ML API Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="325" y="1273.2227">Event Handler</text><ellipse cx="375.5" cy="1292.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="371.5,1280.1758,377.5,1275.1758,375.5,1280.1758,377.5,1285.1758,371.5,1280.1758" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="452.5" y="134.334">Transfer Timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="485" y="150.8223">Handler</text><ellipse cx="515" cy="104.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="511,92.7988,517,87.7988,515,92.7988,517,97.7988,511,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="452.5" y="1256.7344">Transfer Timeout</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="485" y="1273.2227">Handler</text><ellipse cx="515" cy="1292.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="511,1280.1758,517,1275.1758,515,1280.1758,517,1285.1758,511,1280.1758" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="600" y="97.7988"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="596" y="101.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="641" y="122.334">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="603" y="138.8223">transfer-position</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="600" y="1243.1992"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="596" y="1247.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="641" y="1267.7344">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="603" y="1284.2227">transfer-position</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="750" y="114.2871"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="746" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="753" y="138.8223">topic-event</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="750" y="1243.1992"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="746" y="1247.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="753" y="1267.7344">topic-event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="857" y="134.334">Position Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="878" y="150.8223">Handler</text><ellipse cx="908" cy="104.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="904,92.7988,910,87.7988,908,92.7988,910,97.7988,904,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="857" y="1256.7344">Position Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="878" y="1273.2227">Handler</text><ellipse cx="908" cy="1292.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="904,1280.1758,910,1275.1758,908,1280.1758,910,1285.1758,904,1280.1758" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1013" y="97.7988"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1009" y="101.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1034" y="122.334">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1016" y="138.8223">notification</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1013" y="1243.1992"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1009" y="1247.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1034" y="1267.7344">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1016" y="1284.2227">notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1153.5" y="134.334">Bulk Processing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1180" y="150.8223">Handler</text><ellipse cx="1210" cy="104.7988" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1206,92.7988,1212,87.7988,1210,92.7988,1212,97.7988,1206,92.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1153.5" y="1256.7344">Bulk Processing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1180" y="1273.2227">Handler</text><ellipse cx="1210" cy="1292.1758" fill="#FEFECE" filter="url(#f10i70ncir7j5y)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1206,1280.1758,1212,1275.1758,1210,1280.1758,1212,1285.1758,1206,1280.1758" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1306.5" y="97.7988"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1302.5" y="101.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1345" y="122.334">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1309.5" y="138.8223">bulk-processing</text><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1306.5" y="1243.1992"/><rect fill="#FEFECE" filter="url(#f10i70ncir7j5y)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1302.5" y="1247.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1345" y="1267.7344">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1309.5" y="1284.2227">bulk-processing</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="510" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="903" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="1070.4238" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1205" y="163.7754"/><path d="M23,170.7754 L173,170.7754 L173,177.7754 L163,187.7754 L23,187.7754 L23,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1056.4238" style="stroke: #000000; stroke-width: 2.0;" width="1444.5" x="23" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="38" y="184.3438">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="396.5" x="449.5" y="213.0859"/><polygon fill="#EEEEEE" points="449.5,213.0859,513.5,213.0859,513.5,220.0859,503.5,230.0859,449.5,230.0859,449.5,213.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="462.5" y="227.6543">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="565.75" y="246.6543">Timeout Handler Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="569.75" y="261.9648"/><path d="M432.5,281.0176 L494.5,281.0176 L494.5,288.0176 L484.5,298.0176 L432.5,298.0176 L432.5,281.0176 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="361.5918" style="stroke: #000000; stroke-width: 2.0;" width="1025" x="432.5" y="281.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="447.5" y="294.5859">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="509.5" y="293.6523">[transferStateId == 'RECEIVED_PREPARE']</text><path d="M442.5,305.3281 L504.5,305.3281 L504.5,312.3281 L494.5,322.3281 L442.5,322.3281 L442.5,305.3281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="1005" x="442.5" y="305.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="457.5" y="318.8965">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="519.5" y="317.9629">[Regular Transfer]</text><polygon fill="#A80036" points="1047,339.9492,1057,343.9492,1047,347.9492,1051,343.9492" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="520" x2="1053" y1="343.9492" y2="343.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="527" y="339.207">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="540" y="339.207">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="442.5" x2="1447.5" y1="352.9492" y2="352.9492"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="447.5" y="363.584">[Individual Transfer from a Bulk]</text><polygon fill="#A80036" points="1358,384.2148,1368,388.2148,1358,392.2148,1362,388.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="520" x2="1364" y1="388.2148" y2="388.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="527" y="383.4727">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="540" y="383.4727">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="432.5" x2="1457.5" y1="404.2148" y2="404.2148"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="437.5" y="414.8496">[transferStateId == 'RESERVED']</text><polygon fill="#A80036" points="654,435.4805,664,439.4805,654,443.4805,658,439.4805" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="520" x2="660" y1="439.4805" y2="439.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="527" y="434.7383">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="540" y="434.7383">Produce message</text><polygon fill="#A80036" points="677,464.791,667,468.791,677,472.791,673,468.791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="671" x2="902" y1="468.791" y2="468.791"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="683" y="464.0488">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="696" y="464.0488">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="515" x="593" y="476.791"/><polygon fill="#EEEEEE" points="593,476.791,657,476.791,657,483.791,647,493.791,593,493.791,593,476.791" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="606" y="491.3594">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="739" y="510.3594">Position Hander Consume (Timeout)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="743" y="525.6699"/><path d="M847,544.7227 L909,544.7227 L909,551.7227 L899,561.7227 L847,561.7227 L847,544.7227 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.8867" style="stroke: #000000; stroke-width: 2.0;" width="600.5" x="847" y="544.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="862" y="558.291">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="924" y="557.3574">[Regular Transfer]</text><polygon fill="#A80036" points="1047,579.3438,1057,583.3438,1047,587.3438,1051,583.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="913" x2="1053" y1="583.3438" y2="583.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="920" y="578.6016">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="933" y="578.6016">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="847" x2="1447.5" y1="592.3438" y2="592.3438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="852" y="602.9785">[Individual Transfer from a Bulk]</text><polygon fill="#A80036" points="1358,623.6094,1368,627.6094,1358,631.6094,1362,627.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="913" x2="1364" y1="627.6094" y2="627.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="920" y="622.8672">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="933" y="622.8672">Produce message</text><path d="M999,656.6094 L1066,656.6094 L1066,663.6094 L1056,673.6094 L999,673.6094 L999,656.6094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="448.5" x="999" y="656.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="1014" y="670.1777">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="348" x="1081" y="669.2441">[action IN ['bulk-timeout-received', 'bulk-timeout-reserved']]</text><polygon fill="#A80036" points="1358,716.2305,1368,720.2305,1358,724.2305,1362,720.2305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1215" x2="1364" y1="720.2305" y2="720.2305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1222" y="715.4883">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1235" y="715.4883">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="430.5" x="1006" y="728.2305"/><polygon fill="#EEEEEE" points="1006,728.2305,1070,728.2305,1070,735.2305,1060,745.2305,1006,745.2305,1006,728.2305" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1019" y="742.7988">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1142.25" y="761.7988">Bulk Processing Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1146.25" y="777.1094"/><polygon fill="#A80036" points="1070,806.4727,1060,810.4727,1070,814.4727,1066,810.4727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1064" x2="1204" y1="810.4727" y2="810.4727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1076" y="805.7305">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1089" y="805.7305">Produce message</text><path d="M33,857.4727 L100,857.4727 L100,864.4727 L90,874.4727 L33,874.4727 L33,857.4727 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1086" x="33" y="857.4727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="48" y="871.041">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="569" x="115" y="870.1074">[action IN ['timeout-received', 'timeout-reserved', 'bulk-timeout-received', 'bulk-timeout-reserved']]</text><polygon fill="#A80036" points="1047,917.0938,1057,921.0938,1047,925.0938,1051,921.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="380.5" x2="1053" y1="921.0938" y2="921.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="387.5" y="916.3516">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="400.5" y="916.3516">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1068" x="40" y="929.0938"/><polygon fill="#EEEEEE" points="40,929.0938,104,929.0938,104,936.0938,94,946.0938,40,946.0938,40,929.0938" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="53" y="943.6621">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="456" y="962.6621">Send notification to Participant (Payer)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="460" y="977.9727"/><polygon fill="#A80036" points="78.5,1007.3359,68.5,1011.3359,78.5,1015.3359,74.5,1011.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="369.5" y1="1011.3359" y2="1011.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="84.5" y="1006.5938">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="106.5" y="1006.5938">Send callback notification</text><path d="M92,1058.3359 L159,1058.3359 L159,1065.3359 L149,1075.3359 L92,1075.3359 L92,1058.3359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1027" x="92" y="1058.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="107" y="1071.9043">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="317" x="174" y="1070.9707">[action IN ['timeout-reserved', 'bulk-timeout-reserved']]</text><polygon fill="#A80036" points="1047,1117.957,1057,1121.957,1047,1125.957,1051,1121.957" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="380.5" x2="1053" y1="1121.957" y2="1121.957"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="387.5" y="1117.2148">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="409.5" y="1117.2148">Consume message</text><rect fill="#FFFFFF" filter="url(#f10i70ncir7j5y)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1009" x="99" y="1129.957"/><polygon fill="#EEEEEE" points="99,1129.957,163,1129.957,163,1136.957,153,1146.957,99,1146.957,99,1129.957" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="112" y="1144.5254">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="484.5" y="1163.5254">Send notification to Participant (Payee)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="488.5" y="1178.8359"/><polygon fill="#A80036" points="137.5,1208.1992,127.5,1212.1992,137.5,1216.1992,133.5,1212.1992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="369.5" y1="1212.1992" y2="1212.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="143.5" y="1207.457">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="165.5" y="1207.457">Send callback notification</text><!--
@startuml
title 3.1.0. Transfer Timeout (incl. Bulk Transfer)

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API\nAdapter" as MLAPI
control "ML API Notification\nEvent Handler" as NOTIFY_HANDLER
control "Transfer Timeout\nHandler" as EXP_HANDLER
collections "topic-\ntransfer-position" as TOPIC_TRANSFER_POSITION
control "Position Event\nHandler" as POS_HANDLER
control "Bulk Processing\nHandler" as BULK_PROCESSING_HANDLER
collections "topic-\nnotification" as TOPIC_NOTIFICATIONS
collections "topic-event" as TOPIC_EVENT
collections "topic-\nbulk-processing" as BULK_PROCESSING_TOPIC

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_TRANSFER_POSITION
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_NOTIFICATIONS
    participant BULK_PROCESSING_HANDLER
    participant BULK_PROCESSING_TOPIC
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
activate BULK_PROCESSING_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume\n
    alt transferStateId == 'RECEIVED_PREPARE'
        alt Regular Transfer
            EXP_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
        else Individual Transfer from a Bulk
            EXP_HANDLER -> BULK_PROCESSING_TOPIC: Produce message
        end
    else transferStateId == 'RESERVED'
        EXP_HANDLER -> TOPIC_TRANSFER_POSITION: Produce message
        TOPIC_TRANSFER_POSITION <- POS_HANDLER: Consume message
        ref over TOPIC_TRANSFER_POSITION, TOPIC_NOTIFICATIONS :  Position Hander Consume (Timeout)\n
        alt Regular Transfer
            POS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
        else Individual Transfer from a Bulk
            POS_HANDLER -> BULK_PROCESSING_TOPIC: Produce message
        end
    end
    opt action IN ['bulk-timeout-received', 'bulk-timeout-reserved']
        |||
        BULK_PROCESSING_TOPIC <- BULK_PROCESSING_HANDLER: Consume message
        ref over TOPIC_NOTIFICATIONS, BULK_PROCESSING_TOPIC : Bulk Processing Consume\n
        BULK_PROCESSING_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    end
    |||
    opt action IN ['timeout-received', 'timeout-reserved', 'bulk-timeout-received', 'bulk-timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer)\n
        NOTIFY_HANDLER -> DFSP1: Send callback notification
    end
    |||
    opt action IN ['timeout-reserved', 'bulk-timeout-reserved']
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee)\n
        NOTIFY_HANDLER -> DFSP2: Send callback notification
    end
end
deactivate BULK_PROCESSING_HANDLER
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>