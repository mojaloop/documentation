<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4442px" preserveAspectRatio="none" style="width:1809px;height:4442px;" version="1.1" viewBox="0 0 1809 4442" width="1809px" zoomAndPan="magnify"><defs><filter height="300%" id="fe6odioxcupma" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="452" x="679.5" y="23.5352">1.2.1. Prepare Handler Consume individual transfers from Bulk</text><rect fill="#FFFFE0" height="4397.2852" style="stroke: #A80036; stroke-width: 1.0;" width="1706" x="19" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="821.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="87" y="171.9082"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="4229.998" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="335" y="126.2871"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1145.5" y="1440.2988"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1145.5" y="2059.8125"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="183.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1271" y="2799.8418"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="198.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1271" y="3089.2129"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="136.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1386" y="2250.6309"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="136.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1386" y="2505.4258"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="77.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="2279.9414"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="77.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="2534.7363"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="2829.1523"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="3118.5234"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="4215.998" style="stroke: #000000; stroke-width: 2.0;" width="1785" x="13" y="133.2871"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="106.2422" style="stroke: #000000; stroke-width: 2.0;" width="554.5" x="261.5" y="216.9082"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="534.5" x="271.5" y="241.2188"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="157.5527" style="stroke: #000000; stroke-width: 2.0;" width="701.5" x="271.5" y="337.1504"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="2807.9941" style="stroke: #000000; stroke-width: 2.0;" width="1546.5" x="241.5" y="508.7031"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1459.5" x="271.5" y="617.6348"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="2516.1992" style="stroke: #000000; stroke-width: 2.0;" width="1526.5" x="251.5" y="793.498"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="590.5586" style="stroke: #000000; stroke-width: 2.0;" width="956.5" x="271.5" y="887.7402"/><rect fill="#FFFFFF" height="619.5137" style="stroke: none; stroke-width: 1.0;" width="1526.5" x="251.5" y="1485.2988"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="590.5586" style="stroke: #000000; stroke-width: 2.0;" width="956.5" x="271.5" y="1507.2539"/><rect fill="#FFFFFF" height="1204.8848" style="stroke: none; stroke-width: 1.0;" width="1526.5" x="251.5" y="2104.8125"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="240.7949" style="stroke: #000000; stroke-width: 2.0;" width="1485.5" x="271.5" y="2212.0098"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="240.7949" style="stroke: #000000; stroke-width: 2.0;" width="1485.5" x="271.5" y="2466.8047"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="581.0977" style="stroke: #000000; stroke-width: 2.0;" width="1506.5" x="261.5" y="2721.5996"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="245.1055" style="stroke: #000000; stroke-width: 2.0;" width="1486.5" x="271.5" y="2745.9102"/><rect fill="#FFFFFF" height="304.6816" style="stroke: none; stroke-width: 1.0;" width="1506.5" x="261.5" y="2998.0156"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="275.7266" style="stroke: #000000; stroke-width: 2.0;" width="1486.5" x="271.5" y="3019.9707"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="1011.5879" style="stroke: #000000; stroke-width: 2.0;" width="956.5" x="271.5" y="3330.6973"/><rect fill="#FFFFFF" height="542.8926" style="stroke: none; stroke-width: 1.0;" width="956.5" x="271.5" y="3799.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="92" x2="92" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="339.5" x2="339.5" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="819" x2="819" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="931" x2="931" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1023" x2="1023" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1150" x2="1150" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1276" x2="1276" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1391" x2="1391" y1="116.2871" y2="4366.2852"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1673" x2="1673" y1="116.2871" y2="4366.2852"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="27" y="60.3105"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="23" y="64.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="67" y="84.8457">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="30" y="101.334">transfer-prepare</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="27" y="4365.2852"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="23" y="4369.2852"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="67" y="4389.8203">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="30" y="4406.3086">transfer-prepare</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="281.5" y="113.334">Prepare Handler</text><ellipse cx="340" cy="83.7988" fill="#FEFECE" filter="url(#fe6odioxcupma)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="336,71.7988,342,66.7988,340,71.7988,342,76.7988,336,71.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="281.5" y="4378.8203">Prepare Handler</text><ellipse cx="340" cy="4397.7734" fill="#FEFECE" filter="url(#fe6odioxcupma)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="336,4385.7734,342,4380.7734,340,4385.7734,342,4390.7734,336,4385.7734" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="753" y="60.3105"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="749" y="64.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="794" y="84.8457">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="756" y="101.334">transfer-position</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="753" y="4365.2852"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="749" y="4369.2852"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="794" y="4389.8203">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="756" y="4406.3086">transfer-position</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="903" y="60.3105"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="899" y="64.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="906" y="84.8457">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="908.5" y="101.334">event</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="903" y="4365.2852"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="899" y="4369.2852"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="906" y="4389.8203">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="908.5" y="4406.3086">event</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="977" y="60.3105"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="973" y="64.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="998" y="84.8457">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="980" y="101.334">notification</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="977" y="4365.2852"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="973" y="4369.2852"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="998" y="4389.8203">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="980" y="4406.3086">notification</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1087" y="60.3105"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1083" y="64.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1125.5" y="84.8457">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1090" y="101.334">bulk-processing</text><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1087" y="4365.2852"/><rect fill="#FEFECE" filter="url(#fe6odioxcupma)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1083" y="4369.2852"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="1125.5" y="4389.8203">topic-</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="1090" y="4406.3086">bulk-processing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1228" y="113.334">Position DAO</text><ellipse cx="1276" cy="83.7988" fill="#FEFECE" filter="url(#fe6odioxcupma)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1264" x2="1288" y1="97.7988" y2="97.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1228" y="4378.8203">Position DAO</text><ellipse cx="1276" cy="4397.7734" fill="#FEFECE" filter="url(#fe6odioxcupma)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1264" x2="1288" y1="4411.7734" y2="4411.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1334" y="113.334">Participant DAO</text><ellipse cx="1391" cy="83.7988" fill="#FEFECE" filter="url(#fe6odioxcupma)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1379" x2="1403" y1="97.7988" y2="97.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1334" y="4378.8203">Participant DAO</text><ellipse cx="1391" cy="4397.7734" fill="#FEFECE" filter="url(#fe6odioxcupma)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1379" x2="1403" y1="4411.7734" y2="4411.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1625" y="113.334">Central Store</text><path d="M1655,63.7988 C1655,53.7988 1673,53.7988 1673,53.7988 C1673,53.7988 1691,53.7988 1691,63.7988 L1691,89.7988 C1691,99.7988 1673,99.7988 1673,99.7988 C1673,99.7988 1655,99.7988 1655,89.7988 L1655,63.7988 " fill="#FEFECE" filter="url(#fe6odioxcupma)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1655,63.7988 C1655,73.7988 1673,73.7988 1673,73.7988 C1673,73.7988 1691,73.7988 1691,63.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1625" y="4378.8203">Central Store</text><path d="M1655,4391.7734 C1655,4381.7734 1673,4381.7734 1673,4381.7734 C1673,4381.7734 1691,4381.7734 1691,4391.7734 L1691,4417.7734 C1691,4427.7734 1673,4427.7734 1673,4427.7734 C1673,4427.7734 1655,4427.7734 1655,4417.7734 L1655,4391.7734 " fill="#FEFECE" filter="url(#fe6odioxcupma)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1655,4391.7734 C1655,4401.7734 1673,4401.7734 1673,4401.7734 C1673,4401.7734 1691,4401.7734 1691,4391.7734 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="87" y="171.9082"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="4229.998" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="335" y="126.2871"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1145.5" y="1440.2988"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1145.5" y="2059.8125"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="183.1738" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1271" y="2799.8418"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="198.4844" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1271" y="3089.2129"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="136.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1386" y="2250.6309"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="136.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1386" y="2505.4258"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="77.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="2279.9414"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="77.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="2534.7363"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="2829.1523"/><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1668" y="3118.5234"/><path d="M13,133.2871 L236,133.2871 L236,140.2871 L226,150.2871 L13,150.2871 L13,133.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="4215.998" style="stroke: #000000; stroke-width: 2.0;" width="1785" x="13" y="133.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="28" y="146.8555">Prepare Handler Consume</text><polygon fill="#A80036" points="108,167.9082,98,171.9082,108,175.9082,104,171.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="102" x2="334" y1="171.9082" y2="171.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="114" y="167.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="127" y="167.166">Consume Prepare event message</text><path d="M261.5,216.9082 L345.5,216.9082 L345.5,223.9082 L335.5,233.9082 L261.5,233.9082 L261.5,216.9082 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="106.2422" style="stroke: #000000; stroke-width: 2.0;" width="554.5" x="261.5" y="216.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="276.5" y="230.4766">break</text><path d="M271.5,241.2188 L413.5,241.2188 L413.5,248.2188 L403.5,258.2188 L271.5,258.2188 L271.5,241.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="74.9316" style="stroke: #000000; stroke-width: 2.0;" width="534.5" x="271.5" y="241.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="286.5" y="254.7871">Validate Event</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="387" y1="295.1504" y2="295.1504"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="387" x2="387" y1="295.1504" y2="308.1504"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="387" y1="308.1504" y2="308.1504"/><polygon fill="#A80036" points="356,304.1504,346,308.1504,356,312.1504,352,308.1504" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="282.7529">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="429" x="365" y="275.0977">Validate event - Rule: type == 'prepare' &amp;&amp; action == 'bulk-prepare'</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="365" y="290.4082">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="449" y="290.4082">2001</text><path d="M271.5,337.1504 L486.5,337.1504 L486.5,344.1504 L476.5,354.1504 L271.5,354.1504 L271.5,337.1504 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="157.5527" style="stroke: #000000; stroke-width: 2.0;" width="701.5" x="271.5" y="337.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="286.5" y="350.7188">Persist Event Information</text><polygon fill="#A80036" points="919,396.7715,929,400.7715,919,404.7715,923,400.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="925" y1="400.7715" y2="400.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="396.0293">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="365" y="396.0293">Publish event information</text><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="683.5" x="278.5" y="408.7715"/><polygon fill="#EEEEEE" points="278.5,408.7715,342.5,408.7715,342.5,415.7715,332.5,425.7715,278.5,425.7715,278.5,408.7715" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="291.5" y="423.3398">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="547.25" y="442.3398">Event Handler Consume</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="551.25" y="457.6504"/><path d="M241.5,508.7031 L460.5,508.7031 L460.5,515.7031 L450.5,525.7031 L241.5,525.7031 L241.5,508.7031 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2807.9941" style="stroke: #000000; stroke-width: 2.0;" width="1546.5" x="241.5" y="508.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="256.5" y="522.2715">Validate Prepare Transfer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="387" y1="547.3242" y2="547.3242"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="387" x2="387" y1="547.3242" y2="560.3242"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="387" y1="560.3242" y2="560.3242"/><polygon fill="#A80036" points="356,556.3242,346,560.3242,356,564.3242,352,560.3242" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="542.582">4</text><text fill="#808080" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="365" y="542.582">Schema validation of the incoming message</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="387" y1="589.6348" y2="589.6348"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="387" x2="387" y1="589.6348" y2="602.6348"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="387" y1="602.6348" y2="602.6348"/><polygon fill="#A80036" points="356,598.6348,346,602.6348,356,606.6348,352,602.6348" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="584.8926">5</text><text fill="#808080" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="442" x="365" y="584.8926">Verify the message's signature (to be confirmed in future requirement)</text><path d="M271.5,617.6348 L484.5,617.6348 L484.5,624.6348 L474.5,634.6348 L271.5,634.6348 L271.5,617.6348 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="161.8633" style="stroke: #000000; stroke-width: 2.0;" width="1459.5" x="271.5" y="617.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="286.5" y="631.2031">Validate Duplicate Check</text><polygon fill="#A80036" points="1661,677.2559,1671,681.2559,1661,685.2559,1665,681.2559" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1667" y1="681.2559" y2="681.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="676.5137">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="365" y="676.5137">Request Duplicate Check</text><rect fill="#FFFFFF" filter="url(#fe6odioxcupma)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1441.5" x="278.5" y="689.2559"/><polygon fill="#EEEEEE" points="278.5,689.2559,342.5,689.2559,342.5,696.2559,332.5,706.2559,278.5,706.2559,278.5,689.2559" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="291.5" y="703.8242">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="922.75" y="722.8242">Request Duplicate Check</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="926.75" y="738.1348"/><polygon fill="#A80036" points="356,767.498,346,771.498,356,775.498,352,771.498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="350" x2="1672" y1="771.498" y2="771.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="362" y="766.7559">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="391" x="375" y="766.7559">Return { hasDuplicateId: Boolean, hasDuplicateHash: Boolean }</text><path d="M251.5,793.498 L313.5,793.498 L313.5,800.498 L303.5,810.498 L251.5,810.498 L251.5,793.498 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2516.1992" style="stroke: #000000; stroke-width: 2.0;" width="1526.5" x="251.5" y="793.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="266.5" y="807.0664">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="329" x="328.5" y="806.1328">[hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == TRUE]</text><path d="M350,815.8086 L350,870.8086 L851,870.8086 L851,825.8086 L841,815.8086 L350,815.8086 " fill="#D3D3D3" filter="url(#fe6odioxcupma)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M841,815.8086 L841,825.8086 L851,825.8086 L841,815.8086 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="450" x="356" y="833.377">In the context of a bulk (when compared to regular transfers), duplicate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="356" y="848.6875">individual transfers are now considered and reported with Modified Request,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="401" x="356" y="863.998">because they could have already been handled for another bulk.</text><path d="M271.5,887.7402 L355.5,887.7402 L355.5,894.7402 L345.5,904.7402 L271.5,904.7402 L271.5,887.7402 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="590.5586" style="stroke: #000000; stroke-width: 2.0;" width="956.5" x="271.5" y="887.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="286.5" y="901.3086">break</text><path d="M350,910.0508 L350,1394.0508 L910,1394.0508 L910,920.0508 L900,910.0508 L350,910.0508 " fill="#FFFF00" filter="url(#fe6odioxcupma)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M900,910.0508 L900,920.0508 L910,920.0508 L900,910.0508 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="927.6191">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="372" y="942.9297">id: &lt;messageId&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="372" y="958.2402">from: &lt;ledgerName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="372" y="973.5508">to: &lt;payerFspName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="372" y="988.8613">type: "application/json",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="372" y="1004.1719">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="388" y="1019.4824">headers: &lt;transferHeaders&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="388" y="1034.793">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="404" y="1050.1035">errorInformation: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="420" y="1065.4141">errorCode: "3106",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="475" x="420" y="1080.7246">errorDescription: "Modified request - Individual transfer prepare duplicate",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="435" x="420" y="1096.0352">extensionList: { extension: [ { key: "_cause", value: &lt;FSPIOPError&gt; } ] }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="404" y="1111.3457">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="388" y="1126.6563">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="388" y="1141.9668">uriParams: { id: &lt;transferId&gt; }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="372" y="1157.2773">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="372" y="1172.5879">metadata: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="388" y="1187.8984">correlationId: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="388" y="1203.209">event: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="404" y="1218.5195">type: "bulk-processing",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="404" y="1233.8301">action: "prepare-duplicate",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="404" y="1249.1406">createdAt: &lt;timestamp&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="404" y="1264.4512">state: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="420" y="1279.7617">code: "3106",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="420" y="1295.0723">status: "error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="420" y="1310.3828">description: "Modified request - Individual transfer prepare duplicate"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="404" y="1325.6934">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="404" y="1341.0039">id: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="404" y="1356.3145">responseTo: &lt;uuid&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="388" y="1371.625">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="372" y="1386.9355">}</text><polygon fill="#A80036" points="1133.5,1436.2988,1143.5,1440.2988,1133.5,1444.2988,1137.5,1440.2988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1139.5" y1="1440.2988" y2="1440.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="1427.9014">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="365" y="1420.2461">Publish Processing (failure) event for Payer</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="365" y="1435.5566">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="449" y="1435.5566">2003</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="251.5" x2="1778" y1="1486.2988" y2="1486.2988"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="331" x="256.5" y="1496.9336">[hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == FALSE]</text><path d="M271.5,1507.2539 L355.5,1507.2539 L355.5,1514.2539 L345.5,1524.2539 L271.5,1524.2539 L271.5,1507.2539 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="590.5586" style="stroke: #000000; stroke-width: 2.0;" width="956.5" x="271.5" y="1507.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="286.5" y="1520.8223">break</text><path d="M350,1529.5645 L350,2013.5645 L870,2013.5645 L870,1539.5645 L860,1529.5645 L350,1529.5645 " fill="#FFFF00" filter="url(#fe6odioxcupma)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M860,1529.5645 L860,1539.5645 L870,1539.5645 L860,1529.5645 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="1547.1328">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="372" y="1562.4434">id: &lt;messageId&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="372" y="1577.7539">from: &lt;ledgerName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="372" y="1593.0645">to: &lt;payerFspName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="372" y="1608.375">type: "application/json",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="372" y="1623.6855">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="388" y="1638.9961">headers: &lt;transferHeaders&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="388" y="1654.3066">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="404" y="1669.6172">errorInformation: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="420" y="1684.9277">errorCode: "3106",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="420" y="1700.2383">errorDescription: "Modified request",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="435" x="420" y="1715.5488">extensionList: { extension: [ { key: "_cause", value: &lt;FSPIOPError&gt; } ] }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="404" y="1730.8594">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="388" y="1746.1699">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="388" y="1761.4805">uriParams: { id: &lt;transferId&gt; }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="372" y="1776.791">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="372" y="1792.1016">metadata: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="388" y="1807.4121">correlationId: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="388" y="1822.7227">event: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="404" y="1838.0332">type: "bulk-processing",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="404" y="1853.3438">action: "prepare-duplicate",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="404" y="1868.6543">createdAt: &lt;timestamp&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="404" y="1883.9648">state: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="420" y="1899.2754">code: "3106",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="420" y="1914.5859">status: "error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="420" y="1929.8965">description: "Modified request"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="404" y="1945.207">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="404" y="1960.5176">id: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="404" y="1975.8281">responseTo: &lt;uuid&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="388" y="1991.1387">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="372" y="2006.4492">}</text><polygon fill="#A80036" points="1133.5,2055.8125,1143.5,2059.8125,1133.5,2063.8125,1137.5,2059.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1139.5" y1="2059.8125" y2="2059.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="352" y="2047.415">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="365" y="2039.7598">Publish Processing (failure) event for Payer</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="365" y="2055.0703">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="449" y="2055.0703">2003</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="251.5" x2="1778" y1="2105.8125" y2="2105.8125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="256.5" y="2116.4473">[hasDuplicateId == FALSE]</text><path d="M350,2124.7676 L350,2195.7676 L851,2195.7676 L851,2134.7676 L841,2124.7676 L350,2124.7676 " fill="#D3D3D3" filter="url(#fe6odioxcupma)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M841,2124.7676 L841,2134.7676 L851,2134.7676 L841,2124.7676 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="356" y="2142.3359">The validation of Payer, Payee can be skipped for individual transfers in Bulk</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="471" x="356" y="2157.6465">as they should've/would've been validated already in the bulk prepare part.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="356" y="2172.957">However, leaving it here for now, as in the future, this can be leveraged</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="467" x="356" y="2188.2676">when bulk transfers to multiple Payees are supported by the Specification.</text><path d="M271.5,2212.0098 L413.5,2212.0098 L413.5,2219.0098 L403.5,2229.0098 L271.5,2229.0098 L271.5,2212.0098 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="240.7949" style="stroke: #000000; stroke-width: 2.0;" width="1485.5" x="271.5" y="2212.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="286.5" y="2225.5781">Validate Payer</text><polygon fill="#A80036" points="1374,2246.6309,1384,2250.6309,1374,2254.6309,1378,2250.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1380" y1="2250.6309" y2="2250.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="2245.8887">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="374" y="2245.8887">Request to retrieve Payer Participant details (if it exists)</text><polygon fill="#A80036" points="1656,2275.9414,1666,2279.9414,1656,2283.9414,1660,2279.9414" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396" x2="1662" y1="2279.9414" y2="2279.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1403" y="2275.1992">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="1425" y="2275.1992">Request Participant details</text><polygon fill="#FFFFE0" filter="url(#fe6odioxcupma)" points="1609,2292.9414,1737,2292.9414,1747,2311.9414,1737,2330.9414,1609,2330.9414,1599,2311.9414,1609,2292.9414" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1611" y="2309.5098">participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1611" y="2324.8203">participantCurrency</text><polygon fill="#A80036" points="1407,2353.873,1397,2357.873,1407,2361.873,1403,2357.873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1401" x2="1672" y1="2357.873" y2="2357.873"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1413" y="2353.1309">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="1435" y="2353.1309">Return Participant details if it exists</text><polygon fill="#A80036" points="356,2383.1836,346,2387.1836,356,2391.1836,352,2387.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="350" x2="1390" y1="2387.1836" y2="2387.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="362" y="2382.4414">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="384" y="2382.4414">Return Participant details if it exists</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="387" y1="2431.8047" y2="2431.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="387" x2="387" y1="2431.8047" y2="2444.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="387" y1="2444.8047" y2="2444.8047"/><polygon fill="#A80036" points="356,2440.8047,346,2444.8047,356,2448.8047,352,2444.8047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="2419.4072">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="374" y="2411.752">Validate Payer</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="374" y="2427.0625">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="458" y="2427.0625">3202</text><path d="M271.5,2466.8047 L415.5,2466.8047 L415.5,2473.8047 L405.5,2483.8047 L271.5,2483.8047 L271.5,2466.8047 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="240.7949" style="stroke: #000000; stroke-width: 2.0;" width="1485.5" x="271.5" y="2466.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="286.5" y="2480.373">Validate Payee</text><polygon fill="#A80036" points="1374,2501.4258,1384,2505.4258,1374,2509.4258,1378,2505.4258" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1380" y1="2505.4258" y2="2505.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="2500.6836">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="350" x="374" y="2500.6836">Request to retrieve Payee Participant details (if it exists)</text><polygon fill="#A80036" points="1656,2530.7363,1666,2534.7363,1656,2538.7363,1660,2534.7363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396" x2="1662" y1="2534.7363" y2="2534.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1403" y="2529.9941">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="1425" y="2529.9941">Request Participant details</text><polygon fill="#FFFFE0" filter="url(#fe6odioxcupma)" points="1609,2547.7363,1737,2547.7363,1747,2566.7363,1737,2585.7363,1609,2585.7363,1599,2566.7363,1609,2547.7363" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1611" y="2564.3047">participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1611" y="2579.6152">participantCurrency</text><polygon fill="#A80036" points="1407,2608.668,1397,2612.668,1407,2616.668,1403,2612.668" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1401" x2="1672" y1="2612.668" y2="2612.668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1413" y="2607.9258">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="1435" y="2607.9258">Return Participant details if it exists</text><polygon fill="#A80036" points="356,2637.9785,346,2641.9785,356,2645.9785,352,2641.9785" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="350" x2="1390" y1="2641.9785" y2="2641.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="362" y="2637.2363">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="384" y="2637.2363">Return Participant details if it exists</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="387" y1="2686.5996" y2="2686.5996"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="387" x2="387" y1="2686.5996" y2="2699.5996"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346" x2="387" y1="2699.5996" y2="2699.5996"/><polygon fill="#A80036" points="356,2695.5996,346,2699.5996,356,2703.5996,352,2699.5996" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="2674.2021">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="374" y="2666.5469">Validate Payee</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="374" y="2681.8574">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="458" y="2681.8574">3203</text><path d="M261.5,2721.5996 L323.5,2721.5996 L323.5,2728.5996 L313.5,2738.5996 L261.5,2738.5996 L261.5,2721.5996 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="581.0977" style="stroke: #000000; stroke-width: 2.0;" width="1506.5" x="261.5" y="2721.5996"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="276.5" y="2735.168">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="206" x="338.5" y="2734.2344">[Validate Prepare Transfer (success)]</text><path d="M271.5,2745.9102 L743.5,2745.9102 L743.5,2752.9102 L733.5,2762.9102 L271.5,2762.9102 L271.5,2745.9102 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="245.1055" style="stroke: #000000; stroke-width: 2.0;" width="1486.5" x="271.5" y="2745.9102"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="427" x="286.5" y="2759.4785">Persist Transfer State (with transferState='RECEIVED-PREPARE')</text><polygon fill="#A80036" points="1259,2795.8418,1269,2799.8418,1259,2803.8418,1263,2799.8418" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1265" y1="2799.8418" y2="2799.8418"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="2787.4443">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="374" y="2779.7891">Request to persist transfer</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="374" y="2795.0996">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="458" y="2795.0996">2003</text><polygon fill="#A80036" points="1656,2825.1523,1666,2829.1523,1656,2833.1523,1660,2829.1523" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1281" x2="1662" y1="2829.1523" y2="2829.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1288" y="2824.4102">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1310" y="2824.4102">Persist transfer</text><polygon fill="#FFFFE0" filter="url(#fe6odioxcupma)" points="1607,2872.1523,1738,2872.1523,1748,2914.1523,1738,2956.1523,1607,2956.1523,1597,2914.1523,1607,2872.1523" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1609" y="2888.7207">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1609" y="2904.0313">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1609" y="2919.3418">transferStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1609" y="2934.6523">transferExtension</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="1609" y="2949.9629">ilpPacket</text><polygon fill="#A80036" points="356,2979.0156,346,2983.0156,356,2987.0156,352,2983.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="350" x2="1275" y1="2983.0156" y2="2983.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="362" y="2978.2734">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="384" y="2978.2734">Return success</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="261.5" x2="1768" y1="2999.0156" y2="2999.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="266.5" y="3009.6504">[Validate Prepare Transfer (failure)]</text><path d="M271.5,3019.9707 L1054.5,3019.9707 L1054.5,3026.9707 L1044.5,3036.9707 L271.5,3036.9707 L271.5,3019.9707 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="275.7266" style="stroke: #000000; stroke-width: 2.0;" width="1486.5" x="271.5" y="3019.9707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="738" x="286.5" y="3033.5391">Persist Transfer State (with transferState='INVALID') (Introducing a new status INVALID to mark these entries)</text><polygon fill="#A80036" points="1259,3085.2129,1269,3089.2129,1259,3093.2129,1263,3089.2129" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1265" y1="3089.2129" y2="3089.2129"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="3069.1602">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="374" y="3053.8496">Request to persist transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="332" x="374" y="3069.1602">(when Payee/Payer/crypto-condition validation fails)</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="374" y="3084.4707">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="458" y="3084.4707">2003</text><polygon fill="#A80036" points="1656,3114.5234,1666,3118.5234,1656,3122.5234,1660,3118.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1281" x2="1662" y1="3118.5234" y2="3118.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1288" y="3113.7813">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1310" y="3113.7813">Persist transfer</text><polygon fill="#FFFFE0" filter="url(#fe6odioxcupma)" points="1607,3161.5234,1738,3161.5234,1748,3210.5234,1738,3260.5234,1607,3260.5234,1597,3210.5234,1607,3161.5234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1609" y="3178.0918">transfer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1609" y="3193.4023">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1609" y="3208.7129">transferStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="1609" y="3224.0234">transferExtension</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1609" y="3239.334">transferError</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="1609" y="3254.6445">ilpPacket</text><polygon fill="#A80036" points="356,3283.6973,346,3287.6973,356,3291.6973,352,3287.6973" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="350" x2="1275" y1="3287.6973" y2="3287.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="362" y="3282.9551">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="384" y="3282.9551">Return success</text><path d="M271.5,3330.6973 L333.5,3330.6973 L333.5,3337.6973 L323.5,3347.6973 L271.5,3347.6973 L271.5,3330.6973 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1011.5879" style="stroke: #000000; stroke-width: 2.0;" width="956.5" x="271.5" y="3330.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="286.5" y="3344.2656">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="206" x="348.5" y="3343.332">[Validate Prepare Transfer (success)]</text><path d="M350,3353.0078 L350,3745.0078 L630,3745.0078 L630,3363.0078 L620,3353.0078 L350,3353.0078 " fill="#FFFF00" filter="url(#fe6odioxcupma)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M620,3353.0078 L620,3363.0078 L630,3363.0078 L620,3353.0078 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="356" y="3370.5762">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="3385.8867">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="372" y="3401.1973">id: &lt;messageId&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="372" y="3416.5078">from: &lt;payerFspName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="372" y="3431.8184">to: &lt;payeeFspName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="372" y="3447.1289">type: "application/json",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="372" y="3462.4395">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="388" y="3477.75">headers: &lt;transferHeaders&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="388" y="3493.0605">payload: &lt;transferMessage&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="372" y="3508.3711">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="372" y="3523.6816">metadata: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="388" y="3538.9922">event: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="404" y="3554.3027">id: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="404" y="3569.6133">responseTo: &lt;previous.uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="404" y="3584.9238">type: "position",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="404" y="3600.2344">action: "bulk-prepare",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="404" y="3615.5449">createdAt: &lt;timestamp&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="404" y="3630.8555">state: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="420" y="3646.166">status: "success",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="420" y="3661.4766">code: 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="420" y="3676.7871">description:"action successful"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="404" y="3692.0977">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="388" y="3707.4082">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="372" y="3722.7188">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="3738.0293">}</text><polygon fill="#A80036" points="807,3787.3926,817,3791.3926,807,3795.3926,811,3791.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="813" y1="3791.3926" y2="3791.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="3778.9951">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="374" y="3771.3398">Route &amp; Publish Position event for Payer</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="374" y="3786.6504">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="458" y="3786.6504">2003</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="271.5" x2="1228" y1="3800.3926" y2="3800.3926"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="276.5" y="3811.0273">[Validate Prepare Transfer (failure)]</text><path d="M350,3819.3477 L350,4288.3477 L957,4288.3477 L957,3829.3477 L947,3819.3477 L350,3819.3477 " fill="#FFFF00" filter="url(#fe6odioxcupma)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M947,3819.3477 L947,3829.3477 L957,3829.3477 L947,3819.3477 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="356" y="3836.916">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="3852.2266">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="372" y="3867.5371">id: &lt;messageId&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="372" y="3882.8477">from: &lt;ledgerName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="372" y="3898.1582">to: &lt;payerFspName&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="372" y="3913.4688">type: "application/json"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="372" y="3928.7793">content: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="388" y="3944.0898">headers: &lt;transferHeaders&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="388" y="3959.4004">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="404" y="3974.7109">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="522" x="420" y="3990.0215">"errorCode": &lt;possible codes: [2003, 3100, 3105, 3106, 3202, 3203, 3300, 3301]&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="392" x="420" y="4005.332">"errorDescription": "&lt;refer to section 35.1.3 for description&gt;",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="315" x="420" y="4020.6426">"extensionList": &lt;transferMessage.extensionList&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="388" y="4035.9531">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="372" y="4051.2637">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="372" y="4066.5742">metadata: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="388" y="4081.8848">event: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="404" y="4097.1953">id: &lt;uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="404" y="4112.5059">responseTo: &lt;previous.uuid&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="404" y="4127.8164">type: "bulk-processing",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="404" y="4143.127">action: "prepare",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="404" y="4158.4375">createdAt: &lt;timestamp&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="404" y="4173.748">state: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="420" y="4189.0586">status: 'error',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="420" y="4204.3691">code: &lt;errorInformation.errorCode&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="420" y="4219.6797">description: &lt;errorInformation.errorDescription&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="404" y="4234.9902">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="388" y="4250.3008">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="372" y="4265.6113">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="4280.9219">}</text><polygon fill="#A80036" points="1138.5,4330.2852,1148.5,4334.2852,1138.5,4338.2852,1142.5,4334.2852" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="345" x2="1144.5" y1="4334.2852" y2="4334.2852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="352" y="4321.8877">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="374" y="4314.2324">Publish Prepare failure event to Bulk Processing Topic (for Payer)</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="374" y="4329.543">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="458" y="4329.543">2003</text><!--
@startuml
title 1.2.1. Prepare Handler Consume individual transfers from Bulk

autonumber


collections "topic-\ntransfer-prepare" as TOPIC_TRANSFER_PREPARE
control "Prepare Handler" as PREP_HANDLER
collections "topic-\ntransfer-position" as TOPIC_TRANSFER_POSITION
collections "topic-\nbulk-processing" as TOPIC_BULK_PROCESSING
collections "topic-\nevent" as TOPIC_EVENTS
collections "topic-\nnotification" as TOPIC_NOTIFICATIONS
entity "Position DAO" as POS_DAO
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Central Service" #LightYellow
    participant TOPIC_TRANSFER_PREPARE
    participant PREP_HANDLER
    participant TOPIC_TRANSFER_POSITION
    participant TOPIC_EVENTS
    participant TOPIC_NOTIFICATIONS
    participant TOPIC_BULK_PROCESSING
    participant POS_DAO
    participant PARTICIPANT_DAO
    participant DB
end box

activate PREP_HANDLER
group Prepare Handler Consume
    TOPIC_TRANSFER_PREPARE <- PREP_HANDLER: Consume Prepare event message
    activate TOPIC_TRANSFER_PREPARE
    deactivate TOPIC_TRANSFER_PREPARE

    break
        group Validate Event
            PREP_HANDLER <-> PREP_HANDLER: Validate event - Rule: type == 'prepare' && action == 'bulk-prepare'\n<color #FF0000><b>Error codes:</b> 2001</color>
        end
    end

    group Persist Event Information
        |||
        PREP_HANDLER -> TOPIC_EVENTS: Publish event information
        ref over PREP_HANDLER, TOPIC_EVENTS :  Event Handler Consume\n
        |||
    end

    group Validate Prepare Transfer 
        PREP_HANDLER <-> PREP_HANDLER: <color #gray>Schema validation of the incoming message</color>
        PREP_HANDLER <-> PREP_HANDLER: <color #gray>Verify the message's signature (to be confirmed in future requirement)</color>

        group Validate Duplicate Check
            |||
            PREP_HANDLER -> DB: Request Duplicate Check
            ref over PREP_HANDLER, DB:  Request Duplicate Check\n
            DB - -> PREP_HANDLER: Return { hasDuplicateId: Boolean, hasDuplicateHash: Boolean }
        end

        alt hasDuplicateId == TRUE && hasDuplicateHash == TRUE
            note right of PREP_HANDLER #lightgrey
                In the context of a bulk (when compared to regular transfers), duplicate
                individual transfers are now considered and reported with Modified Request,
                because they could have already been handled for another bulk.
            end note
            break
                note right of PREP_HANDLER #yellow
                    {
                        id: <messageId>
                        from: <ledgerName>,
                        to: <payerFspName>,
                        type: "application/json",
                        content: {
                            headers: <transferHeaders>,
                            payload: {
                                errorInformation: {
                                    errorCode: "3106",
                                    errorDescription: "Modified request - Individual transfer prepare duplicate",
                                    extensionList: { extension: [ { key: "_cause", value: <FSPIOPError> } ] }
                                }
                            },
                            uriParams: { id: <transferId> }
                        },
                        metadata: {
                            correlationId: <uuid>,
                            event: {
                                type: "bulk-processing",
                                action: "prepare-duplicate",
                                createdAt: <timestamp>,
                                state: {
                                    code: "3106",
                                    status: "error",
                                    description: "Modified request - Individual transfer prepare duplicate"
                                },
                                id: <uuid>,
                                responseTo: <uuid>
                            }
                        }
                end note
                PREP_HANDLER -> TOPIC_BULK_PROCESSING: Publish Processing (failure) event for Payer\n<color #FF0000><b>Error codes:</b> 2003</color>
                activate TOPIC_BULK_PROCESSING
                deactivate TOPIC_BULK_PROCESSING
            end
        else hasDuplicateId == TRUE && hasDuplicateHash == FALSE
            break
                note right of PREP_HANDLER #yellow
                    {
                        id: <messageId>
                        from: <ledgerName>,
                        to: <payerFspName>,
                        type: "application/json",
                        content: {
                            headers: <transferHeaders>,
                            payload: {
                                errorInformation: {
                                    errorCode: "3106",
                                    errorDescription: "Modified request",
                                    extensionList: { extension: [ { key: "_cause", value: <FSPIOPError> } ] }
                                }
                            },
                            uriParams: { id: <transferId> }
                        },
                        metadata: {
                            correlationId: <uuid>,
                            event: {
                                type: "bulk-processing",
                                action: "prepare-duplicate",
                                createdAt: <timestamp>,
                                state: {
                                    code: "3106",
                                    status: "error",
                                    description: "Modified request"
                                },
                                id: <uuid>,
                                responseTo: <uuid>
                            }
                        }
                end note
                PREP_HANDLER -> TOPIC_BULK_PROCESSING: Publish Processing (failure) event for Payer\n<color #FF0000><b>Error codes:</b> 2003</color>
                activate TOPIC_BULK_PROCESSING
                deactivate TOPIC_BULK_PROCESSING
            end
        else hasDuplicateId == FALSE
            note right of PREP_HANDLER #lightgrey
                The validation of Payer, Payee can be skipped for individual transfers in Bulk
                as they should've/would've been validated already in the bulk prepare part.
                However, leaving it here for now, as in the future, this can be leveraged
                when bulk transfers to multiple Payees are supported by the Specification.
            end note
            group Validate Payer
                PREP_HANDLER -> PARTICIPANT_DAO: Request to retrieve Payer Participant details (if it exists)
                activate PARTICIPANT_DAO
                PARTICIPANT_DAO -> DB: Request Participant details
                hnote over DB #lightyellow
                    participant
                    participantCurrency
                end note
                activate DB
                PARTICIPANT_DAO <- - DB: Return Participant details if it exists
                deactivate DB
                PARTICIPANT_DAO - -> PREP_HANDLER: Return Participant details if it exists
                deactivate PARTICIPANT_DAO
                PREP_HANDLER <-> PREP_HANDLER: Validate Payer\n<color #FF0000><b>Error codes:</b> 3202</color>
            end
            group Validate Payee
                PREP_HANDLER -> PARTICIPANT_DAO: Request to retrieve Payee Participant details (if it exists)
                activate PARTICIPANT_DAO
                PARTICIPANT_DAO -> DB: Request Participant details
                hnote over DB #lightyellow
                    participant
                    participantCurrency
                end note
                activate DB
                PARTICIPANT_DAO <- - DB: Return Participant details if it exists
                deactivate DB
                PARTICIPANT_DAO - -> PREP_HANDLER: Return Participant details if it exists
                deactivate PARTICIPANT_DAO
                PREP_HANDLER <-> PREP_HANDLER: Validate Payee\n<color #FF0000><b>Error codes:</b> 3203</color>
            end
            
            alt Validate Prepare Transfer (success)
                group Persist Transfer State (with transferState='RECEIVED-PREPARE')
                    PREP_HANDLER -> POS_DAO: Request to persist transfer\n<color #FF0000><b>Error codes:</b> 2003</color>
                    activate POS_DAO
                    POS_DAO -> DB: Persist transfer
                    hnote over DB #lightyellow
                        transfer
                        transferParticipant
                        transferStateChange
                        transferExtension
                        ilpPacket
                    end note
                    activate DB
                    deactivate DB
                    POS_DAO - -> PREP_HANDLER: Return success
                    deactivate POS_DAO
                end
            else Validate Prepare Transfer (failure)
                group Persist Transfer State (with transferState='INVALID') (Introducing a new status INVALID to mark these entries)
                    PREP_HANDLER -> POS_DAO: Request to persist transfer\n(when Payee/Payer/crypto-condition validation fails)\n<color #FF0000><b>Error codes:</b> 2003</color>
                    activate POS_DAO
                    POS_DAO -> DB: Persist transfer
                    hnote over DB #lightyellow
                        transfer
                        transferParticipant
                        transferStateChange
                        transferExtension
                        transferError
                        ilpPacket
                    end note
                    activate DB
                    deactivate DB
                    POS_DAO - -> PREP_HANDLER: Return success
                    deactivate POS_DAO
                end
            end
        end
    end

    alt Validate Prepare Transfer (success)
        note right of PREP_HANDLER #yellow
            Message:
            {
                id: <messageId>
                from: <payerFspName>,
                to: <payeeFspName>,
                type: "application/json",
                content: {
                    headers: <transferHeaders>,
                    payload: <transferMessage>
                },
                metadata: {
                    event: {
                        id: <uuid>,
                        responseTo: <previous.uuid>,
                        type: "position",
                        action: "bulk-prepare",
                        createdAt: <timestamp>,
                        state: {
                            status: "success",
                            code: 0,
                            description:"action successful"
                        }
                    }
                }
            }
        end note
        PREP_HANDLER -> TOPIC_TRANSFER_POSITION: Route & Publish Position event for Payer\n<color #FF0000><b>Error codes:</b> 2003</color>
    else Validate Prepare Transfer (failure)
        note right of PREP_HANDLER #yellow
            Message:
            {
                id: <messageId>
                from: <ledgerName>,
                to: <payerFspName>,
                type: "application/json"
                content: {
                    headers: <transferHeaders>,
                    payload: {
                        "errorInformation": {
                            "errorCode": <possible codes: [2003, 3100, 3105, 3106, 3202, 3203, 3300, 3301]>
                            "errorDescription": "<refer to section 35.1.3 for description>",
                            "extensionList": <transferMessage.extensionList>
                    }
                },
                metadata: {
                    event: {
                        id: <uuid>,
                        responseTo: <previous.uuid>,
                        type: "bulk-processing",
                        action: "prepare",
                        createdAt: <timestamp>,
                        state: {
                            status: 'error',
                            code: <errorInformation.errorCode>
                            description: <errorInformation.errorDescription>
                        }
                    }
                }
            }
        end note
        PREP_HANDLER -> TOPIC_BULK_PROCESSING: Publish Prepare failure event to Bulk Processing Topic (for Payer) \n<color #FF0000><b>Error codes:</b> 2003</color>
    end
end

deactivate PREP_HANDLER
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="305px" preserveAspectRatio="none" style="width:536px;height:305px;background:#000000;" version="1.1" viewBox="0 0 536 305" width="536px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="207.5313" style="stroke: #FFFFFF; stroke-width: 1.0;" width="535" x="0" y="0"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="5" y="16.6016">Welcome to PlantUML!</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="30.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="266" x="5" y="44.8672">If you use this software, you accept its license.</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="99" x="5" y="59">(details by typing</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="108" y="58.7012">license</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="161" y="59">keyword)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="73.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="5" y="87.2656">You can start with a simple UML Diagram like:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="101.3984"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="119" x="5" y="115.0684">Bob-&gt;Alice:Hello</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="129.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="14" x="5" y="143.6328">Or</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="157.7656"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="5" y="171.4355">classExample</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="9" y="185.8672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="324" x="5" y="200">You will find more information about PlantUML syntax on</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="117" x="333" y="200">http://plantuml.com</text><image height="71" width="80" x="449" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABHCAMAAACnHDC8AAADAFBMVEX///+BpbvD3u/f7vfPz8+nz+g3ksuZEDkWADr/ujlvsdpTodLCwsOLwOEbg8T//v6pqamZETnLysvT09To5+jqLS4VATj9/f27u7vDw8MTfsK+v7/j4+SOweJprdjL4/KxsbEri8jk8PgXa57c29uUETez1utQoNJ1tNtEmc9cptWBut6ayOW/3O6YEDjY6vUfhcXBwcHs7Ozw9/v83t79uTn7+/vX19ehoaHx8fG2tLXHx8fuVlfrNTYaBjn/vUH5+fmko6WXl5f/+fn95ub+9PT+8PD3qKidmaMxIUrnqDWcFj7n5eX09PTu7u2SkpKfnZ6rq6z0lJTm4tzJrHUfDT339/eFGDn6tjcrEzOvrbBuZ3l4eomSMS7Hz9Smpqasu8SFiYuQETfa2du1m6OOM051J0NWTWL5xse4uLj6zc33r6/4vb7ydHXqLi/72dntTE3tR0ijbn5jW3C+u8NANVQrG0XFubqRVGZza4GQGT2VaS7a0NPJtI6IJj/zszrfqkXXzr/Hw8cgC0LUqltOQ2JsSC5bTGjOpFafSi2+iDGtyt14m7TJhTCPJUSwoIG/qa+ikHiIgpCRHjI9j8KXbnaQH0FLf6FGPlp0cnYyKE2rg49Wj7dFXHmcwtrp6uu+xMjvYWLvW1z97e3sPD3sP0DuUlP709PYzdDPmzqZWWySRVygfHHd1smWkZ+PgnibETqsl260q5fLuppJLC/dpj2HPFLTtHv/ujrTwJy5s6iWjIi0iD3joTTCmU3trjuvZS2zlFvjq0HSyLbYp0qRts10XGxEKC9yPVBQZIOPdlNvMk2NeYNqRlujtcCVrr3j5eY1gK9Qn9GLp7lbeJXRxrCkiZDaozyukoJ+H0B3rc+OYy+iprJkYXdhmr6ee0afs79xq9BikrGKjI3FomEiLFO0ay6nfIm4pZXRjTFuhZSZWm0zcZyJN0KNTk4eebNfdIGGlZ93h5kcED5nOVYyRWbziIk9dJ4kerE5ZYxRUnLG1d7p8PTvY2PtTk/1nZ1ycV/bAAAFfElEQVR42mNgoB7IABFMVDTwlTOVDVyiDiSYqWjgwc93GagJshdRNwzzL8WCKEZqmeemfZp9L5BmoZb7mIwPH2Fg4DelkgtzLpocPsPgxsPwmToudGcyvnzGjSfk0AzqeNn9XPzfCcv/nZi/mzr+dRctcGNYbmsDyijUcCF/nPqvXfy/GTj2UCuCRW0YGExEbfkZqJSwr2kYgqgbqtQycLcBsEAQ7GfIBTuRGoWDwOK3p+59fb4r8jSVDLx7dOnR+2+03v55RLWCwSQbmFlEF1LLywwMz/53rud1enyaioWhM0OGO1VLVwZ+F2qapmIEZ1KjcPBj5gOG4ksIh/JIMWPlPv7ypqQZ11PqGGiox/TtDcefF/fFf6s9p4KBHzku/foNNPAX81t+ga98Xyk2sHNRoNdqsIGMnG87HrC/o9RAxmntyl+5P4AN/HPV+M99SispRt4frP8f/DT9wsYo+F3+/+k/FLuQHWjEZDU2zVvy6s+uPmH6RxUXMv/4G/f+yFtQsv5Daaph5GPj5uJlZWKWhOYTJgYqg1EDB5GBn+nlwpoJ6CrWHkYXKSnBYyBq1hPJYF6Q5nAISSRY236fqOZ1JBHhrNNPbZ5/Q856TH/+M7L+ArsPJeuFuX6uBFL9gWmboSKWLq6guqz87+EDMCtT74AkHVMTP6JkPUbOL+Cc8gdhIH8o4yIoM067AFy41wq6QkXqf9aDrbR5MgkqUvu3DquBcC+XZyzfB2NfvHVz/TuGq8wzemH1RuhjUaVb/I7eRSdhag79jPr2HLeXVzBVIxomLo9vMvT/9y/ZCDPuFNhGQfYC1PB3/L8Dhwt9fN6WfkQovGeodG/nzhfGMBdDqrPfZ0UlbqAY+OBB44UfWFzo6weOCxDgAkWe+k2II+VSTHygroM5yWbHKYbqViQRX4/aN2iRIu4LjwuomVyyQBNXhgPZPbozNqL6slErBL0txy6PamD68ZvIpkERPCUZ1KDq13G7tx5VhO/+8kLkMPxw8dlFuORvGGJYuQYscPV2EaPYU+RO9nHJ2O8JyJnnZ9dCWd9NiDBU/n6PKWMpqqVAbyMc2RPsfwXN37aOaP6eFCEI97Lyd7GP1/4KoxiHqlpdv0cBVcS/uQ7d300710O9LPSH+2eVeE3hdGR/o4C3e5a9eIUiwurEsQNVDTvLw6cQL4MN/HxnnYyZ9GUczd280HeTZqJ0TI6t/PPwJ7JI/OddkIBm+gdrH/Z92ZZpg8W48qjETQwMekgim/9HHWc45bkfIZL79OZ5LA3OkE3XqjagGRcQulwDRBvDRRawJTwB0XZwA/MuHTmOpAWpBRv4Kb8sArmrEW28KAS1GHZ0rb4DYV2FZRXbrieoBWzbIWAYCv1n+sXK9PNGp7spIlEWipbCUqDqB1Cs+DdO3fAOVsyCjeHz2b3uE0oF8I/5yO6gFTADOd5+c639CCkB1t+5uwSuTqxgFQPDjtfVHxDdCFCsAOPiO1qNAioc5r/lmPqP+QsX8yf+m4rsn/a+iX3EUP7s5WZkhS2tW//MWYUs4rk/9+mdU+hxCC2x41o+RMANFPi8alaB3RtoHXDbEmxwv3LDOWiT/5gT2ODiqx+hcWH0SOcAwkBweXjxaEzkArCXBVl+cvzac74DmlkMpd7/ZgEF0vue5xARBQnOC06g4uTvQWhkCCjaifI8QPYypPLZz+cFc6HgC1hkCGg8NH59EiUhffx18wNKIzDgABMj4xu4C2EJ4o1u7TVi6vEXDAwc/BhdATlsFf0ie+eZ6Cp5biielUcR0T7/XxS1lXqYQcP8HFILFFnuwr+9i1C8TDJArpchNTLTfgoNRGvbLPrWeIbazSeZBX+kydbMgnX8UFjvMLkG+q4HABVtKp9tQ9JtAAAAAElFTkSuQmCC" y="6"/><rect fill="#000000" height="97.4414" style="stroke: #000000; stroke-width: 1.0;" width="535" x="0" y="207.5313"/><rect fill="#33FF02" height="21.4883" style="stroke: #33FF02; stroke-width: 1.0;" width="158" x="5" y="212.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="6" y="227.5313">[From string (line 2) ]</text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="10" y="248.0195"/><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="5" y="264.5078">@startuml</text><text fill="#33FF02" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="10" y="280.9961"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="10" y="297.4844">Empty description</text><!--
@startuml


@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>