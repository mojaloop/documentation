<svg xmlns="http://www.w3.org/2000/svg" height="4408" preserveAspectRatio="none" style="width:1821px;height:4408px" width="1821">
  <defs>
    <filter height="300%" id="a" width="300%" x="-1" y="-1">
      <feGaussianBlur result="blurOut" stdDeviation="2"/>
      <feColorMatrix in="blurOut" result="blurOut2" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
      <feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/>
      <feBlend in="SourceGraphic" in2="blurOut3"/>
    </filter>
  </defs>
  <text font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="557" x="630" y="28.708">
    1.2.1. Prepare Handler Consume individual transfers from Bulk
  </text>
  <path fill="#FFFFE0" stroke="#a80036" d="M16 40.953h1714v4361.109H16z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="817.5" y="53.02">
    Central Service
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M82 177.648h10v30H82zM342 132.383h10v4194.383h-10zM1154 1436.086h10v30h-10zM1154 2049.406h10v30h-10zM1278.5 2784.664h10v181.93h-10zM1278.5 3071.93h10v197.063h-10zM1393 2239.008h10v135.664h-10zM1393 2492.203h10v135.664h-10zM1673 2268.141h10v77.398h-10zM1673 2521.336h10v77.398h-10zM1673 2813.797h10v30h-10zM1673 3101.063h10v30h-10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M10 139.383h1797v4180.383H10z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M268.5 222.648H834v105.531H268.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 246.781H824v74.398H278.5zM278.5 342.18h707v156.664h-707zM248.5 512.844H1797v2785.148H248.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 621.242H1736v160.797H278.5zM258.5 796.039H1787v2494.953H258.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 889.57h957v584.516h-957z"/>
  <path fill="#FFF" d="M258.5 1481.086H1787v613.32H258.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 1502.891h957v584.516h-957z"/>
  <path fill="#FFF" d="M258.5 2094.406H1787v1196.586H258.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 2200.742H1762v239.195H278.5zM278.5 2453.938H1762v239.195H278.5zM268.5 2707.133H1777v576.859H268.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 2731.266H1767v243.328H278.5z"/>
  <path fill="#FFF" d="M268.5 2981.594H1777v302.398H268.5z"/>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M278.5 3003.398H1767v273.594H278.5zM278.5 3311.992h957v1000.773h-957z"/>
  <path fill="#FFF" d="M278.5 3775.711h957v537.055h-957z"/>
  <path stroke="#a80036" stroke-dasharray="5,5" d="M87 122.383v4214.383M346.5 122.383v4214.383M836.5 122.383v4214.383M944.5 122.383v4214.383M1033.5 122.383v4214.383M1158.5 122.383v4214.383M1283.5 122.383v4214.383M1397.5 122.383v4214.383M1678 122.383v4214.383"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M24 66.789h126v46.594H24z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M20 70.789h126v46.594H20z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="63.5" y="90.784">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="27" y="107.081">
    transfer-prepare
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M24 4335.766h126v46.594H24z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M20 4339.766h126v46.594H20z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="63.5" y="4359.761">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="27" y="4376.058">
    transfer-prepare
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="288.5" y="119.081">
    Prepare Handler
  </text>
  <circle cx="347" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path fill="#A80036" stroke="#a80036" d="M343 78.086l6-5-2 5 2 5-6-5z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="288.5" y="4348.761">
    Prepare Handler
  </text>
  <circle cx="347" cy="4368.063" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path fill="#A80036" stroke="#a80036" d="M343 4356.063l6-5-2 5 2 5-6-5z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M773.5 66.789h127v46.594h-127z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M769.5 70.789h127v46.594h-127z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="813.5" y="90.784">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="776.5" y="107.081">
    transfer-position
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M773.5 4335.766h127v46.594h-127z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M769.5 4339.766h127v46.594h-127z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="813.5" y="4359.761">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="776.5" y="4376.058">
    transfer-position
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M918.5 66.789h53v46.594h-53z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M914.5 70.789h53v46.594h-53z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="921.5" y="90.784">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="921.5" y="107.081">
    event
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M918.5 4335.766h53v46.594h-53z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M914.5 4339.766h53v46.594h-53z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="921.5" y="4359.761">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="921.5" y="4376.058">
    event
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M989.5 66.789h89v46.594h-89z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M985.5 70.789h89v46.594h-89z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="1010.5" y="90.784">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="992.5" y="107.081">
    notification
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M989.5 4335.766h89v46.594h-89z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M985.5 4339.766h89v46.594h-89z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="1010.5" y="4359.761">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="992.5" y="4376.058">
    notification
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1096.5 66.789h125v46.594h-125z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1092.5 70.789h125v46.594h-125z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="1135.5" y="90.784">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="1099.5" y="107.081">
    bulk-processing
  </text>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1096.5 4335.766h125v46.594h-125z"/>
  <path fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="1.5" d="M1092.5 4339.766h125v46.594h-125z"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="1135.5" y="4359.761">
    topic-
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="1099.5" y="4376.058">
    bulk-processing
  </text>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1235.5" y="119.081">
    Position DAO
  </text>
  <circle cx="1283.5" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1271.5 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1235.5" y="4348.761">
    Position DAO
  </text>
  <circle cx="1283.5" cy="4368.063" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1271.5 4382.063h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1341.5" y="119.081">
    Participant DAO
  </text>
  <circle cx="1398" cy="90.086" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1386 104.086h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1341.5" y="4348.761">
    Participant DAO
  </text>
  <circle cx="1398" cy="4368.063" fill="#FEFECE" filter="url(#a)" stroke="#a80036" stroke-width="2" r="12"/>
  <path stroke="#a80036" stroke-width="2" d="M1386 4382.063h24"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1630" y="119.081">
    Central Store
  </text>
  <path d="M1660 70.086c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M1660 70.086c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <text font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1630" y="4348.761">
    Central Store
  </text>
  <path d="M1660 4362.063c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10v-26" fill="#FEFECE" filter="url(#a)" stroke="#000" stroke-width="1.5"/>
  <path d="M1660 4362.063c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#000" stroke-width="1.5"/>
  <path fill="#FFF" filter="url(#a)" stroke="#a80036" d="M82 177.648h10v30H82zM342 132.383h10v4194.383h-10zM1154 1436.086h10v30h-10zM1154 2049.406h10v30h-10zM1278.5 2784.664h10v181.93h-10zM1278.5 3071.93h10v197.063h-10zM1393 2239.008h10v135.664h-10zM1393 2492.203h10v135.664h-10zM1673 2268.141h10v77.398h-10zM1673 2521.336h10v77.398h-10zM1673 2813.797h10v30h-10zM1673 3101.063h10v30h-10z"/>
  <path d="M10 139.383h240v7l-10 10H10v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M10 139.383h1797v4180.383H10z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="25" y="152.45">
    Prepare Handler Consume
  </text>
  <path fill="#A80036" stroke="#a80036" d="M103 173.648l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" d="M97 177.648h244"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="109" y="172.583">
    1
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="122" y="172.583">
    Consume Prepare event message
  </text>
  <path d="M268.5 222.648h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M268.5 222.648H834v105.531H268.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="283.5" y="235.715">
    break
  </text>
  <path d="M278.5 246.781h152v7l-10 10h-142v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 246.781H824v74.398H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="293.5" y="259.848">
    Validate Event
  </text>
  <path stroke="#a80036" d="M352 300.18h42M394 300.18v13M353 313.18h41"/>
  <path fill="#A80036" stroke="#a80036" d="M363 309.18l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="287.547">
    2
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="372" y="279.981">
    Validate event - Rule: type == &apos;prepare&apos; &amp;&amp; action == &apos;bulk-prepare&apos;
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="372" y="295.114">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="466" y="295.114">
    2001
  </text>
  <path d="M278.5 342.18h232v7l-10 10h-222v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 342.18h707v156.664h-707z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="293.5" y="355.247">
    Persist Event Information
  </text>
  <path fill="#A80036" stroke="#a80036" d="M933 401.445l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 405.445h587"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="400.379">
    3
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="372" y="400.379">
    Publish event information
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M285.5 413.445h689v55.398h-689z"/>
  <path fill="#EEE" stroke="#000" stroke-width="2" d="M285.5 413.445h66v7l-10 10h-56v-17z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="298.5" y="427.512">
    ref
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="554.5" y="446.512">
    Event Handler Consume
  </text>
  <path d="M248.5 512.844h236v7l-10 10h-226v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M248.5 512.844H1797v2785.148H248.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="263.5" y="525.911">
    Validate Prepare Transfer
  </text>
  <path stroke="#a80036" d="M352 551.109h42M394 551.109v13M353 564.109h41"/>
  <path fill="#A80036" stroke="#a80036" d="M363 560.11l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="546.043">
    4
  </text>
  <text fill="gray" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="372" y="546.043">
    Schema validation of the incoming message
  </text>
  <path stroke="#a80036" d="M352 593.242h42M394 593.242v13M353 606.242h41"/>
  <path fill="#A80036" stroke="#a80036" d="M363 602.242l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="588.176">
    5
  </text>
  <text fill="gray" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="453" x="372" y="588.176">
    Verify the message&apos;s signature (to be confirmed in future requirement)
  </text>
  <path d="M278.5 621.242h231v7l-10 10h-221v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 621.242H1736v160.797H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="293.5" y="634.309">
    Validate Duplicate Check
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1666 680.508l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 684.508h1320"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="679.442">
    6
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="372" y="679.442">
    Request Duplicate Check
  </text>
  <path fill="#FFF" filter="url(#a)" stroke="#000" stroke-width="2" d="M285.5 692.508H1725v55.398H285.5z"/>
  <path fill="#EEE" stroke="#000" stroke-width="2" d="M285.5 692.508h66v7l-10 10h-56v-17z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="298.5" y="706.575">
    ref
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="927.75" y="725.575">
    Request Duplicate Check
  </text>
  <path fill="#A80036" stroke="#a80036" d="M363 770.04l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M357 774.039h1320"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="369" y="768.973">
    7
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="408" x="382" y="768.973">
    Return { hasDuplicateId: Boolean, hasDuplicateHash: Boolean }
  </text>
  <path d="M258.5 796.04h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M258.5 796.039H1787v2494.953H258.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="273.5" y="809.106">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="368" x="337.5" y="808.25">
    [hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == TRUE]
  </text>
  <path d="M357 818.172v55h502v-45l-10-10H357" fill="#D3D3D3" filter="url(#a)" stroke="#a80036"/>
  <path d="M849 818.172v10h10l-10-10" fill="#D3D3D3" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="455" x="363" y="835.239">
    In the context of a bulk (when compared to regular transfers), duplicate
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="481" x="363" y="850.372">
    individual transfers are now considered and reported with Modified Request,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="410" x="363" y="865.504">
    because they could have already been handled for another bulk.
  </text>
  <path d="M278.5 889.57h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 889.57h957v584.516h-957z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="293.5" y="902.637">
    break
  </text>
  <path d="M357 911.703v479h558v-469l-10-10H357" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M905 911.703v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="363" y="928.77">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="379" y="943.903">
    id: &lt;messageId&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="379" y="959.036">
    from: &lt;ledgerName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="379" y="974.168">
    to: &lt;payerFspName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="379" y="989.301">
    type: &quot;application/json&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="379" y="1004.434">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="395" y="1019.567">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="395" y="1034.7">
    payload: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="411" y="1049.832">
    errorInformation: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="427" y="1064.965">
    errorCode: &quot;3106&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="427" y="1080.098">
    errorDescription: &quot;Modified request - Individual transfer prepare duplicate&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="461" x="427" y="1095.231">
    extensionList: { extension: [ { key: &quot;_cause&quot;, value: &lt;FSPIOPError&gt; } ] }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="411" y="1110.364">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="395" y="1125.497">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="395" y="1140.629">
    uriParams: { id: &lt;transferId&gt; }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="379" y="1155.762">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="379" y="1170.895">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="395" y="1186.028">
    correlationId: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="395" y="1201.161">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="411" y="1216.293">
    type: &quot;bulk-processing&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="411" y="1231.426">
    action: &quot;prepare-duplicate&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="411" y="1246.559">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="411" y="1261.692">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="427" y="1276.825">
    code: &quot;3106&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="427" y="1291.957">
    status: &quot;error&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="436" x="427" y="1307.09">
    description: &quot;Modified request - Individual transfer prepare duplicate&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="411" y="1322.223">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="411" y="1337.356">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="411" y="1352.489">
    responseTo: &lt;uuid&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="395" y="1367.622">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="379" y="1382.754">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1142 1432.086l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 1436.086h796"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="1423.454">
    8
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="372" y="1415.887">
    Publish Processing (failure) event for Payer
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="372" y="1431.02">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="466" y="1431.02">
    2003
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M258.5 1482.086H1787"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="374" x="263.5" y="1492.296">
    [hasDuplicateId == TRUE &amp;&amp; hasDuplicateHash == FALSE]
  </text>
  <path d="M278.5 1502.89h88v7l-10 10h-78v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 1502.891h957v584.516h-957z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="293.5" y="1515.957">
    break
  </text>
  <path d="M357 1525.023v479h546v-469l-10-10H357" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M893 1525.023v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="363" y="1542.09">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="379" y="1557.223">
    id: &lt;messageId&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="379" y="1572.356">
    from: &lt;ledgerName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="379" y="1587.489">
    to: &lt;payerFspName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="379" y="1602.622">
    type: &quot;application/json&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="379" y="1617.754">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="395" y="1632.887">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="395" y="1648.02">
    payload: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="411" y="1663.153">
    errorInformation: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="427" y="1678.286">
    errorCode: &quot;3106&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="427" y="1693.418">
    errorDescription: &quot;Modified request&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="461" x="427" y="1708.551">
    extensionList: { extension: [ { key: &quot;_cause&quot;, value: &lt;FSPIOPError&gt; } ] }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="411" y="1723.684">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="395" y="1738.817">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="395" y="1753.95">
    uriParams: { id: &lt;transferId&gt; }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="379" y="1769.082">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="379" y="1784.215">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="395" y="1799.348">
    correlationId: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="395" y="1814.481">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="411" y="1829.614">
    type: &quot;bulk-processing&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="411" y="1844.747">
    action: &quot;prepare-duplicate&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="411" y="1859.879">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="411" y="1875.012">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="427" y="1890.145">
    code: &quot;3106&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="427" y="1905.278">
    status: &quot;error&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="427" y="1920.411">
    description: &quot;Modified request&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="411" y="1935.543">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="411" y="1950.676">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="411" y="1965.809">
    responseTo: &lt;uuid&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="395" y="1980.942">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="379" y="1996.075">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1142 2045.406l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 2049.406h796"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="359" y="2036.774">
    9
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="372" y="2029.207">
    Publish Processing (failure) event for Payer
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="372" y="2044.34">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="466" y="2044.34">
    2003
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M258.5 2095.406H1787"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="263.5" y="2105.617">
    [hasDuplicateId == FALSE]
  </text>
  <path d="M357 2114.21v70h503v-60l-10-10H357" fill="#D3D3D3" filter="url(#a)" stroke="#a80036"/>
  <path d="M850 2114.21v10h10l-10-10" fill="#D3D3D3" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="482" x="363" y="2131.278">
    The validation of Payer, Payee can be skipped for individual transfers in Bulk
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="476" x="363" y="2146.411">
    as they should&apos;ve/would&apos;ve been validated already in the bulk prepare part.
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="453" x="363" y="2161.544">
    However, leaving it here for now, as in the future, this can be leveraged
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="363" y="2176.676">
    when bulk transfers to multiple Payees are supported by the Specification.
  </text>
  <path d="M278.5 2200.742h153v7l-10 10h-143v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 2200.742H1762v239.195H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="293.5" y="2213.809">
    Validate Payer
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1381 2235.008l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 2239.008h1035"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="2233.942">
    10
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="381" y="2233.942">
    Request to retrieve Payer Participant details (if it exists)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1661 2264.14l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1403 2268.141h264"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1410" y="2263.075">
    11
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1432" y="2263.075">
    Request Participant details
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1613 2281.14h129l10 19-10 19h-129l-10-19 10-19z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1615" y="2297.207">
    participant
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1615" y="2312.34">
    participantCurrency
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1414 2341.54l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1408 2345.539h269"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1420" y="2340.473">
    12
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1442" y="2340.473">
    Return Participant details if it exists
  </text>
  <path fill="#A80036" stroke="#a80036" d="M363 2370.672l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M357 2374.672h1040"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="369" y="2369.606">
    13
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="391" y="2369.606">
    Return Participant details if it exists
  </text>
  <path stroke="#a80036" d="M352 2418.938h42M394 2418.938v13M353 2431.938h41"/>
  <path fill="#A80036" stroke="#a80036" d="M363 2427.938l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="2406.305">
    14
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="381" y="2398.739">
    Validate Payer
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="381" y="2413.872">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="475" y="2413.872">
    3202
  </text>
  <path d="M278.5 2453.938h156v7l-10 10h-146v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 2453.938H1762v239.195H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="293.5" y="2467.004">
    Validate Payee
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1381 2488.203l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 2492.203h1035"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="2487.137">
    15
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="357" x="381" y="2487.137">
    Request to retrieve Payee Participant details (if it exists)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1661 2517.336l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1403 2521.336h264"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1410" y="2516.27">
    16
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1432" y="2516.27">
    Request Participant details
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1613 2534.336h129l10 19-10 19h-129l-10-19 10-19z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1615" y="2550.403">
    participant
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1615" y="2565.536">
    participantCurrency
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1414 2594.734l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M1408 2598.734h269"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1420" y="2593.669">
    17
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1442" y="2593.669">
    Return Participant details if it exists
  </text>
  <path fill="#A80036" stroke="#a80036" d="M363 2623.867l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M357 2627.867h1040"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="369" y="2622.801">
    18
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="391" y="2622.801">
    Return Participant details if it exists
  </text>
  <path stroke="#a80036" d="M352 2672.133h42M394 2672.133v13M353 2685.133h41"/>
  <path fill="#A80036" stroke="#a80036" d="M363 2681.133l-10 4 10 4-4-4z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="2659.501">
    19
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="381" y="2651.934">
    Validate Payee
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="381" y="2667.067">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="475" y="2667.067">
    3203
  </text>
  <path d="M268.5 2707.133h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M268.5 2707.133H1777v576.859H268.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="283.5" y="2720.2">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="347.5" y="2719.343">
    [Validate Prepare Transfer (success)]
  </text>
  <path d="M278.5 2731.266h521v7l-10 10h-511v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 2731.266H1767v243.328H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="476" x="293.5" y="2744.332">
    Persist Transfer State (with transferState=&apos;RECEIVED-PREPARE&apos;)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1266.5 2780.664l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 2784.664h920.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="2772.032">
    20
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="381" y="2764.465">
    Request to persist transfer
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="381" y="2779.598">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="475" y="2779.598">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1661 2809.797l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1288.5 2813.797H1667"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1295.5" y="2808.731">
    21
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1317.5" y="2808.731">
    Persist transfer
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1609 2856.797h138l10 41-10 42h-138l-10-42 10-41z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="1611" y="2872.864">
    transfer
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1611" y="2887.997">
    transferParticipant
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1611" y="2903.129">
    transferStateChange
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1611" y="2918.262">
    transferExtension
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="1611" y="2933.395">
    ilpPacket
  </text>
  <path fill="#A80036" stroke="#a80036" d="M363 2962.594l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M357 2966.594h925.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="369" y="2961.528">
    22
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="391" y="2961.528">
    Return success
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M268.5 2982.594H1777"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="273.5" y="2992.804">
    [Validate Prepare Transfer (failure)]
  </text>
  <path d="M278.5 3003.398h863v7l-10 10h-853v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 3003.398H1767v273.594H278.5z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="818" x="293.5" y="3016.465">
    Persist Transfer State (with transferState=&apos;INVALID&apos;) (Introducing a new status INVALID to mark these entries)
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1266.5 3067.93l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 3071.93h920.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="3051.731">
    23
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="381" y="3036.598">
    Request to persist transfer
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="327" x="381" y="3051.731">
    (when Payee/Payer/crypto-condition validation fails)
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="381" y="3066.864">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="475" y="3066.864">
    2003
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1661 3097.063l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M1288.5 3101.063H1667"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1295.5" y="3095.997">
    24
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1317.5" y="3095.997">
    Persist transfer
  </text>
  <path fill="#FFFFE0" filter="url(#a)" stroke="#a80036" d="M1609 3144.063h138l10 49-10 49h-138l-10-49 10-49z"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="1611" y="3160.129">
    transfer
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1611" y="3175.262">
    transferParticipant
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1611" y="3190.395">
    transferStateChange
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="1611" y="3205.528">
    transferExtension
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="1611" y="3220.661">
    transferError
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="1611" y="3235.794">
    ilpPacket
  </text>
  <path fill="#A80036" stroke="#a80036" d="M363 3264.992l-10 4 10 4-4-4z"/>
  <path stroke="#a80036" stroke-dasharray="2,2" d="M357 3268.992h925.5"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="369" y="3263.926">
    25
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="391" y="3263.926">
    Return success
  </text>
  <path d="M278.5 3311.992h64v7l-10 10h-54v-17" fill="#EEE" stroke="#000"/>
  <path fill="none" stroke="#000" stroke-width="2" d="M278.5 3311.992h957v1000.773h-957z"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="293.5" y="3325.059">
    alt
  </text>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="240" x="357.5" y="3324.203">
    [Validate Prepare Transfer (success)]
  </text>
  <path d="M357 3334.125v388h278v-378l-10-10H357" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M625 3334.125v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="363" y="3351.192">
    Message:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="363" y="3366.325">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="379" y="3381.457">
    id: &lt;messageId&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="379" y="3396.59">
    from: &lt;payerFspName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="379" y="3411.723">
    to: &lt;payeeFspName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="379" y="3426.856">
    type: &quot;application/json&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="379" y="3441.989">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="395" y="3457.122">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="395" y="3472.254">
    payload: &lt;transferMessage&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="379" y="3487.387">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="379" y="3502.52">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="395" y="3517.653">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="411" y="3532.786">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="411" y="3547.919">
    responseTo: &lt;previous.uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="411" y="3563.051">
    type: &quot;position&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="411" y="3578.184">
    action: &quot;bulk-prepare&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="411" y="3593.317">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="411" y="3608.45">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="427" y="3623.582">
    status: &quot;success&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="427" y="3638.715">
    code: 0,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="427" y="3653.848">
    description:&quot;action successful&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="411" y="3668.981">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="395" y="3684.114">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="379" y="3699.247">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="363" y="3714.379">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M825 3763.71l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 3767.711h479"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="3755.079">
    26
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="381" y="3747.512">
    Route &amp; Publish Position event for Payer
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="381" y="3762.645">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="475" y="3762.645">
    2003
  </text>
  <path stroke="#000" stroke-dasharray="2,2" d="M278.5 3776.711h957"/>
  <text font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="283.5" y="3786.921">
    [Validate Prepare Transfer (failure)]
  </text>
  <path d="M357 3795.516v463h613v-453l-10-10H357" fill="#FF0" filter="url(#a)" stroke="#a80036"/>
  <path d="M960 3795.516v10h10l-10-10" fill="#FF0" stroke="#a80036"/>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="363" y="3812.582">
    Message:
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="363" y="3827.715">
    {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="379" y="3842.848">
    id: &lt;messageId&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="379" y="3857.981">
    from: &lt;ledgerName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="379" y="3873.114">
    to: &lt;payerFspName&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="379" y="3888.247">
    type: &quot;application/json&quot;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="379" y="3903.379">
    content: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="395" y="3918.512">
    headers: &lt;transferHeaders&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="395" y="3933.645">
    payload: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="411" y="3948.778">
    &quot;errorInformation&quot;: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="528" x="427" y="3963.911">
    &quot;errorCode&quot;: &lt;possible codes: [2003, 3100, 3105, 3106, 3202, 3203, 3300, 3301]&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="427" y="3979.044">
    &quot;errorDescription&quot;: &quot;&lt;refer to section 35.1.3 for description&gt;&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="319" x="427" y="3994.176">
    &quot;extensionList&quot;: &lt;transferMessage.extensionList&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="395" y="4009.309">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="379" y="4024.442">
    },
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="379" y="4039.575">
    metadata: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="395" y="4054.707">
    event: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="411" y="4069.84">
    id: &lt;uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="411" y="4084.973">
    responseTo: &lt;previous.uuid&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="411" y="4100.106">
    type: &quot;bulk-processing&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="411" y="4115.239">
    action: &quot;prepare&quot;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="411" y="4130.372">
    createdAt: &lt;timestamp&gt;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="411" y="4145.504">
    state: {
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="427" y="4160.637">
    status: &apos;error&apos;,
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="427" y="4175.77">
    code: &lt;errorInformation.errorCode&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="427" y="4190.903">
    description: &lt;errorInformation.errorDescription&gt;
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="411" y="4206.036">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="395" y="4221.168">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="379" y="4236.301">
    }
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="363" y="4251.434">
    }
  </text>
  <path fill="#A80036" stroke="#a80036" d="M1147 4300.766l10 4-10 4 4-4z"/>
  <path stroke="#a80036" d="M352 4304.766h801"/>
  <text font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="359" y="4292.133">
    27
  </text>
  <text font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="411" x="381" y="4284.567">
    Publish Prepare failure event to Bulk Processing Topic (for Payer)
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="381" y="4299.7">
    Error codes:
  </text>
  <text fill="red" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="475" y="4299.7">
    2003
  </text>
</svg>
