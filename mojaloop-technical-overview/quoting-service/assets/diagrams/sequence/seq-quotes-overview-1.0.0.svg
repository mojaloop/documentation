<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1542px" preserveAspectRatio="none" style="width:688px;height:1542px;" version="1.1" viewBox="0 0 688 1542" width="688px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q09x5vebim7w" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="248.25" y="23.5352">Quoting Service Sequences</text><rect fill="#FFFFFF" filter="url(#f1q09x5vebim7w)" height="1192.3555" style="stroke: #000000; stroke-width: 2.0;" width="664.5" x="12" y="259.1953"/><rect fill="#FFFFFF" filter="url(#f1q09x5vebim7w)" height="850.2949" style="stroke: #000000; stroke-width: 2.0;" width="537" x="22" y="481.3691"/><rect fill="#FFFFFF" filter="url(#f1q09x5vebim7w)" height="425.6133" style="stroke: #000000; stroke-width: 2.0;" width="517" x="32" y="645.9219"/><rect fill="#FFFFFF" height="182.8184" style="stroke: none; stroke-width: 1.0;" width="517" x="32" y="888.7168"/><rect fill="#FFFFFF" height="253.1289" style="stroke: none; stroke-width: 1.0;" width="537" x="22" y="1078.5352"/><rect fill="#FFFFFF" height="112.8867" style="stroke: none; stroke-width: 1.0;" width="664.5" x="12" y="1338.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="121" x2="121" y1="101.9531" y2="1468.5508"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="304.5" x2="304.5" y1="101.9531" y2="1468.5508"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="496" x2="496" y1="101.9531" y2="1468.5508"/><rect fill="#FEFECE" filter="url(#f1q09x5vebim7w)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="80" y="66.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="87" y="87">Payer FSP</text><rect fill="#FEFECE" filter="url(#f1q09x5vebim7w)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="79" x="80" y="1467.5508"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="65" x="87" y="1488.0859">Payer FSP</text><rect fill="#FEFECE" filter="url(#f1q09x5vebim7w)" height="63.4648" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="267.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="280.5" y="54.0234">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="274.5" y="70.5117">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="278.5" y="87">Service</text><rect fill="#FEFECE" filter="url(#f1q09x5vebim7w)" height="63.4648" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="267.5" y="1467.5508"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="280.5" y="1488.0859">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="274.5" y="1504.5742">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="278.5" y="1521.0625">Service</text><rect fill="#FEFECE" filter="url(#f1q09x5vebim7w)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="454" y="66.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="461" y="87">Payee FSP</text><rect fill="#FEFECE" filter="url(#f1q09x5vebim7w)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="454" y="1467.5508"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="461" y="1488.0859">Payee FSP</text><path d="M73,116.9531 L73,141.9531 L348,141.9531 L348,126.9531 L338,116.9531 L73,116.9531 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M338,116.9531 L338,126.9531 L348,126.9531 L338,116.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="79" y="134.5215">Payer FSP requests quote from Payee FSP</text><polygon fill="#A80036" points="292.5,168.5742,302.5,172.5742,292.5,172.5742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="121.5" x2="303.5" y1="172.5742" y2="172.5742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="128.5" y="167.832">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="141.5" y="167.832">POST /quotes</text><polygon fill="#A80036" points="132.5,202.8848,122.5,202.8848,132.5,206.8848" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="121.5" x2="303.5" y1="201.8848" y2="201.8848"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="138.5" y="197.1426">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="151.5" y="197.1426">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="346.5" y1="231.1953" y2="231.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="346.5" y1="231.1953" y2="244.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="346.5" y1="244.1953" y2="244.1953"/><polygon fill="#A80036" points="315.5,240.1953,305.5,244.1953,315.5,248.1953,311.5,244.1953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="311.5" y="226.4531">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="324.5" y="226.4531">Validate Quote Request</text><path d="M12,259.1953 L74,259.1953 L74,266.1953 L64,276.1953 L12,276.1953 L12,259.1953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1192.3555" style="stroke: #000000; stroke-width: 2.0;" width="664.5" x="12" y="259.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="27" y="272.7637">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="89" y="271.8301">[quote is valid]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="346.5" y1="297.8164" y2="297.8164"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="346.5" y1="297.8164" y2="310.8164"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="346.5" y1="310.8164" y2="310.8164"/><polygon fill="#A80036" points="315.5,306.8164,305.5,310.8164,315.5,314.8164,311.5,310.8164" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="311.5" y="293.0742">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="324.5" y="293.0742">Persist Quote Data</text><path d="M252,323.8164 L252,363.8164 L545,363.8164 L545,333.8164 L535,323.8164 L252,323.8164 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M535,323.8164 L535,333.8164 L545,333.8164 L535,323.8164 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="258" y="341.3848">Switch forwards quote request to Payee FSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="258" y="356.6953">&lt;Payer based Rules&gt;</text><polygon fill="#A80036" points="484.5,390.748,494.5,394.748,484.5,394.748" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="495.5" y1="394.748" y2="394.748"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="311.5" y="390.0059">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="324.5" y="390.0059">POST /quotes</text><polygon fill="#A80036" points="315.5,425.0586,305.5,425.0586,315.5,429.0586" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="304.5" x2="495.5" y1="424.0586" y2="424.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="321.5" y="419.3164">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="334.5" y="419.3164">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="496.5" x2="538.5" y1="453.3691" y2="453.3691"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="538.5" x2="538.5" y1="453.3691" y2="466.3691"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="497.5" x2="538.5" y1="466.3691" y2="466.3691"/><polygon fill="#A80036" points="507.5,462.3691,497.5,466.3691,507.5,470.3691,503.5,466.3691" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="503.5" y="448.627">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="516.5" y="448.627">Calculate Fees/Charges</text><path d="M22,481.3691 L84,481.3691 L84,488.3691 L74,498.3691 L22,498.3691 L22,481.3691 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="850.2949" style="stroke: #000000; stroke-width: 2.0;" width="537" x="22" y="481.3691"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="37" y="494.9375">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="99" y="494.0039">[Payee FSP successfully calculates quote]</text><path d="M267,503.6797 L267,528.6797 L533,528.6797 L533,513.6797 L523,503.6797 L267,503.6797 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523,503.6797 L523,513.6797 L533,513.6797 L523,503.6797 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="278.75" y="521.248">Payee FSP responds to quote request</text><polygon fill="#A80036" points="315.5,555.3008,305.5,559.3008,315.5,559.3008" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="495.5" y1="559.3008" y2="559.3008"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="321.5" y="554.5586">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="334.5" y="554.5586">PUT /quotes/{ID}</text><polygon fill="#A80036" points="484.5,589.6113,494.5,589.6113,484.5,593.6113" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="304.5" x2="495.5" y1="588.6113" y2="588.6113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="311.5" y="583.8691">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="324.5" y="583.8691">200 Ok</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="346.5" y1="617.9219" y2="617.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="346.5" y1="617.9219" y2="630.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="346.5" y1="630.9219" y2="630.9219"/><polygon fill="#A80036" points="315.5,626.9219,305.5,630.9219,315.5,634.9219,311.5,630.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="311.5" y="613.1797">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="333.5" y="613.1797">Validate Quote Response</text><path d="M32,645.9219 L94,645.9219 L94,652.9219 L84,662.9219 L32,662.9219 L32,645.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="425.6133" style="stroke: #000000; stroke-width: 2.0;" width="517" x="32" y="645.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="47" y="659.4902">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="109" y="658.5566">[response is ok]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="346.5" y1="684.543" y2="684.543"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="346.5" y1="684.543" y2="697.543"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="346.5" y1="697.543" y2="697.543"/><polygon fill="#A80036" points="315.5,693.543,305.5,697.543,315.5,701.543,311.5,697.543" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="311.5" y="679.8008">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="333.5" y="679.8008">Persist Response Data</text><path d="M60,710.543 L60,750.543 L361,750.543 L361,720.543 L351,710.543 L60,710.543 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M351,710.543 L351,720.543 L361,720.543 L351,710.543 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="66" y="728.1113">Switch forwards quote response to Payer FSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="66" y="743.4219">&lt;Payee whole request Rule&gt;</text><polygon fill="#A80036" points="132.5,777.4746,122.5,781.4746,132.5,781.4746" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="121.5" x2="303.5" y1="781.4746" y2="781.4746"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="138.5" y="776.7324">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="160.5" y="776.7324">PUT /quotes/{ID}</text><polygon fill="#A80036" points="292.5,811.7852,302.5,811.7852,292.5,815.7852" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="121.5" x2="303.5" y1="810.7852" y2="810.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="128.5" y="806.043">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="150.5" y="806.043">200 Ok</text><path d="M42,823.7852 L42,878.7852 L196,878.7852 L196,833.7852 L186,823.7852 L42,823.7852 " fill="#3498DB" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M186,823.7852 L186,833.7852 L196,833.7852 L186,823.7852 " fill="#3498DB" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="48" y="841.3535">Payer FSP continues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="48" y="856.6641">with transfer if quote</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="48" y="871.9746">is acceptable...</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32" x2="549" y1="889.7168" y2="889.7168"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="37" y="900.3516">[response invalid]</text><path d="M267,908.6719 L267,933.6719 L533,933.6719 L533,918.6719 L523,908.6719 L267,908.6719 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523,908.6719 L523,918.6719 L533,918.6719 L523,908.6719 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="291.25" y="926.2402">Switch returns error to Payee FSP</text><polygon fill="#A80036" points="484.5,960.293,494.5,964.293,484.5,964.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="495.5" y1="964.293" y2="964.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="311.5" y="959.5508">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="333.5" y="959.5508">PUT /quotes/{ID}/error</text><polygon fill="#A80036" points="315.5,994.6035,305.5,994.6035,315.5,998.6035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="304.5" x2="495.5" y1="993.6035" y2="993.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="321.5" y="988.8613">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="343.5" y="988.8613">200 Ok</text><path d="M267,1006.6035 L267,1061.6035 L533,1061.6035 L533,1016.6035 L523,1006.6035 L267,1006.6035 " fill="#EC7063" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523,1006.6035 L523,1016.6035 L533,1016.6035 L523,1006.6035 " fill="#EC7063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="308.25" y="1024.1719">Note that under this</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="308.25" y="1039.4824">scenario the Payer FSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="308.25" y="1054.793">may not receive a response</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="22" x2="559" y1="1079.5352" y2="1079.5352"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="279" x="27" y="1090.1699">[Payee FSP calculation fails or rejects the request]</text><path d="M267,1098.4902 L267,1123.4902 L533,1123.4902 L533,1108.4902 L523,1098.4902 L267,1098.4902 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523,1098.4902 L523,1108.4902 L533,1108.4902 L523,1098.4902 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="291.25" y="1116.0586">Payee FSP returns error to Switch</text><polygon fill="#A80036" points="315.5,1150.1113,305.5,1154.1113,315.5,1154.1113" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="495.5" y1="1154.1113" y2="1154.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="321.5" y="1149.3691">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="343.5" y="1149.3691">PUT quotes/{ID}/error</text><polygon fill="#A80036" points="484.5,1184.4219,494.5,1184.4219,484.5,1188.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="304.5" x2="495.5" y1="1183.4219" y2="1183.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="311.5" y="1178.6797">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="333.5" y="1178.6797">200 OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="304.5" x2="346.5" y1="1212.7324" y2="1212.7324"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="346.5" x2="346.5" y1="1212.7324" y2="1225.7324"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="346.5" y1="1225.7324" y2="1225.7324"/><polygon fill="#A80036" points="315.5,1221.7324,305.5,1225.7324,315.5,1229.7324,311.5,1225.7324" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="311.5" y="1207.9902">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="333.5" y="1207.9902">Persist error data</text><path d="M84,1238.7324 L84,1263.7324 L340,1263.7324 L340,1248.7324 L330,1238.7324 L84,1238.7324 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M330,1238.7324 L330,1248.7324 L340,1248.7324 L330,1238.7324 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="104.25" y="1256.3008">Switch returns error to Payer FSP</text><polygon fill="#A80036" points="132.5,1290.3535,122.5,1294.3535,132.5,1294.3535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="121.5" x2="303.5" y1="1294.3535" y2="1294.3535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="138.5" y="1289.6113">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="160.5" y="1289.6113">PUT quotes/{ID}/error</text><polygon fill="#A80036" points="292.5,1324.6641,302.5,1324.6641,292.5,1328.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="121.5" x2="303.5" y1="1323.6641" y2="1323.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="128.5" y="1318.9219">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="150.5" y="1318.9219">200 OK</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="12" x2="676.5" y1="1339.6641" y2="1339.6641"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="17" y="1350.2988">[quote invalid]</text><path d="M84,1358.6191 L84,1383.6191 L340,1383.6191 L340,1368.6191 L330,1358.6191 L84,1358.6191 " fill="#FBFB77" filter="url(#f1q09x5vebim7w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M330,1358.6191 L330,1368.6191 L340,1368.6191 L330,1358.6191 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="104.25" y="1376.1875">Switch returns error to Payer FSP</text><polygon fill="#A80036" points="132.5,1410.2402,122.5,1414.2402,132.5,1414.2402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="121.5" x2="303.5" y1="1414.2402" y2="1414.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="138.5" y="1409.498">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="160.5" y="1409.498">PUT quotes/{ID}/error</text><polygon fill="#A80036" points="292.5,1444.5508,302.5,1444.5508,292.5,1448.5508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="121.5" x2="303.5" y1="1443.5508" y2="1443.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="128.5" y="1438.8086">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="150.5" y="1438.8086">200 OK</text><!--
@startuml
Title Quoting Service Sequences
participant "Payer FSP"
participant "Switch\nQuoting\nService" as Switch
participant "Payee FSP"

autonumber
note over "Payer FSP", Switch: Payer FSP requests quote from Payee FSP
"Payer FSP" -\ Switch: POST /quotes
Switch - -/ "Payer FSP": 202 Accepted
Switch -> Switch: Validate Quote Request

alt quote is valid
    
    Switch -> Switch: Persist Quote Data
    note over Switch, "Payee FSP": Switch forwards quote request to Payee FSP\n<Payer based Rules> 
    Switch -\ "Payee FSP": POST /quotes
    "Payee FSP" - -/ Switch: 202 Accepted
    "Payee FSP" -> "Payee FSP": Calculate Fees/Charges
    
    alt Payee FSP successfully calculates quote
    
        note over "Payee FSP", Switch: Payee FSP responds to quote request
        "Payee FSP" -\ Switch: PUT /quotes/{ID}
        Switch - -/ "Payee FSP": 200 Ok
        
        Switch -> Switch: Validate Quote Response
        
        alt response is ok
            Switch -> Switch: Persist Response Data
            
            note over Switch, "Payer FSP": Switch forwards quote response to Payer FSP\n<Payee \ whole request Rule>
            
            Switch -\ "Payer FSP": PUT /quotes/{ID}
            "Payer FSP" - -/ Switch: 200 Ok
            
            note over "Payer FSP" #3498db: Payer FSP continues\nwith transfer if quote\nis acceptable...
        else response invalid
        
            note over Switch, "Payee FSP": Switch returns error to Payee FSP
        
            Switch -\ "Payee FSP": PUT /quotes/{ID}/error
            "Payee FSP" - -/ Switch : 200 Ok
            
            note over Switch, "Payee FSP" #ec7063: Note that under this\nscenario the Payer FSP\nmay not receive a response
        
        end
    else Payee FSP calculation fails or rejects the request
    
        note over "Payee FSP", Switch: Payee FSP returns error to Switch
    
        "Payee FSP" -\ Switch: PUT quotes/{ID}/error
        Switch - -/ "Payee FSP": 200 OK
        Switch -> Switch: Persist error data
        
        note over "Payer FSP", Switch: Switch returns error to Payer FSP
        
        Switch -\ "Payer FSP": PUT quotes/{ID}/error
        "Payer FSP" - -/ Switch: 200 OK
    
    end
else quote invalid
    note over "Payer FSP", Switch: Switch returns error to Payer FSP
    Switch -\ "Payer FSP": PUT quotes/{ID}/error
    "Payer FSP" - -/ Switch: 200 OK
end
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>