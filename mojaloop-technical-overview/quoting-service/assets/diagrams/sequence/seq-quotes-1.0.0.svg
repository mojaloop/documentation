<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1542px" preserveAspectRatio="none" style="width:689px;height:1542px;" version="1.1" viewBox="0 0 689 1542" width="689px" zoomAndPan="magnify"><defs><filter height="300%" id="fxy718lr9dgwd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="248.75" y="23.5352">Quoting Service Sequences</text><rect fill="#FFFFFF" filter="url(#fxy718lr9dgwd)" height="1192.3555" style="stroke: #000000; stroke-width: 2.0;" width="664.5" x="13" y="259.1953"/><rect fill="#FFFFFF" filter="url(#fxy718lr9dgwd)" height="850.2949" style="stroke: #000000; stroke-width: 2.0;" width="542" x="23" y="481.3691"/><rect fill="#FFFFFF" filter="url(#fxy718lr9dgwd)" height="425.6133" style="stroke: #000000; stroke-width: 2.0;" width="522" x="33" y="645.9219"/><rect fill="#FFFFFF" height="182.8184" style="stroke: none; stroke-width: 1.0;" width="522" x="33" y="888.7168"/><rect fill="#FFFFFF" height="253.1289" style="stroke: none; stroke-width: 1.0;" width="542" x="23" y="1078.5352"/><rect fill="#FFFFFF" height="112.8867" style="stroke: none; stroke-width: 1.0;" width="664.5" x="13" y="1338.6641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="122" x2="122" y1="101.9531" y2="1468.5508"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="305.5" x2="305.5" y1="101.9531" y2="1468.5508"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="497" x2="497" y1="101.9531" y2="1468.5508"/><rect fill="#FEFECE" filter="url(#fxy718lr9dgwd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="76" y="66.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="83" y="87">Payer DFSP</text><rect fill="#FEFECE" filter="url(#fxy718lr9dgwd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="76" y="1467.5508"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="83" y="1488.0859">Payer DFSP</text><rect fill="#FEFECE" filter="url(#fxy718lr9dgwd)" height="63.4648" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="268.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="281.5" y="54.0234">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="275.5" y="70.5117">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="279.5" y="87">Service</text><rect fill="#FEFECE" filter="url(#fxy718lr9dgwd)" height="63.4648" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="268.5" y="1467.5508"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="281.5" y="1488.0859">Switch</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="275.5" y="1504.5742">Quoting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="279.5" y="1521.0625">Service</text><rect fill="#FEFECE" filter="url(#fxy718lr9dgwd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="450" y="66.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="457" y="87">Payee DFSP</text><rect fill="#FEFECE" filter="url(#fxy718lr9dgwd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="91" x="450" y="1467.5508"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="457" y="1488.0859">Payee DFSP</text><path d="M64,116.9531 L64,141.9531 L359,141.9531 L359,126.9531 L349,116.9531 L64,116.9531 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M349,116.9531 L349,126.9531 L359,126.9531 L349,116.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="70" y="134.5215">Payer DFSP requests quote from Payee DFSP</text><polygon fill="#A80036" points="293.5,168.5742,303.5,172.5742,293.5,172.5742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="122.5" x2="304.5" y1="172.5742" y2="172.5742"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="129.5" y="167.832">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="142.5" y="167.832">POST /quotes</text><polygon fill="#A80036" points="133.5,202.8848,123.5,202.8848,133.5,206.8848" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="122.5" x2="304.5" y1="201.8848" y2="201.8848"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="139.5" y="197.1426">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="152.5" y="197.1426">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="347.5" y1="231.1953" y2="231.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="347.5" y1="231.1953" y2="244.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="306.5" x2="347.5" y1="244.1953" y2="244.1953"/><polygon fill="#A80036" points="316.5,240.1953,306.5,244.1953,316.5,248.1953,312.5,244.1953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="312.5" y="226.4531">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="325.5" y="226.4531">Validate Quote Request</text><path d="M13,259.1953 L75,259.1953 L75,266.1953 L65,276.1953 L13,276.1953 L13,259.1953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1192.3555" style="stroke: #000000; stroke-width: 2.0;" width="664.5" x="13" y="259.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="272.7637">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="90" y="271.8301">[quote is valid]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="347.5" y1="297.8164" y2="297.8164"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="347.5" y1="297.8164" y2="310.8164"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="306.5" x2="347.5" y1="310.8164" y2="310.8164"/><polygon fill="#A80036" points="316.5,306.8164,306.5,310.8164,316.5,314.8164,312.5,310.8164" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="312.5" y="293.0742">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="325.5" y="293.0742">Persist Quote Data</text><path d="M248,323.8164 L248,363.8164 L551,363.8164 L551,333.8164 L541,323.8164 L248,323.8164 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M541,323.8164 L541,333.8164 L551,333.8164 L541,323.8164 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="254" y="341.3848">Switch forwards quote request to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="254" y="356.6953">&lt;Payer based Rules&gt;</text><polygon fill="#A80036" points="485.5,390.748,495.5,394.748,485.5,394.748" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="496.5" y1="394.748" y2="394.748"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="312.5" y="390.0059">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="325.5" y="390.0059">POST /quotes</text><polygon fill="#A80036" points="316.5,425.0586,306.5,425.0586,316.5,429.0586" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="305.5" x2="496.5" y1="424.0586" y2="424.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="322.5" y="419.3164">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="335.5" y="419.3164">202 Accepted</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="497.5" x2="539.5" y1="453.3691" y2="453.3691"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="539.5" x2="539.5" y1="453.3691" y2="466.3691"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="498.5" x2="539.5" y1="466.3691" y2="466.3691"/><polygon fill="#A80036" points="508.5,462.3691,498.5,466.3691,508.5,470.3691,504.5,466.3691" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="504.5" y="448.627">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="517.5" y="448.627">Calculate Fees/Charges</text><path d="M23,481.3691 L85,481.3691 L85,488.3691 L75,498.3691 L23,498.3691 L23,481.3691 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="850.2949" style="stroke: #000000; stroke-width: 2.0;" width="542" x="23" y="481.3691"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="494.9375">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="238" x="100" y="494.0039">[Payee DFSP successfully calculates quote]</text><path d="M265,503.6797 L265,528.6797 L536,528.6797 L536,513.6797 L526,503.6797 L265,503.6797 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M526,503.6797 L526,513.6797 L536,513.6797 L526,503.6797 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="274.25" y="521.248">Payee DFSP responds to quote request</text><polygon fill="#A80036" points="316.5,555.3008,306.5,559.3008,316.5,559.3008" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="496.5" y1="559.3008" y2="559.3008"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="322.5" y="554.5586">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="335.5" y="554.5586">PUT /quotes/{ID}</text><polygon fill="#A80036" points="485.5,589.6113,495.5,589.6113,485.5,593.6113" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="305.5" x2="496.5" y1="588.6113" y2="588.6113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="312.5" y="583.8691">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="325.5" y="583.8691">200 Ok</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="347.5" y1="617.9219" y2="617.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="347.5" y1="617.9219" y2="630.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="306.5" x2="347.5" y1="630.9219" y2="630.9219"/><polygon fill="#A80036" points="316.5,626.9219,306.5,630.9219,316.5,634.9219,312.5,630.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="312.5" y="613.1797">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="334.5" y="613.1797">Validate Quote Response</text><path d="M33,645.9219 L95,645.9219 L95,652.9219 L85,662.9219 L33,662.9219 L33,645.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="425.6133" style="stroke: #000000; stroke-width: 2.0;" width="522" x="33" y="645.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="48" y="659.4902">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="110" y="658.5566">[response is ok]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="347.5" y1="684.543" y2="684.543"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="347.5" y1="684.543" y2="697.543"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="306.5" x2="347.5" y1="697.543" y2="697.543"/><polygon fill="#A80036" points="316.5,693.543,306.5,697.543,316.5,701.543,312.5,697.543" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="312.5" y="679.8008">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="334.5" y="679.8008">Persist Response Data</text><path d="M56,710.543 L56,750.543 L367,750.543 L367,720.543 L357,710.543 L56,710.543 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M357,710.543 L357,720.543 L367,720.543 L357,710.543 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="62" y="728.1113">Switch forwards quote response to Payer DFSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="62" y="743.4219">&lt;Payee whole request Rule&gt;</text><polygon fill="#A80036" points="133.5,777.4746,123.5,781.4746,133.5,781.4746" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="122.5" x2="304.5" y1="781.4746" y2="781.4746"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="139.5" y="776.7324">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="161.5" y="776.7324">PUT /quotes/{ID}</text><polygon fill="#A80036" points="293.5,811.7852,303.5,811.7852,293.5,815.7852" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="122.5" x2="304.5" y1="810.7852" y2="810.7852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="129.5" y="806.043">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="151.5" y="806.043">200 Ok</text><path d="M43,823.7852 L43,878.7852 L198,878.7852 L198,833.7852 L188,823.7852 L43,823.7852 " fill="#3498DB" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M188,823.7852 L188,833.7852 L198,833.7852 L188,823.7852 " fill="#3498DB" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="49" y="841.3535">Payer DFSP continues</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="49" y="856.6641">with transfer if quote</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="49" y="871.9746">is acceptable...</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="33" x2="555" y1="889.7168" y2="889.7168"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="38" y="900.3516">[response invalid]</text><path d="M265,908.6719 L265,933.6719 L536,933.6719 L536,918.6719 L526,908.6719 L265,908.6719 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M526,908.6719 L526,918.6719 L536,918.6719 L526,908.6719 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="286.75" y="926.2402">Switch returns error to Payee DFSP</text><polygon fill="#A80036" points="485.5,960.293,495.5,964.293,485.5,964.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="496.5" y1="964.293" y2="964.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="312.5" y="959.5508">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="334.5" y="959.5508">PUT /quotes/{ID}/error</text><polygon fill="#A80036" points="316.5,994.6035,306.5,994.6035,316.5,998.6035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="305.5" x2="496.5" y1="993.6035" y2="993.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="322.5" y="988.8613">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="344.5" y="988.8613">200 Ok</text><path d="M265,1006.6035 L265,1061.6035 L536,1061.6035 L536,1016.6035 L526,1006.6035 L265,1006.6035 " fill="#EC7063" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M526,1006.6035 L526,1016.6035 L536,1016.6035 L526,1006.6035 " fill="#EC7063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="308.75" y="1024.1719">Note that under this</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="308.75" y="1039.4824">scenario the Payer DFSP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="308.75" y="1054.793">may not receive a response</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="565" y1="1079.5352" y2="1079.5352"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="288" x="28" y="1090.1699">[Payee DFSP calculation fails or rejects the request]</text><path d="M265,1098.4902 L265,1123.4902 L536,1123.4902 L536,1108.4902 L526,1098.4902 L265,1098.4902 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M526,1098.4902 L526,1108.4902 L536,1108.4902 L526,1098.4902 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="286.75" y="1116.0586">Payee DFSP returns error to Switch</text><polygon fill="#A80036" points="316.5,1150.1113,306.5,1154.1113,316.5,1154.1113" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="496.5" y1="1154.1113" y2="1154.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="322.5" y="1149.3691">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="344.5" y="1149.3691">PUT quotes/{ID}/error</text><polygon fill="#A80036" points="485.5,1184.4219,495.5,1184.4219,485.5,1188.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="305.5" x2="496.5" y1="1183.4219" y2="1183.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="312.5" y="1178.6797">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="334.5" y="1178.6797">200 OK</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="305.5" x2="347.5" y1="1212.7324" y2="1212.7324"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="347.5" x2="347.5" y1="1212.7324" y2="1225.7324"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="306.5" x2="347.5" y1="1225.7324" y2="1225.7324"/><polygon fill="#A80036" points="316.5,1221.7324,306.5,1225.7324,316.5,1229.7324,312.5,1225.7324" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="312.5" y="1207.9902">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="334.5" y="1207.9902">Persist error data</text><path d="M83,1238.7324 L83,1263.7324 L344,1263.7324 L344,1248.7324 L334,1238.7324 L83,1238.7324 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334,1238.7324 L334,1248.7324 L344,1248.7324 L334,1238.7324 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="100.75" y="1256.3008">Switch returns error to Payer DFSP</text><polygon fill="#A80036" points="133.5,1290.3535,123.5,1294.3535,133.5,1294.3535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="122.5" x2="304.5" y1="1294.3535" y2="1294.3535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="139.5" y="1289.6113">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="161.5" y="1289.6113">PUT quotes/{ID}/error</text><polygon fill="#A80036" points="293.5,1324.6641,303.5,1324.6641,293.5,1328.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="122.5" x2="304.5" y1="1323.6641" y2="1323.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="129.5" y="1318.9219">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="151.5" y="1318.9219">200 OK</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="677.5" y1="1339.6641" y2="1339.6641"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="18" y="1350.2988">[quote invalid]</text><path d="M83,1358.6191 L83,1383.6191 L344,1383.6191 L344,1368.6191 L334,1358.6191 L83,1358.6191 " fill="#FBFB77" filter="url(#fxy718lr9dgwd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334,1358.6191 L334,1368.6191 L344,1368.6191 L334,1358.6191 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="100.75" y="1376.1875">Switch returns error to Payer DFSP</text><polygon fill="#A80036" points="133.5,1410.2402,123.5,1414.2402,133.5,1414.2402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="122.5" x2="304.5" y1="1414.2402" y2="1414.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="139.5" y="1409.498">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="161.5" y="1409.498">PUT quotes/{ID}/error</text><polygon fill="#A80036" points="293.5,1444.5508,303.5,1444.5508,293.5,1448.5508" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="122.5" x2="304.5" y1="1443.5508" y2="1443.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="129.5" y="1438.8086">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="151.5" y="1438.8086">200 OK</text><!--
@startuml
Title Quoting Service Sequences
participant "Payer DFSP"
participant "Switch\nQuoting\nService" as Switch
participant "Payee DFSP"

autonumber
note over "Payer DFSP", Switch: Payer DFSP requests quote from Payee DFSP
"Payer DFSP" -\ Switch: POST /quotes
Switch - -/ "Payer DFSP": 202 Accepted
Switch -> Switch: Validate Quote Request

alt quote is valid
    
    Switch -> Switch: Persist Quote Data
    note over Switch, "Payee DFSP": Switch forwards quote request to Payee DFSP\n<Payer based Rules> 
    Switch -\ "Payee DFSP": POST /quotes
    "Payee DFSP" - -/ Switch: 202 Accepted
    "Payee DFSP" -> "Payee DFSP": Calculate Fees/Charges
    
    alt Payee DFSP successfully calculates quote
    
        note over "Payee DFSP", Switch: Payee DFSP responds to quote request
        "Payee DFSP" -\ Switch: PUT /quotes/{ID}
        Switch - -/ "Payee DFSP": 200 Ok
        
        Switch -> Switch: Validate Quote Response
        
        alt response is ok
        
            Switch -> Switch: Persist Response Data
            
            note over Switch, "Payer DFSP": Switch forwards quote response to Payer DFSP\n<Payee \ whole request Rule>
            
            Switch -\ "Payer DFSP": PUT /quotes/{ID}
            "Payer DFSP" - -/ Switch: 200 Ok
            
            note over "Payer DFSP" #3498db: Payer DFSP continues\nwith transfer if quote\nis acceptable...
        else response invalid
        
            note over Switch, "Payee DFSP": Switch returns error to Payee DFSP
        
            Switch -\ "Payee DFSP": PUT /quotes/{ID}/error
            "Payee DFSP" - -/ Switch : 200 Ok
            
            note over Switch, "Payee DFSP" #ec7063: Note that under this\nscenario the Payer DFSP\nmay not receive a response
        
        end
    else Payee DFSP calculation fails or rejects the request
    
        note over "Payee DFSP", Switch: Payee DFSP returns error to Switch
    
        "Payee DFSP" -\ Switch: PUT quotes/{ID}/error
        Switch - -/ "Payee DFSP": 200 OK
        Switch -> Switch: Persist error data
        
        note over "Payer DFSP", Switch: Switch returns error to Payer DFSP
        
        Switch -\ "Payer DFSP": PUT quotes/{ID}/error
        "Payer DFSP" - -/ Switch: 200 OK
    
    end
else quote invalid
    note over "Payer DFSP", Switch: Switch returns error to Payer DFSP
    Switch -\ "Payer DFSP": PUT quotes/{ID}/error
    "Payer DFSP" - -/ Switch: 200 OK
end
@enduml

PlantUML version 1.2019.06(Sat May 25 01:10:25 PHT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_171-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>